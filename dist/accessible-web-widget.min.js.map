{"version":3,"file":"accessible-web-widget.min.js","sources":["../src/constants/theme.js","../src/constants/icons.js","../src/constants/selectors.js","../src/constants/translations.js","../src/state.js","../src/styles.js","../src/features.js","../src/ui.js","../src/index.js"],"sourcesContent":["export const WIDGET_THEME = {\n      // Core colors\n      primaryColor: '#1976d2',        // Accessible blue (WCAG AA compliant)\n      primaryColorLight: '#42a5f5',   // Lighter blue\n      primaryColorDark: '#0d47a1',    // Darker blue\n      backgroundColor: '#f5f7fa',\n      textColor: '#222222',\n      textColorInverted: '#ffffff',\n      \n      // UI elements\n      buttonSize: '48px',\n      cardBackground: '#ffffff',\n      borderColor: '#d1d5db',\n      focusRingColor: '#1976d2',      // Match primary\n      \n      // Interactive states\n      hoverColor: '#42a5f5',          // Use light blue for hover\n      activeColor: '#0d47a1',         // Use dark blue for active\n      \n      // Feedback colors\n      successColor: '#2e7d32', // Green\n      errorColor: '#c62828', // Red\n      warningColor: '#f57c00', // Orange\n      \n      // Other UI properties\n      headerHeight: '54px',\n      borderRadius: '8px',\n      buttonBorderRadius: '0.4rem',\n      menuPosition: 'right', // or 'left'\n      zIndex: 100000,\n      \n      // WCAG-specific\n      focusBorderWidth: '3px',\n      focusOutlineOffset: '2px'\n    };\n","export const WIDGET_ICONS = {\n      accessibility: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 -960 960 960\"><path d=\"M423.5-743.5Q400-767 400-800t23.5-56.5Q447-880 480-880t56.5 23.5Q560-833 560-800t-23.5 56.5Q513-720 480-720t-56.5-23.5ZM360-80v-520q-60-5-122-15t-118-25l20-80q78 21 166 30.5t174 9.5q86 0 174-9.5T820-720l20 80q-56 15-118 25t-122 15v520h-80v-240h-80v240h-80Z\"/></svg>',\n      accessibilityVariants: {\n            default: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 -960 960 960\"><path d=\"M423.5-743.5Q400-767 400-800t23.5-56.5Q447-880 480-880t56.5 23.5Q560-833 560-800t-23.5 56.5Q513-720 480-720t-56.5-23.5ZM360-80v-520q-60-5-122-15t-118-25l20-80q78 21 166 30.5t174 9.5q86 0 174-9.5T820-720l20 80q-56 15-118 25t-122 15v520h-80v-240h-80v240h-80Z\"/></svg>',\n            'icon-2': '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 -960 960 960\"><path d=\"M423.5-743.5Q400-767 400-800t23.5-56.5Q447-880 480-880t56.5 23.5Q560-833 560-800t-23.5 56.5Q513-720 480-720t-56.5-23.5ZM360-80v-520H120v-80h720v80H600v520h-80v-240h-80v240h-80Z\"/></svg>',\n            'icon-3': '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 -960 960 960\"><path d=\"M423.5-743.5Q400-767 400-800t23.5-56.5Q447-880 480-880t56.5 23.5Q560-833 560-800t-23.5 56.5Q513-720 480-720t-56.5-23.5ZM680-80v-200H480q-33 0-56.5-23.5T400-360v-240q0-33 23.5-56.5T480-680q24 0 41.5 10.5T559-636q55 66 99.5 90.5T760-520v80q-53 0-107-23t-93-55v138h120q33 0 56.5 23.5T760-300v220h-80Zm-280 0q-83 0-141.5-58.5T200-280q0-72 45.5-127T360-476v82q-35 14-57.5 44.5T280-280q0 50 35 85t85 35q39 0 69.5-22.5T514-240h82q-14 69-69 114.5T400-80Z\"/></svg>',\n            'icon-4': '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 -960 960 960\"><path d=\"M320-80q-83 0-141.5-58.5T120-280q0-83 58.5-141.5T320-480v80q-50 0-85 35t-35 85q0 50 35 85t85 35q50 0 85-35t35-85h80q0 83-58.5 141.5T320-80Zm360-40v-200H440q-44 0-68-37.5t-6-78.5l74-164h-91l-24 62-77-22 28-72q9-23 29.5-35.5T350-680h208q45 0 68.5 36.5T632-566l-66 146h114q33 0 56.5 23.5T760-340v220h-80Zm-96.5-603.5Q560-747 560-780t23.5-56.5Q607-860 640-860t56.5 23.5Q720-813 720-780t-23.5 56.5Q673-700 640-700t-56.5-23.5Z\"/></svg>'\n      },\n      largePointer: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\"><path d=\"m320-410 79-110h170L320-716v306ZM551-80 406-392 240-160v-720l560 440H516l144 309-109 51ZM399-520Z\"/></svg>',\n      pauseMotion: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#1f1f1f\"><path d=\"m791-55-91-91q-49 32-104.5 49T480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 17-115.5T146-700l-91-91 57-57 736 736-57 57ZM480-160q43 0 83.5-11t78.5-33L204-642q-22 38-33 78.5T160-480q0 133 93.5 226.5T480-160Zm334-100-58-58q22-38 33-78.5t11-83.5q0-133-93.5-226.5T480-800q-43 0-83.5 11T318-756l-58-58q49-32 104.5-49T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 60-17 115.5T814-260ZM537-537ZM423-423Z\"/></svg>',\n      readingAid: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#1f1f1f\"><path d=\"M320-80v-440l-80-120v-240h480v240l-80 120v440H320Zm160-260q-25 0-42.5-17.5T420-400q0-25 17.5-42.5T480-460q25 0 42.5 17.5T540-400q0 25-17.5 42.5T480-340ZM320-760h320v-40H320v40Zm320 80H320v16l80 120v384h160v-384l80-120v-16ZM480-480Z\"/></svg>',\n      boldText: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#1f1f1f\"><path d=\"M272-200v-560h221q65 0 120 40t55 111q0 51-23 78.5T602-491q25 11 55.5 41t30.5 90q0 89-65 124.5T501-200H272Zm121-112h104q48 0 58.5-24.5T566-372q0-11-10.5-35.5T494-432H393v120Zm0-228h93q33 0 48-17t15-38q0-24-17-39t-44-15h-95v109Z\"/></svg>',\n      lineSpacing: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#1f1f1f\"><path d=\"M240-160 80-320l56-56 64 62v-332l-64 62-56-56 160-160 160 160-56 56-64-62v332l64-62 56 56-160 160Zm240-40v-80h400v80H480Zm0-240v-80h400v80H480Zm0-240v-80h400v80H480Z\"/></svg>',\n      letterSpacing: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#1f1f1f\"><path d=\"M320-80 160-240l160-160 57 56-64 64h334l-63-64 56-56 160 160L640-80l-57-56 64-64H313l63 64-56 56ZM200-480v-400h80v400h-80Zm240 0v-400h80v400h-80Zm240 0v-400h80v400h-80Z\"/></svg>',\n      dyslexiaFont: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#1f1f1f\"><path d=\"m131-252 165-440h79l165 440h-76l-39-112H247l-40 112h-76Zm139-176h131l-64-182h-4l-63 182Zm395 186q-51 0-81-27.5T554-342q0-44 34.5-72.5T677-443q23 0 45 4t38 11v-12q0-29-20.5-47T685-505q-23 0-42 9.5T610-468l-47-35q24-29 54.5-43t68.5-14q69 0 103 32.5t34 97.5v178h-63v-37h-4q-14 23-38 35t-53 12Zm12-54q35 0 59.5-24t24.5-56q-14-8-33.5-12.5T689-393q-32 0-50 14t-18 37q0 20 16 33t40 13Z\"/></svg>',\n      highlightLinks: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#1f1f1f\"><path d=\"M440-280H280q-83 0-141.5-58.5T80-480q0-83 58.5-141.5T280-680h160v80H280q-50 0-85 35t-35 85q0 50 35 85t85 35h160v80ZM320-440v-80h320v80H320Zm200 160v-80h160q50 0 85-35t35-85q0-50-35-85t-85-35H520v-80h160q83 0 141.5 58.5T880-480q0 83-58.5 141.5T680-280H520Z\"/></svg>',\n      highlightTitle: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#1f1f1f\"><path d=\"M320-280q17 0 28.5-11.5T360-320q0-17-11.5-28.5T320-360q-17 0-28.5 11.5T280-320q0 17 11.5 28.5T320-280Zm0-160q17 0 28.5-11.5T360-480q0-17-11.5-28.5T320-520q-17 0-28.5 11.5T280-480q0 17 11.5 28.5T320-440Zm0-160q17 0 28.5-11.5T360-640q0-17-11.5-28.5T320-680q-17 0-28.5 11.5T280-640q0 17 11.5 28.5T320-600Zm120 320h240v-80H440v80Zm0-160h240v-80H440v80Zm0-160h240v-80H440v80ZM200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Zm0-560v560-560Z\"/></svg>',\n      contrast: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#1f1f1f\"><path d=\"m480-260 60-60h100v-100l60-60-60-60v-100H540l-60-60-60 60H320v100l-60 60 60 60v100h100l60 60Zm0-100v-240q50 0 85 35t35 85q0 50-35 85t-85 35ZM160-160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h640q33 0 56.5 23.5T880-720v480q0 33-23.5 56.5T800-160H160Zm0-80h640v-480H160v480Zm0 0v-480 480Z\"/></svg>',\n      darkContrast: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#1f1f1f\"><path d=\"M484-80q-84 0-157.5-32t-128-86.5Q144-253 112-326.5T80-484q0-146 93-257.5T410-880q-18 99 11 193.5T521-521q71 71 165.5 100T880-410q-26 144-138 237T484-80Zm0-80q88 0 163-44t118-121q-86-8-163-43.5T464-465q-61-61-97-138t-43-163q-77 43-120.5 118.5T160-484q0 135 94.5 229.5T484-160Zm-20-305Z\"/></svg>',\n      lightContrast: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#1f1f1f\"><path d=\"M440-800v-120h80v120h-80Zm0 760v-120h80v120h-80Zm360-400v-80h120v80H800Zm-760 0v-80h120v80H40Zm708-252-56-56 70-72 58 58-72 70ZM198-140l-58-58 72-70 56 56-70 72Zm564 0-70-72 56-56 72 70-58 58ZM212-692l-72-70 58-58 70 72-56 56Zm268 452q-100 0-170-70t-70-170q0-100 70-170t170-70q100 0 170 70t70 170q0 100-70 170t-170 70Zm0-80q67 0 113.5-46.5T640-480q0-67-46.5-113.5T480-640q-67 0-113.5 46.5T320-480q0 67 46.5 113.5T480-320Zm0-160Z\"/></svg>',\n      invertColors: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#1f1f1f\"><path d=\"M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-64-24.5-122.5T706-706L254-254q45 45 103.5 69.5T480-160Zm0-160v-60h200v60H480ZM320-500h60v-80h80v-60h-80v-80h-60v80h-80v60h80v80Z\"/></svg>',\n      saturation: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#1f1f1f\"><path d=\"M480-120q-133 0-226.5-92.5T160-436q0-66 25-122t69-100l226-222 226 222q44 44 69 100t25 122q0 131-93.5 223.5T480-120Zm0-80v-568L310-600q-35 33-52.5 74.5T240-436q0 97 70 166.5T480-200Z\"/></svg>',\n      lowSaturation: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#1f1f1f\"><path d=\"M480-120q-133 0-226.5-92T160-436q0-65 25-121.5T254-658l226-222 226 222q44 44 69 100.5T800-436q0 132-93.5 224T480-120ZM242-400h474q12-72-13.5-123T650-600L480-768 310-600q-27 26-53 77t-15 123Z\"/></svg>',\n      highSaturation: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#1f1f1f\"><path d=\"M480-80q-82 0-155-31.5t-127.5-86Q143-252 111.5-325T80-480q0-83 32.5-156t88-127Q256-817 330-848.5T488-880q80 0 151 27.5t124.5 76q53.5 48.5 85 115T880-518q0 115-70 176.5T640-280h-74q-9 0-12.5 5t-3.5 11q0 12 15 34.5t15 51.5q0 50-27.5 74T480-80Zm0-400Zm-220 40q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17Zm120-160q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17Zm200 0q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17Zm120 160q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17ZM480-160q9 0 14.5-5t5.5-13q0-14-15-33t-15-57q0-42 29-67t71-25h70q66 0 113-38.5T800-518q0-121-92.5-201.5T488-800q-136 0-232 93t-96 227q0 133 93.5 226.5T480-160Z\"/></svg>',\n      reset: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#1f1f1f\"><path d=\"M440-122q-121-15-200.5-105.5T160-440q0-66 26-126.5T260-672l57 57q-38 34-57.5 79T240-440q0 88 56 155.5T440-202v80Zm80 0v-80q87-16 143.5-83T720-440q0-100-70-170t-170-70h-3l44 44-56 56-140-140 140-140 56 56-44 44h3q134 0 227 93t93 227q0 121-79.5 211.5T520-122Z\"/></svg>',\n      close: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z\"/></svg>',\n      increase: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2Z\"/></svg>',\n      decrease: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M19 13H5v-2h14v2Z\"/></svg>',\n      arrowBack: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"currentColor\"><path d=\"M400-80 0-480l400-400 71 71-329 329 329 329-71 71Z\"/></svg>',\n      adjustFontSize: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M2 4v3h5v12h3V7h5V4H2m19 5h-9v3h3v7h3v-7h3V9Z\"/></svg>',\n      language: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"currentColor\"><path d=\"M480-80q-82 0-155-31.5t-127.5-86Q143-252 111.5-325T80-480q0-83 31.5-155.5t86-127Q252-817 325-848.5T480-880q83 0 155.5 31.5t127 86q54.5 54.5 86 127T880-480q0 82-31.5 155t-86 127.5q-54.5 54.5-127 86T480-80Zm0-82q26-36 45-75t31-83H404q12 44 31 83t45 75Zm-104-16q-18-33-31.5-68.5T322-320H204q29 50 72.5 87t99.5 55Zm208 0q56-18 99.5-55t72.5-87H638q-9 38-22.5 73.5T584-178ZM170-400h136q-3-20-4.5-39.5T300-480q0-21 1.5-40.5T306-560H170q-5 20-7.5 39.5T160-480q0 21 2.5 40.5T170-400Zm216 0h188q3-20 4.5-39.5T580-480q0-21-1.5-40.5T574-560H386q-3 20-4.5 39.5T380-480q0 21 1.5 40.5T386-400Zm268 0h136q5-20 7.5-39.5T800-480q0-21-2.5-40.5T790-560H654q3 20 4.5 39.5T660-480q0 21-1.5 40.5T654-400Zm-16-240h118q-29-50-72.5-87T584-782q18 33 31.5 68.5T638-640Zm-234 0h152q-12-44-31-83t-45-75q-26 36-45 75t-31 83Zm-200 0h118q9-38 22.5-73.5T376-782q-56 18-99.5 55T204-640Z\"/></svg>',\n      hideImages: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#1f1f1f\"><path d=\"m840-234-80-80v-446H314l-80-80h526q33 0 56.5 23.5T840-760v526ZM792-56l-64-64H200q-33 0-56.5-23.5T120-200v-528l-64-64 56-56 736 736-56 56ZM240-280l120-160 90 120 33-44-283-283v447h447l-80-80H240Zm297-257ZM424-424Z\"/></svg>',\n      accessibilityReport: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#1f1f1f\"><path d=\"M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h168q13-36 43.5-58t68.5-22q38 0 68.5 22t43.5 58h168q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Zm80-80h280v-80H280v80Zm0-160h400v-80H280v80Zm0-160h400v-80H280v80Zm221.5-198.5Q510-807 510-820t-8.5-21.5Q493-850 480-850t-21.5 8.5Q450-833 450-820t8.5 21.5Q467-790 480-790t21.5-8.5ZM200-200v-560 560Z\"/></svg>',\n      annotations: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#1f1f1f\"><path d=\"M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v268q-19-9-39-15.5t-41-9.5v-243H200v560h242q3 22 9.5 42t15.5 38H200Zm0-120v40-560 243-3 280Zm80-40h163q3-21 9.5-41t14.5-39H280v80Zm0-160h244q32-30 71.5-50t84.5-27v-3H280v80Zm0-160h400v-80H280v80ZM720-40q-83 0-141.5-58.5T520-240q0-83 58.5-141.5T720-440q83 0 141.5 58.5T920-240q0 83-58.5 141.5T720-40Zm-20-80h40v-100h100v-40H740v-100h-40v100H600v40h100v100Z\"/></svg>',\n      textToSpeech: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#1f1f1f\"><path d=\"M560-131v-82q90-26 145-100t55-168q0-94-55-168T560-749v-82q124 28 202 125.5T840-481q0 127-78 224.5T560-131ZM120-360v-240h160l200-200v640L280-360H120Zm440 40v-322q47 22 73.5 66t26.5 96q0 51-26.5 94.5T560-320ZM400-606l-86 86H200v80h114l86 86v-252ZM300-480Z\"/></svg>',\n      highContrast: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#1f1f1f\"><path d=\"M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93v640Z\"/></svg>',\n      simplifyLayout: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#1f1f1f\"><path d=\"M760-360v-80H200v80h560Zm0-160v-80H200v80h560Zm0-160v-80H200v80h560ZM200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm560-80v-80H200v80h560Z\"/></svg>'\n    };\n","export const TARGET_SELECTORS = {\n      ALL: ['', '*:not(.material-icons,.acc-menu,.acc-menu *)'],\n      LINKS: [\"a[href]\"],\n      HEADERS: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6', '.wsite-headline', '.wsite-content-title'],\n      TEXT: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6', '.wsite-headline', '.wsite-content-title', 'img', 'p', 'i', 'svg', 'a', 'button:not(.acc-btn)', 'label', 'li', 'ol']\n    };\n\nexport const PAGE_CONTENT_SELECTOR = 'body > *:not(.acc-container):not(.acc-rg-container):not(#acc-skip-link)';\n","export const TRANSLATIONS = {\n      en: {\n        \"Accessibility Menu\": \"Accessibility Menu\",\n        \"Reset settings\": \"Reset settings\",\n        \"Reset All Settings\": \"Reset All Settings\",\n        \"Close\": \"Close\",\n        \"Content Adjustments\": \"Content Adjustments\",\n        \"Adjust Font Size\": \"Adjust Font Size\",\n        \"Highlight Title\": \"Highlight Title\",\n        \"Highlight Links\": \"Highlight Links\",\n        \"Readable Font\": \"Readable Font\",\n        \"Color Adjustments\": \"Color Adjustments\",\n        \"Invert Colors\": \"Invert Colors\",\n        \"Light Contrast\": \"Light Contrast\",\n        \"Dark Contrast\": \"Dark Contrast\",\n        \"High Contrast\": \"High Contrast\",\n        \"High Saturation\": \"High Saturation\",\n        \"Low Saturation\": \"Low Saturation\",\n        \"Monochrome\": \"Monochrome\",\n        \"Tools\": \"Tools\",\n        \"Reading Guide\": \"Reading Guide\",\n        \"Stop Animations\": \"Stop Animations\",\n        \"Big Cursor\": \"Big Cursor\",\n        \"Increase Font Size\": \"Increase Font Size\",\n        \"Decrease Font Size\": \"Decrease Font Size\",\n        \"Letter Spacing\": \"Letter Spacing\",\n        \"Line Height\": \"Line Height\",\n        \"Font Weight\": \"Font Weight\",\n        \"Dyslexia Font\": \"Dyslexia Font\",\n        \"Language\": \"Language\",\n        \"Open Accessibility Menu\": \"Open Accessibility Menu\",\n        \"Hide Images\": \"Hide Images\",\n        \"Skip to accessibility menu\": \"Skip to accessibility menu\",\n        \"Accessibility Report\": \"Accessibility Report\",\n        \"Run Accessibility Check\": \"Run Accessibility Check\",\n        \"Loading...\": \"Loading...\",\n        \"Analyzing page...\": \"Analyzing page...\",\n        \"Critical\": \"Critical\",\n        \"Serious\": \"Serious\",\n        \"Moderate\": \"Moderate\",\n        \"Minor\": \"Minor\",\n        \"Violations Found\": \"Violations Found\",\n        \"No Issues Found\": \"No Issues Found\",\n        \"Element\": \"Element\",\n        \"Issue\": \"Issue\",\n        \"How to Fix\": \"How to Fix\",\n        \"Close Report\": \"Close Report\",\n        \"Passed Tests\": \"Passed Tests\",\n        \"Items Need Review\": \"Items Need Review\",\n        \"Annotations\": \"Annotations\",\n        \"Text to Speech\": \"Text to Speech\",\n        \"Text to Speech On\": \"Text to Speech On\",\n        \"Text to Speech Off\": \"Text to Speech Off\",\n        \"Simplify Layout\": \"Simplify Layout\",\n        \"Play\": \"Play\",\n        \"Pause\": \"Pause\",\n        \"Stop\": \"Stop\",\n        \"Loading voice...\": \"Loading voice...\",\n        \"Reading...\": \"Reading...\",\n      },\n      it: {\n        \"Accessibility Menu\": \"Menu Accessibilità\",\n        \"Reset settings\": \"Ripristina impostazioni\",\n        \"Reset All Settings\": \"Ripristina tutte le impostazioni\",\n        \"Close\": \"Chiudi\",\n        \"Content Adjustments\": \"Regolazioni Contenuto\",\n        \"Adjust Font Size\": \"Regola Dimensione Font\",\n        \"Highlight Title\": \"Evidenzia Titoli\",\n        \"Highlight Links\": \"Evidenzia Link\",\n        \"Readable Font\": \"Font Leggibile\",\n        \"Color Adjustments\": \"Regolazioni Colore\",\n        \"Invert Colors\": \"Inverti Colori\",\n        \"Light Contrast\": \"Contrasto Chiaro\",\n        \"Dark Contrast\": \"Contrasto Scuro\",\n        \"High Contrast\": \"Alto Contrasto\",\n        \"High Saturation\": \"Alta Saturazione\",\n        \"Low Saturation\": \"Bassa Saturazione\",\n        \"Monochrome\": \"Monocromatico\",\n        \"Tools\": \"Strumenti\",\n        \"Reading Guide\": \"Guida di Lettura\",\n        \"Stop Animations\": \"Ferma Animazioni\",\n        \"Big Cursor\": \"Cursore Grande\",\n        \"Increase Font Size\": \"Aumenta Dimensione Font\",\n        \"Decrease Font Size\": \"Diminuisci Dimensione Font\",\n        \"Letter Spacing\": \"Spaziatura Lettere\",\n        \"Line Height\": \"Altezza Riga\",\n        \"Font Weight\": \"Grassetto\",\n        \"Dyslexia Font\": \"Font Dislessia\",\n        \"Language\": \"Lingua\",\n        \"Open Accessibility Menu\": \"Apri Menu Accessibilità\",\n        \"Hide Images\": \"Nascondi Immagini\",\n        \"Skip to accessibility menu\": \"Vai al menu accessibilità\",\n        \"Accessibility Report\": \"Report Accessibilità\",\n        \"Run Accessibility Check\": \"Esegui Controllo Accessibilità\",\n        \"Loading...\": \"Caricamento...\",\n        \"Analyzing page...\": \"Analisi pagina...\",\n        \"Critical\": \"Critico\",\n        \"Serious\": \"Grave\",\n        \"Moderate\": \"Moderato\",\n        \"Minor\": \"Minore\",\n        \"Violations Found\": \"Violazioni Trovate\",\n        \"No Issues Found\": \"Nessun Problema Trovato\",\n        \"Element\": \"Elemento\",\n        \"Issue\": \"Problema\",\n        \"How to Fix\": \"Come Risolvere\",\n        \"Close Report\": \"Chiudi Report\",\n        \"Passed Tests\": \"Test Superati\",\n        \"Items Need Review\": \"Elementi da Rivedere\",\n        \"Annotations\": \"Annotations\",\n        \"Text to Speech\": \"Text to Speech\",\n        \"Text to Speech On\": \"Sintesi Vocale Attiva\",\n        \"Text to Speech Off\": \"Sintesi Vocale Disattiva\",\n        \"Simplify Layout\": \"Simplify Layout\",\n        \"Play\": \"Play\",\n        \"Pause\": \"Pause\",\n        \"Stop\": \"Stop\",\n        \"Reading...\": \"Reading...\",\n      },\n      fr: {\n        \"Accessibility Menu\": \"Menu Accessibilité\",\n        \"Reset settings\": \"Réinitialiser les paramètres\",\n        \"Reset All Settings\": \"Réinitialiser tous les paramètres\",\n        \"Close\": \"Fermer\",\n        \"Content Adjustments\": \"Ajustements du Contenu\",\n        \"Adjust Font Size\": \"Ajuster la Taille de Police\",\n        \"Highlight Title\": \"Surligner les Titres\",\n        \"Highlight Links\": \"Surligner les Liens\",\n        \"Readable Font\": \"Police Lisible\",\n        \"Color Adjustments\": \"Ajustements des Couleurs\",\n        \"Invert Colors\": \"Inverser les Couleurs\",\n        \"Light Contrast\": \"Contraste Clair\",\n        \"Dark Contrast\": \"Contraste Sombre\",\n        \"High Contrast\": \"Contraste Élevé\",\n        \"High Saturation\": \"Saturation Élevée\",\n        \"Low Saturation\": \"Saturation Faible\",\n        \"Monochrome\": \"Monochrome\",\n        \"Tools\": \"Outils\",\n        \"Reading Guide\": \"Guide de Lecture\",\n        \"Stop Animations\": \"Arrêter les Animations\",\n        \"Big Cursor\": \"Grand Curseur\",\n        \"Increase Font Size\": \"Augmenter la Taille de Police\",\n        \"Decrease Font Size\": \"Diminuer la Taille de Police\",\n        \"Letter Spacing\": \"Espacement des Lettres\",\n        \"Line Height\": \"Hauteur de Ligne\",\n        \"Font Weight\": \"Graisse de Police\",\n        \"Dyslexia Font\": \"Police Dyslexie\",\n        \"Language\": \"Langue\",\n        \"Open Accessibility Menu\": \"Ouvrir le Menu Accessibilité\",\n        \"Hide Images\": \"Masquer les Images\",\n        \"Skip to accessibility menu\": \"Aller au menu accessibilité\",\n        \"Accessibility Report\": \"Rapport d'Accessibilité\",\n        \"Run Accessibility Check\": \"Lancer le Contrôle d'Accessibilité\",\n        \"Loading...\": \"Chargement...\",\n        \"Analyzing page...\": \"Analyse de la page...\",\n        \"Critical\": \"Critique\",\n        \"Serious\": \"Grave\",\n        \"Moderate\": \"Modéré\",\n        \"Minor\": \"Mineur\",\n        \"Violations Found\": \"Violations Trouvées\",\n        \"No Issues Found\": \"Aucun Problème Trouvé\",\n        \"Element\": \"Élément\",\n        \"Issue\": \"Problème\",\n        \"How to Fix\": \"Comment Corriger\",\n        \"Close Report\": \"Fermer le Rapport\",\n        \"Passed Tests\": \"Tests Réussis\",\n        \"Items Need Review\": \"Éléments à Vérifier\",\n        \"Annotations\": \"Annotations\",\n        \"Text to Speech\": \"Text to Speech\",\n        \"Text to Speech On\": \"Synthèse Vocale Activée\",\n        \"Text to Speech Off\": \"Synthèse Vocale Désactivée\",\n        \"Simplify Layout\": \"Simplify Layout\",\n        \"Play\": \"Play\",\n        \"Pause\": \"Pause\",\n        \"Stop\": \"Stop\",\n        \"Reading...\": \"Reading...\",\n      },\n      de: {\n        \"Accessibility Menu\": \"Barrierefreiheit-Menü\",\n        \"Reset settings\": \"Einstellungen zurücksetzen\",\n        \"Reset All Settings\": \"Alle Einstellungen zurücksetzen\",\n        \"Close\": \"Schließen\",\n        \"Content Adjustments\": \"Inhaltsanpassungen\",\n        \"Adjust Font Size\": \"Schriftgröße anpassen\",\n        \"Highlight Title\": \"Titel hervorheben\",\n        \"Highlight Links\": \"Links hervorheben\",\n        \"Readable Font\": \"Lesbare Schrift\",\n        \"Color Adjustments\": \"Farbanpassungen\",\n        \"Invert Colors\": \"Farben invertieren\",\n        \"Light Contrast\": \"Heller Kontrast\",\n        \"Dark Contrast\": \"Dunkler Kontrast\",\n        \"High Contrast\": \"Hoher Kontrast\",\n        \"High Saturation\": \"Hohe Sättigung\",\n        \"Low Saturation\": \"Niedrige Sättigung\",\n        \"Monochrome\": \"Monochrom\",\n        \"Tools\": \"Werkzeuge\",\n        \"Reading Guide\": \"Lesehilfe\",\n        \"Stop Animations\": \"Animationen stoppen\",\n        \"Big Cursor\": \"Großer Cursor\",\n        \"Increase Font Size\": \"Schriftgröße erhöhen\",\n        \"Decrease Font Size\": \"Schriftgröße verringern\",\n        \"Letter Spacing\": \"Zeichenabstand\",\n        \"Line Height\": \"Zeilenhöhe\",\n        \"Font Weight\": \"Schriftstärke\",\n        \"Dyslexia Font\": \"Legasthenie-Schrift\",\n        \"Language\": \"Sprache\",\n        \"Open Accessibility Menu\": \"Barrierefreiheit-Menü öffnen\",\n        \"Hide Images\": \"Bilder ausblenden\",\n        \"Skip to accessibility menu\": \"Zum Barrierefreiheit-Menü springen\",\n        \"Accessibility Report\": \"Barrierefreiheit-Bericht\",\n        \"Run Accessibility Check\": \"Barrierefreiheitsprüfung starten\",\n        \"Loading...\": \"Laden...\",\n        \"Analyzing page...\": \"Seite wird analysiert...\",\n        \"Critical\": \"Kritisch\",\n        \"Serious\": \"Schwerwiegend\",\n        \"Moderate\": \"Mäßig\",\n        \"Minor\": \"Gering\",\n        \"Violations Found\": \"Verstöße gefunden\",\n        \"No Issues Found\": \"Keine Probleme gefunden\",\n        \"Element\": \"Element\",\n        \"Issue\": \"Problem\",\n        \"How to Fix\": \"Lösung\",\n        \"Close Report\": \"Bericht schließen\",\n        \"Passed Tests\": \"Bestandene Tests\",\n        \"Items Need Review\": \"Elemente zur Überprüfung\",\n        \"Annotations\": \"Annotations\",\n        \"Text to Speech\": \"Text to Speech\",\n        \"Text to Speech On\": \"Sprachausgabe Ein\",\n        \"Text to Speech Off\": \"Sprachausgabe Aus\",\n        \"Simplify Layout\": \"Simplify Layout\",\n        \"Play\": \"Play\",\n        \"Pause\": \"Pause\",\n        \"Stop\": \"Stop\",\n        \"Reading...\": \"Reading...\",\n      },\n      es: {\n        \"Accessibility Menu\": \"Menú de Accesibilidad\",\n        \"Reset settings\": \"Restablecer configuración\",\n        \"Reset All Settings\": \"Restablecer toda la configuración\",\n        \"Close\": \"Cerrar\",\n        \"Content Adjustments\": \"Ajustes de Contenido\",\n        \"Adjust Font Size\": \"Ajustar Tamaño de Fuente\",\n        \"Highlight Title\": \"Resaltar Títulos\",\n        \"Highlight Links\": \"Resaltar Enlaces\",\n        \"Readable Font\": \"Fuente Legible\",\n        \"Color Adjustments\": \"Ajustes de Color\",\n        \"Invert Colors\": \"Invertir Colores\",\n        \"Light Contrast\": \"Contraste Claro\",\n        \"Dark Contrast\": \"Contraste Oscuro\",\n        \"High Contrast\": \"Alto Contraste\",\n        \"High Saturation\": \"Alta Saturación\",\n        \"Low Saturation\": \"Baja Saturación\",\n        \"Monochrome\": \"Monocromo\",\n        \"Tools\": \"Herramientas\",\n        \"Reading Guide\": \"Guía de Lectura\",\n        \"Stop Animations\": \"Detener Animaciones\",\n        \"Big Cursor\": \"Cursor Grande\",\n        \"Increase Font Size\": \"Aumentar Tamaño de Fuente\",\n        \"Decrease Font Size\": \"Disminuir Tamaño de Fuente\",\n        \"Letter Spacing\": \"Espaciado de Letras\",\n        \"Line Height\": \"Altura de Línea\",\n        \"Font Weight\": \"Grosor de Fuente\",\n        \"Dyslexia Font\": \"Fuente para Dislexia\",\n        \"Language\": \"Idioma\",\n        \"Open Accessibility Menu\": \"Abrir Menú de Accesibilidad\",\n        \"Hide Images\": \"Ocultar Imágenes\",\n        \"Skip to accessibility menu\": \"Ir al menú de accesibilidad\",\n        \"Accessibility Report\": \"Informe de Accesibilidad\",\n        \"Run Accessibility Check\": \"Ejecutar Comprobación de Accesibilidad\",\n        \"Loading...\": \"Cargando...\",\n        \"Analyzing page...\": \"Analizando página...\",\n        \"Critical\": \"Crítico\",\n        \"Serious\": \"Grave\",\n        \"Moderate\": \"Moderado\",\n        \"Minor\": \"Menor\",\n        \"Violations Found\": \"Violaciones Encontradas\",\n        \"No Issues Found\": \"Sin Problemas Encontrados\",\n        \"Element\": \"Elemento\",\n        \"Issue\": \"Problema\",\n        \"How to Fix\": \"Cómo Solucionarlo\",\n        \"Close Report\": \"Cerrar Informe\",\n        \"Passed Tests\": \"Pruebas Superadas\",\n        \"Items Need Review\": \"Elementos a Revisar\",\n        \"Annotations\": \"Annotations\",\n        \"Text to Speech\": \"Text to Speech\",\n        \"Text to Speech On\": \"Texto a Voz Activado\",\n        \"Text to Speech Off\": \"Texto a Voz Desactivado\",\n        \"Simplify Layout\": \"Simplify Layout\",\n        \"Play\": \"Play\",\n        \"Pause\": \"Pause\",\n        \"Stop\": \"Stop\",\n        \"Reading...\": \"Reading...\",\n      },\n      ru: {\n        \"Accessibility Menu\": \"Меню доступности\",\n        \"Reset settings\": \"Сбросить настройки\",\n        \"Reset All Settings\": \"Сбросить все настройки\",\n        \"Close\": \"Закрыть\",\n        \"Content Adjustments\": \"Настройки контента\",\n        \"Adjust Font Size\": \"Изменить размер шрифта\",\n        \"Highlight Title\": \"Выделить заголовки\",\n        \"Highlight Links\": \"Выделить ссылки\",\n        \"Readable Font\": \"Читаемый шрифт\",\n        \"Color Adjustments\": \"Настройки цвета\",\n        \"Invert Colors\": \"Инвертировать цвета\",\n        \"Light Contrast\": \"Светлый контраст\",\n        \"Dark Contrast\": \"Тёмный контраст\",\n        \"High Contrast\": \"Высокий контраст\",\n        \"High Saturation\": \"Высокая насыщенность\",\n        \"Low Saturation\": \"Низкая насыщенность\",\n        \"Monochrome\": \"Монохромный\",\n        \"Tools\": \"Инструменты\",\n        \"Reading Guide\": \"Линейка для чтения\",\n        \"Stop Animations\": \"Остановить анимации\",\n        \"Big Cursor\": \"Большой курсор\",\n        \"Increase Font Size\": \"Увеличить размер шрифта\",\n        \"Decrease Font Size\": \"Уменьшить размер шрифта\",\n        \"Letter Spacing\": \"Межбуквенный интервал\",\n        \"Line Height\": \"Высота строки\",\n        \"Font Weight\": \"Жирный шрифт\",\n        \"Dyslexia Font\": \"Шрифт для дислексии\",\n        \"Language\": \"Язык\",\n        \"Open Accessibility Menu\": \"Открыть меню доступности\",\n        \"Hide Images\": \"Скрыть изображения\",\n        \"Skip to accessibility menu\": \"Перейти к меню доступности\",\n        \"Accessibility Report\": \"Отчёт о доступности\",\n        \"Run Accessibility Check\": \"Запустить проверку доступности\",\n        \"Loading...\": \"Загрузка...\",\n        \"Analyzing page...\": \"Анализ страницы...\",\n        \"Critical\": \"Критический\",\n        \"Serious\": \"Серьёзный\",\n        \"Moderate\": \"Умеренный\",\n        \"Minor\": \"Незначительный\",\n        \"Violations Found\": \"Найдены нарушения\",\n        \"No Issues Found\": \"Проблем не найдено\",\n        \"Element\": \"Элемент\",\n        \"Issue\": \"Проблема\",\n        \"How to Fix\": \"Как исправить\",\n        \"Close Report\": \"Закрыть отчёт\",\n        \"Passed Tests\": \"Пройденные тесты\",\n        \"Items Need Review\": \"Требуют проверки\",\n        \"Annotations\": \"Annotations\",\n        \"Text to Speech\": \"Text to Speech\",\n        \"Text to Speech On\": \"Озвучивание Включено\",\n        \"Text to Speech Off\": \"Озвучивание Выключено\",\n        \"Simplify Layout\": \"Simplify Layout\",\n        \"Play\": \"Play\",\n        \"Pause\": \"Pause\",\n        \"Stop\": \"Stop\",\n        \"Reading...\": \"Reading...\",\n      },\n      pl: {\n        \"Accessibility Menu\": \"Menu Dostępności\",\n        \"Reset settings\": \"Zresetuj ustawienia\",\n        \"Reset All Settings\": \"Zresetuj wszystkie ustawienia\",\n        \"Close\": \"Zamknij\",\n        \"Content Adjustments\": \"Dostosowanie Treści\",\n        \"Adjust Font Size\": \"Dostosuj Rozmiar Czcionki\",\n        \"Highlight Title\": \"Podświetl Tytuły\",\n        \"Highlight Links\": \"Podświetl Linki\",\n        \"Readable Font\": \"Czytelna Czcionka\",\n        \"Color Adjustments\": \"Dostosowanie Kolorów\",\n        \"Invert Colors\": \"Odwróć Kolory\",\n        \"Light Contrast\": \"Jasny Kontrast\",\n        \"Dark Contrast\": \"Ciemny Kontrast\",\n        \"High Contrast\": \"Wysoki Kontrast\",\n        \"High Saturation\": \"Wysoka Saturacja\",\n        \"Low Saturation\": \"Niska Saturacja\",\n        \"Monochrome\": \"Monochromatyczny\",\n        \"Tools\": \"Narzędzia\",\n        \"Reading Guide\": \"Linia do Czytania\",\n        \"Stop Animations\": \"Zatrzymaj Animacje\",\n        \"Big Cursor\": \"Duży Kursor\",\n        \"Increase Font Size\": \"Zwiększ Rozmiar Czcionki\",\n        \"Decrease Font Size\": \"Zmniejsz Rozmiar Czcionki\",\n        \"Letter Spacing\": \"Odstępy Między Literami\",\n        \"Line Height\": \"Wysokość Linii\",\n        \"Font Weight\": \"Grubość Czcionki\",\n        \"Dyslexia Font\": \"Czcionka dla Dysleksji\",\n        \"Language\": \"Język\",\n        \"Open Accessibility Menu\": \"Otwórz Menu Dostępności\",\n        \"Hide Images\": \"Ukryj Obrazy\",\n        \"Skip to accessibility menu\": \"Przejdź do menu dostępności\",\n        \"Accessibility Report\": \"Raport Dostępności\",\n        \"Run Accessibility Check\": \"Uruchom Sprawdzanie Dostępności\",\n        \"Loading...\": \"Ładowanie...\",\n        \"Analyzing page...\": \"Analizowanie strony...\",\n        \"Critical\": \"Krytyczny\",\n        \"Serious\": \"Poważny\",\n        \"Moderate\": \"Umiarkowany\",\n        \"Minor\": \"Drobny\",\n        \"Violations Found\": \"Znalezione Naruszenia\",\n        \"No Issues Found\": \"Brak Problemów\",\n        \"Element\": \"Element\",\n        \"Issue\": \"Problem\",\n        \"How to Fix\": \"Jak Naprawić\",\n        \"Close Report\": \"Zamknij Raport\",\n        \"Passed Tests\": \"Zaliczone Testy\",\n        \"Items Need Review\": \"Elementy do Sprawdzenia\",\n        \"Annotations\": \"Annotations\",\n        \"Text to Speech\": \"Text to Speech\",\n        \"Text to Speech On\": \"Czytanie Tekstu Włączone\",\n        \"Text to Speech Off\": \"Czytanie Tekstu Wyłączone\",\n        \"Simplify Layout\": \"Simplify Layout\",\n        \"Play\": \"Play\",\n        \"Pause\": \"Pause\",\n        \"Stop\": \"Stop\",\n        \"Reading...\": \"Reading...\",\n      },\n      ro: {\n        \"Accessibility Menu\": \"Meniu Accesibilitate\",\n        \"Reset settings\": \"Resetare setări\",\n        \"Reset All Settings\": \"Resetare toate setările\",\n        \"Close\": \"Închide\",\n        \"Content Adjustments\": \"Ajustări Conținut\",\n        \"Adjust Font Size\": \"Ajustare Dimensiune Font\",\n        \"Highlight Title\": \"Evidențiere Titluri\",\n        \"Highlight Links\": \"Evidențiere Linkuri\",\n        \"Readable Font\": \"Font Lizibil\",\n        \"Color Adjustments\": \"Ajustări Culoare\",\n        \"Invert Colors\": \"Inversare Culori\",\n        \"Light Contrast\": \"Contrast Luminos\",\n        \"Dark Contrast\": \"Contrast Întunecat\",\n        \"High Contrast\": \"Contrast Ridicat\",\n        \"High Saturation\": \"Saturație Ridicată\",\n        \"Low Saturation\": \"Saturație Scăzută\",\n        \"Monochrome\": \"Monocrom\",\n        \"Tools\": \"Instrumente\",\n        \"Reading Guide\": \"Ghid de Citire\",\n        \"Stop Animations\": \"Oprire Animații\",\n        \"Big Cursor\": \"Cursor Mare\",\n        \"Increase Font Size\": \"Mărire Dimensiune Font\",\n        \"Decrease Font Size\": \"Micșorare Dimensiune Font\",\n        \"Letter Spacing\": \"Spațiere Litere\",\n        \"Line Height\": \"Înălțime Linie\",\n        \"Font Weight\": \"Grosime Font\",\n        \"Dyslexia Font\": \"Font pentru Dislexie\",\n        \"Language\": \"Limbă\",\n        \"Open Accessibility Menu\": \"Deschide Meniul Accesibilitate\",\n        \"Hide Images\": \"Ascunde Imagini\",\n        \"Skip to accessibility menu\": \"Salt la meniul de accesibilitate\",\n        \"Accessibility Report\": \"Raport Accesibilitate\",\n        \"Run Accessibility Check\": \"Rulează Verificare Accesibilitate\",\n        \"Loading...\": \"Se încarcă...\",\n        \"Analyzing page...\": \"Se analizează pagina...\",\n        \"Critical\": \"Critic\",\n        \"Serious\": \"Grav\",\n        \"Moderate\": \"Moderat\",\n        \"Minor\": \"Minor\",\n        \"Violations Found\": \"Încălcări Găsite\",\n        \"No Issues Found\": \"Nicio Problemă Găsită\",\n        \"Element\": \"Element\",\n        \"Issue\": \"Problemă\",\n        \"How to Fix\": \"Cum se Remediază\",\n        \"Close Report\": \"Închide Raportul\",\n        \"Passed Tests\": \"Teste Trecute\",\n        \"Items Need Review\": \"Elemente de Verificat\",\n        \"Annotations\": \"Annotations\",\n        \"Text to Speech\": \"Text to Speech\",\n        \"Text to Speech On\": \"Text to Speech Pornit\",\n        \"Text to Speech Off\": \"Text to Speech Oprit\",\n        \"Simplify Layout\": \"Simplify Layout\",\n        \"Play\": \"Play\",\n        \"Pause\": \"Pause\",\n        \"Stop\": \"Stop\",\n        \"Reading...\": \"Reading...\",\n      },\n      nl: {\n        \"Accessibility Menu\": \"Toegankelijkheidsmenu\",\n        \"Reset settings\": \"Instellingen resetten\",\n        \"Reset All Settings\": \"Alle instellingen resetten\",\n        \"Close\": \"Sluiten\",\n        \"Content Adjustments\": \"Inhoudsaanpassingen\",\n        \"Adjust Font Size\": \"Lettergrootte aanpassen\",\n        \"Highlight Title\": \"Titels markeren\",\n        \"Highlight Links\": \"Links markeren\",\n        \"Readable Font\": \"Leesbaar Lettertype\",\n        \"Color Adjustments\": \"Kleuraanpassingen\",\n        \"Invert Colors\": \"Kleuren omkeren\",\n        \"Light Contrast\": \"Licht Contrast\",\n        \"Dark Contrast\": \"Donker Contrast\",\n        \"High Contrast\": \"Hoog Contrast\",\n        \"High Saturation\": \"Hoge Verzadiging\",\n        \"Low Saturation\": \"Lage Verzadiging\",\n        \"Monochrome\": \"Monochroom\",\n        \"Tools\": \"Hulpmiddelen\",\n        \"Reading Guide\": \"Leeshulp\",\n        \"Stop Animations\": \"Animaties stoppen\",\n        \"Big Cursor\": \"Grote Cursor\",\n        \"Increase Font Size\": \"Lettergrootte vergroten\",\n        \"Decrease Font Size\": \"Lettergrootte verkleinen\",\n        \"Letter Spacing\": \"Letterafstand\",\n        \"Line Height\": \"Regelhoogte\",\n        \"Font Weight\": \"Letterdikte\",\n        \"Dyslexia Font\": \"Dyslexie Lettertype\",\n        \"Language\": \"Taal\",\n        \"Open Accessibility Menu\": \"Toegankelijkheidsmenu openen\",\n        \"Hide Images\": \"Afbeeldingen verbergen\",\n        \"Skip to accessibility menu\": \"Ga naar toegankelijkheidsmenu\",\n        \"Accessibility Report\": \"Toegankelijkheidsrapport\",\n        \"Run Accessibility Check\": \"Toegankelijkheidscontrole uitvoeren\",\n        \"Loading...\": \"Laden...\",\n        \"Analyzing page...\": \"Pagina analyseren...\",\n        \"Critical\": \"Kritiek\",\n        \"Serious\": \"Ernstig\",\n        \"Moderate\": \"Matig\",\n        \"Minor\": \"Gering\",\n        \"Violations Found\": \"Overtredingen Gevonden\",\n        \"No Issues Found\": \"Geen Problemen Gevonden\",\n        \"Element\": \"Element\",\n        \"Issue\": \"Probleem\",\n        \"How to Fix\": \"Hoe op te lossen\",\n        \"Close Report\": \"Rapport Sluiten\",\n        \"Passed Tests\": \"Geslaagde Tests\",\n        \"Items Need Review\": \"Items te Controleren\",\n        \"Annotations\": \"Annotations\",\n        \"Text to Speech\": \"Text to Speech\",\n        \"Text to Speech On\": \"Tekst naar Spraak Aan\",\n        \"Text to Speech Off\": \"Tekst naar Spraak Uit\",\n        \"Simplify Layout\": \"Simplify Layout\",\n        \"Play\": \"Play\",\n        \"Pause\": \"Pause\",\n        \"Stop\": \"Stop\",\n        \"Reading...\": \"Reading...\",\n      },\n      uk: {\n        \"Accessibility Menu\": \"Меню доступності\",\n        \"Reset settings\": \"Скинути налаштування\",\n        \"Reset All Settings\": \"Скинути всі налаштування\",\n        \"Close\": \"Закрити\",\n        \"Content Adjustments\": \"Налаштування контенту\",\n        \"Adjust Font Size\": \"Змінити розмір шрифту\",\n        \"Highlight Title\": \"Виділити заголовки\",\n        \"Highlight Links\": \"Виділити посилання\",\n        \"Readable Font\": \"Читабельний шрифт\",\n        \"Color Adjustments\": \"Налаштування кольору\",\n        \"Invert Colors\": \"Інвертувати кольори\",\n        \"Light Contrast\": \"Світлий контраст\",\n        \"Dark Contrast\": \"Темний контраст\",\n        \"High Contrast\": \"Високий контраст\",\n        \"High Saturation\": \"Висока насиченість\",\n        \"Low Saturation\": \"Низька насиченість\",\n        \"Monochrome\": \"Монохромний\",\n        \"Tools\": \"Інструменти\",\n        \"Reading Guide\": \"Лінійка для читання\",\n        \"Stop Animations\": \"Зупинити анімації\",\n        \"Big Cursor\": \"Великий курсор\",\n        \"Increase Font Size\": \"Збільшити розмір шрифту\",\n        \"Decrease Font Size\": \"Зменшити розмір шрифту\",\n        \"Letter Spacing\": \"Міжлітерний інтервал\",\n        \"Line Height\": \"Висота рядка\",\n        \"Font Weight\": \"Жирний шрифт\",\n        \"Dyslexia Font\": \"Шрифт для дислексії\",\n        \"Language\": \"Мова\",\n        \"Open Accessibility Menu\": \"Відкрити меню доступності\",\n        \"Hide Images\": \"Приховати зображення\",\n        \"Skip to accessibility menu\": \"Перейти до меню доступності\",\n        \"Accessibility Report\": \"Звіт про доступність\",\n        \"Run Accessibility Check\": \"Запустити перевірку доступності\",\n        \"Loading...\": \"Завантаження...\",\n        \"Analyzing page...\": \"Аналіз сторінки...\",\n        \"Critical\": \"Критичний\",\n        \"Serious\": \"Серйозний\",\n        \"Moderate\": \"Помірний\",\n        \"Minor\": \"Незначний\",\n        \"Violations Found\": \"Знайдені порушення\",\n        \"No Issues Found\": \"Проблем не знайдено\",\n        \"Element\": \"Елемент\",\n        \"Issue\": \"Проблема\",\n        \"How to Fix\": \"Як виправити\",\n        \"Close Report\": \"Закрити звіт\",\n        \"Passed Tests\": \"Пройдені тести\",\n        \"Items Need Review\": \"Потребують перевірки\",\n        \"Annotations\": \"Annotations\",\n        \"Text to Speech\": \"Text to Speech\",\n        \"Text to Speech On\": \"Озвучування Увімкнено\",\n        \"Text to Speech Off\": \"Озвучування Вимкнено\",\n        \"Simplify Layout\": \"Simplify Layout\",\n        \"Play\": \"Play\",\n        \"Pause\": \"Pause\",\n        \"Stop\": \"Stop\",\n        \"Reading...\": \"Reading...\",\n      }\n    };\n\nexport const SUPPORTED_LANGUAGES = [\n      { code: \"en\", label: \"English (English)\" },\n      { code: \"it\", label: \"Italiano (Italian)\" },\n      { code: \"fr\", label: \"Français (French)\" },\n      { code: \"de\", label: \"Deutsch (German)\" },\n      { code: \"es\", label: \"Español (Spanish)\" },\n      { code: \"ru\", label: \"Русский (Russian)\" },\n      { code: \"pl\", label: \"Polski (Polish)\" },\n      { code: \"ro\", label: \"Română (Romanian)\" },\n      { code: \"nl\", label: \"Nederlands (Dutch)\" },\n      { code: \"uk\", label: \"Українська (Ukrainian)\" }\n    ];\n","/** @typedef {import('./index.js').default} AccessibleWebWidget */\n\n/** @type {{ [methodName: string]: (this: AccessibleWebWidget, ...args: any[]) => any }} */\nexport const stateMethods = {\n\n  storageAvailable() {\n      try {\n        const test = '__test__';\n        localStorage.setItem(test, test);\n        localStorage.removeItem(test);\n        return true;\n      } catch {\n        return false;\n      }\n    },\n\n  fetchCookie(name) {\n      const cookieName = name + \"=\";\n      try {\n        const decodedCookie = decodeURIComponent(document.cookie);\n        return decodedCookie.split(';')\n          .map(c => c.trim())\n          .find(c => c.startsWith(cookieName))\n          ?.substring(cookieName.length) || \"{}\";\n      } catch (e) {\n        console.warn('Error reading cookie:', e);\n        return \"{}\";\n      }\n    },\n\n  storeCookie(name, value, days) {\n      try {\n        const d = new Date();\n        d.setTime(d.getTime() + (days * 24 * 60 * 60 * 1000));\n        const expires = \"expires=\" + d.toUTCString();\n        const isSecure = window.location.protocol === 'https:';\n        document.cookie = name + \"=\" + value + \";\" + expires + \";path=/;SameSite=Strict\" + (isSecure ? \";Secure\" : \"\");\n      } catch (e) {\n        console.warn('Error setting cookie:', e);\n      }\n    },\n\n  getSavedLanguage() {\n      try {\n        // Try localStorage first\n        if (this.storageAvailable()) {\n          const stored = localStorage.getItem(this.cookieKey);\n          if (stored) {\n            const config = JSON.parse(stored);\n            if (config.lang) return config.lang;\n          }\n        }\n        // Fallback to cookie\n        const cookieVal = this.fetchCookie(this.cookieKey);\n        if (cookieVal && cookieVal !== \"\") {\n          const config = JSON.parse(cookieVal);\n          if (config.lang) return config.lang;\n        }\n      } catch {\n        // Ignore parsing errors\n      }\n      return null;\n    },\n\n  getBrowserLanguage() {\n      if (typeof navigator === 'undefined') return 'en';\n  \n      const supportedCodes = this.supportedLanguages.map(lang => lang.code);\n  \n      // Get browser languages (navigator.languages is an array, navigator.language is a string)\n      const browserLanguages = navigator.languages\n        ? [...navigator.languages]\n        : [navigator.language || navigator.userLanguage || 'en'];\n  \n      for (const browserLang of browserLanguages) {\n        // Extract the primary language code (e.g., 'en-US' -> 'en')\n        const primaryCode = browserLang.split('-')[0].toLowerCase();\n  \n        if (supportedCodes.includes(primaryCode)) {\n          return primaryCode;\n        }\n      }\n  \n      // Default to English if no supported language found\n      return 'en';\n    },\n\n  getDefaultLanguage() {\n      // Priority: 1. Saved language, 2. Browser language, 3. English\n      const savedLang = this.getSavedLanguage();\n      if (savedLang) {\n        const supportedCodes = this.supportedLanguages.map(lang => lang.code);\n        if (supportedCodes.includes(savedLang)) {\n          return savedLang;\n        }\n      }\n      return this.getBrowserLanguage();\n    },\n\n  isDevMode() {\n      if (typeof window === 'undefined') return false;\n      try {\n        const urlParams = new URLSearchParams(window.location.search);\n        return urlParams.get('acc-dev') === 'true';\n      } catch {\n        return false;\n      }\n    },\n\n  getDataAttributeOptions() {\n      const options = {};\n      if (typeof document === 'undefined') return options;\n  \n      const attributes = ['lang', 'position', 'offset', 'size', 'icon'];\n  \n      const assignValue = (key, value) => {\n        if (value === null || typeof value === 'undefined' || value === '') return;\n        switch (key) {\n          case 'lang': {\n            const lang = String(value).trim();\n            if (lang) options.lang = lang;\n            break;\n          }\n          case 'position': {\n            const position = String(value).trim();\n            if (position) options.position = position;\n            break;\n          }\n          case 'offset': {\n            const normalized = this.normalizeOffset(value);\n            if (normalized) options.offset = normalized;\n            break;\n          }\n          case 'size': {\n            const normalizedSize = this.normalizeButtonSize(value);\n            if (normalizedSize) options.size = normalizedSize;\n            break;\n          }\n          case 'icon': {\n            const icon = String(value).trim();\n            if (icon) options.icon = icon;\n            break;\n          }\n          default:\n            break;\n        }\n      };\n  \n      const inspectElement = (el) => {\n        if (!el) return;\n        attributes.forEach(key => {\n          const attrName = `data-acc-${key}`;\n          const attrValue = el.getAttribute ? el.getAttribute(attrName) : null;\n          assignValue(key, attrValue);\n        });\n      };\n  \n      const scriptCandidates = [];\n      if (document.currentScript) {\n        scriptCandidates.push(document.currentScript);\n      }\n      document.querySelectorAll('script[data-acc-lang],script[data-acc-position],script[data-acc-offset],script[data-acc-size],script[data-acc-icon]').forEach(script => {\n        if (!scriptCandidates.includes(script)) {\n          scriptCandidates.push(script);\n        }\n      });\n      scriptCandidates.forEach(inspectElement);\n  \n      attributes.forEach(key => {\n        if (options[key] !== undefined) return;\n        const el = document.querySelector(`[data-acc-${key}]`);\n        if (el) {\n          assignValue(key, el.getAttribute(`data-acc-${key}`));\n        }\n      });\n  \n      return options;\n    },\n\n  normalizeOffset(value) {\n      if (!value && value !== 0) return undefined;\n      let parts = [];\n      if (Array.isArray(value)) {\n        parts = value;\n      } else if (typeof value === 'string') {\n        parts = value.split(/[, ]+/);\n      } else {\n        parts = [value];\n      }\n      const parsed = parts\n        .map(part => {\n          const number = Number(part);\n          return Number.isFinite(number) ? Math.round(number) : null;\n        })\n        .filter(number => number !== null);\n  \n      if (!parsed.length) return undefined;\n      if (parsed.length === 1) parsed.push(parsed[0]);\n      return [parsed[0], parsed[1] !== undefined ? parsed[1] : parsed[0]];\n    },\n\n  normalizeButtonSize(value) {\n      const fallback = this.widgetTheme?.buttonSize || '48px';\n      if (typeof value === 'number' && Number.isFinite(value)) {\n        return `${Math.max(24, Math.round(value))}px`;\n      }\n      if (typeof value === 'string') {\n        const trimmed = value.trim();\n        if (!trimmed) return fallback;\n        if (/^\\d+(\\.\\d+)?(px|em|rem|%)$/i.test(trimmed)) {\n          return trimmed;\n        }\n        const numeric = Number(trimmed);\n        if (Number.isFinite(numeric)) {\n          return `${Math.max(24, Math.round(numeric))}px`;\n        }\n        return trimmed;\n      }\n      return fallback;\n    },\n\n  toggleDisplay(el, state) {\n      if (!el) return;\n      try {\n        el.style.display = (typeof state === \"undefined\") \n          ? (el.style.display === \"none\" ? \"block\" : \"none\") \n          : (state ? \"block\" : \"none\");\n      } catch (e) {\n        console.warn('Error toggling element:', e);\n      }\n    },\n\n  isSystemControlledPreference(key) {\n      const systemDefaults = this.widgetConfig?.systemDefaults || {};\n      return Object.prototype.hasOwnProperty.call(systemDefaults, key);\n    },\n\n  hasExplicitStatePreference(key) {\n      const states = this.widgetConfig?.states || {};\n      if (!Object.prototype.hasOwnProperty.call(states, key)) {\n        return false;\n      }\n      return !this.isSystemControlledPreference(key);\n    },\n\n  hasExplicitColorFilterPreference() {\n      const states = this.widgetConfig?.states || {};\n      const systemDefaults = this.widgetConfig?.systemDefaults || {};\n      const keys = Array.isArray(this.colorFilterKeys) ? this.colorFilterKeys : [];\n      return keys.some((key) =>\n        Object.prototype.hasOwnProperty.call(states, key) &&\n        !Object.prototype.hasOwnProperty.call(systemDefaults, key)\n      );\n    },\n\n  updateState(payload, options = {}) {\n      const source = options.source || 'user';\n      const previousStates = this.widgetConfig.states || {};\n      const previousSystemDefaults = this.widgetConfig.systemDefaults || {};\n      const nextStates = { ...previousStates, ...payload };\n      const nextSystemDefaults = { ...previousSystemDefaults };\n      const keys = Object.keys(payload || {});\n\n      if (source === 'system') {\n        keys.forEach((key) => {\n          nextSystemDefaults[key] = payload[key];\n        });\n      } else {\n        keys.forEach((key) => {\n          if (Object.prototype.hasOwnProperty.call(nextSystemDefaults, key)) {\n            delete nextSystemDefaults[key];\n          }\n        });\n      }\n\n      const updatedConfig = { ...this.widgetConfig, states: nextStates, systemDefaults: nextSystemDefaults };\n      this.saveConfig(updatedConfig);\n      return updatedConfig;\n    },\n\n  saveConfig(newConfig) {\n      this.widgetConfig = { ...this.widgetConfig, ...newConfig };\n      if (this.storageAvailable()) {\n        try {\n          localStorage.setItem(this.cookieKey, JSON.stringify(this.widgetConfig));\n        } catch {\n          this.storeCookie(this.cookieKey, JSON.stringify(this.widgetConfig), 365);\n        }\n      } else {\n        this.storeCookie(this.cookieKey, JSON.stringify(this.widgetConfig), 365);\n      }\n    },\n\n  retrieveState(key) {\n      return this.widgetConfig.states ? this.widgetConfig.states[key] : undefined;\n    },\n\n  loadConfig(cache = true) {\n      if (cache) return this.widgetConfig;\n      const savedConfig = this.fetchSavedConfig();\n      if (savedConfig) {\n        try {\n          this.widgetConfig = JSON.parse(savedConfig);\n        } catch (e) {\n          console.warn('Error parsing config:', e);\n          this.widgetConfig = {};\n        }\n      }\n      return this.widgetConfig;\n    },\n\n  fetchSavedConfig() {\n      if (this.storageAvailable()) {\n        try {\n          const stored = localStorage.getItem(this.cookieKey);\n          if (stored) return stored;\n        } catch (e) {\n          console.warn('localStorage failed, falling back to cookies:', e);\n        }\n      }\n      const cookieVal = this.fetchCookie(this.cookieKey);\n      return cookieVal && cookieVal !== \"\" ? cookieVal : \"{}\";\n    },\n\n  fetchDataAttr(attr) {\n      try {\n        const dataAttr = `data-acc-${attr}`;\n        const element = document.querySelector(`[${dataAttr}]`);\n        return element ? element.getAttribute(dataAttr) : null;\n      } catch (e) {\n        console.warn(`Error getting data attribute: ${attr}`, e);\n        return null;\n      }\n    },\n\n};\n","import menuCSS from './styles/menu.css';\nimport widgetCSS from './styles/widget.css';\nimport reportCSS from './styles/report.css';\nimport readingGuideCSS from './styles/reading-guide.css';\nimport skipLinkCSS from './styles/skip-link.css';\nimport annotationsCSS from './styles/annotations.css';\n\nconst STATIC_STYLE_ID = 'acc-static-styles';\nconst STATIC_STYLES = [\n  menuCSS,\n  widgetCSS,\n  reportCSS,\n  readingGuideCSS,\n  skipLinkCSS,\n  annotationsCSS\n].join('\\n');\n\n/** @typedef {import('./index.js').default} AccessibleWebWidget */\n\n/** @type {{ [methodName: string]: (this: AccessibleWebWidget, ...args: any[]) => any }} */\nexport const styleMethods = {\n\n  findElement(selector, parent = document) {\n    try {\n      return parent.querySelector(selector);\n    } catch (e) {\n      console.warn(`Failed to query selector: ${selector}`, e);\n      return null;\n    }\n  },\n\n  injectStyle(id, css) {\n    if (!css || typeof document === 'undefined') return;\n    try {\n      let style = document.getElementById(id) || document.createElement('style');\n      style.innerHTML = css;\n      if (!style.id) {\n        style.id = id;\n        document.head.appendChild(style);\n      }\n    } catch (e) {\n      console.warn('Error adding stylesheet:', e);\n    }\n  },\n\n  createCSS(styles) {\n    let css = \"\";\n    if (!styles) return css;\n    const browserPrefixes = ['-o-', '-ms-', '-moz-', '-webkit-', ''];\n    const prefixedProperties = ['filter'];\n    for (let key in styles) {\n      if (!Object.prototype.hasOwnProperty.call(styles, key)) continue;\n      let prefixes = prefixedProperties.includes(key) ? browserPrefixes : [\"\"];\n      prefixes.forEach(prefix => {\n        css += `${prefix}${key}:${styles[key]} !important;`;\n      });\n    }\n    return css;\n  },\n\n  wrapCSS(selector, childrenSelector, css) {\n    let output = \"\";\n    childrenSelector.forEach(child => {\n      output += `${selector} ${child}{${css}}`;\n    });\n    return output;\n  },\n\n  buildCSS(config) {\n    if (!config) return \"\";\n    let output = \"\";\n    output += this.createCSS(config.styles || {});\n    if (output.length && config.selector) {\n      output = this.wrapCSS(config.selector, config.childrenSelector || [\"\"], output);\n    }\n    output += config.css || \"\";\n    return output;\n  },\n\n  applyToolStyle(config) {\n    let { id = \"\", enable = false } = config;\n    let styleId = `acc-${id}`;\n    if (enable) {\n      let css = this.buildCSS(config);\n      this.injectStyle(styleId, css);\n    } else {\n      let style = document.getElementById(styleId);\n      if (style) style.remove();\n    }\n    document.documentElement.classList.toggle(styleId, enable);\n  },\n\n  applyThemeVariables() {\n    if (typeof document === 'undefined') return;\n\n    const vars = {\n      '--acc-primary-color': this.widgetTheme.primaryColor,\n      '--acc-primary-color-light': this.widgetTheme.primaryColorLight,\n      '--acc-primary-color-dark': this.widgetTheme.primaryColorDark,\n      '--acc-bg-color': this.widgetTheme.backgroundColor,\n      '--acc-text-color': this.widgetTheme.textColor,\n      '--acc-text-color-inverted': this.widgetTheme.textColorInverted,\n      '--acc-card-bg': this.widgetTheme.cardBackground,\n      '--acc-border-color': this.widgetTheme.borderColor,\n      '--acc-focus-ring-color': this.widgetTheme.focusRingColor,\n      '--acc-hover-color': this.widgetTheme.hoverColor,\n      '--acc-active-color': this.widgetTheme.activeColor,\n      '--acc-border-radius': this.widgetTheme.borderRadius,\n      '--acc-button-border-radius': this.widgetTheme.buttonBorderRadius,\n      '--acc-header-height': this.widgetTheme.headerHeight,\n      '--acc-focus-outline-width': this.widgetTheme.focusBorderWidth,\n      '--acc-focus-outline-offset': this.widgetTheme.focusOutlineOffset,\n      '--acc-widget-z-index': String(this.widgetTheme.zIndex),\n      '--acc-button-size': this.widgetTheme.buttonSize\n    };\n\n    Object.entries(vars).forEach(([key, value]) => {\n      document.documentElement.style.setProperty(key, value);\n    });\n  },\n\n  registerStaticStyles() {\n    if (this.staticStylesRegistered) return;\n    this.injectStyle(STATIC_STYLE_ID, STATIC_STYLES);\n    this.staticStylesRegistered = true;\n  }\n\n};\n","/** @typedef {import('./index.js').default} AccessibleWebWidget */\n\nconst AXE_CORE_VERSION = '4.11.1';\nconst AXE_CORE_SRC = `https://cdn.jsdelivr.net/npm/axe-core@${AXE_CORE_VERSION}/axe.min.js`;\nconst AXE_CORE_INTEGRITY = 'sha384-wb3zgvLcZeMFSec08dk7g8K8yDFFAX2uNKVwOUuowwc/wIfE2t6XVUjTEgPrOJCS';\nconst AXE_RUN_OPTIONS = {\n  runOnly: ['wcag2a', 'wcag2aa', 'wcag21a', 'wcag21aa', 'best-practice']\n};\nconst MAX_ANNOTATIONS = 50;\nconst SYSTEM_PREFERS_REDUCED_MOTION = '(prefers-reduced-motion: reduce)';\n\n/** @type {{ [methodName: string]: (this: AccessibleWebWidget, ...args: any[]) => any }} */\nexport const featureMethods = {\n\n  getContrastToggleDisplay(index) {\n      if (index === 0) {\n        return { key: 'light-contrast', label: 'Light', icon: this.widgetIcons.lightContrast };\n      }\n      if (index === 1) {\n        return { key: 'dark-contrast', label: 'Dark', icon: this.widgetIcons.darkContrast };\n      }\n      return { key: null, label: 'Contrast', icon: this.widgetIcons.contrast };\n    },\n\n  updateContrastToggleButton(button, index) {\n      if (!button) return;\n      const display = this.getContrastToggleDisplay(index);\n      const iconNode = button.querySelector('svg');\n      if (iconNode) {\n        iconNode.outerHTML = display.icon;\n      } else {\n        button.insertAdjacentHTML('afterbegin', display.icon);\n      }\n\n      const translatedLabel = this.translate(display.label);\n      const labelNode = button.querySelector('.acc-label');\n      if (labelNode) {\n        labelNode.setAttribute('data-acc-text', display.label);\n        labelNode.innerText = translatedLabel;\n      }\n      button.setAttribute('title', translatedLabel);\n      button.setAttribute('aria-label', translatedLabel);\n      button.setAttribute('data-contrast-mode', display.key || 'off');\n    },\n\n  getSaturationToggleDisplay(index) {\n      if (index === 0) {\n        return { key: 'low-saturation', label: 'Low', icon: this.widgetIcons.lowSaturation };\n      }\n      if (index === 1) {\n        return { key: 'high-saturation', label: 'High', icon: this.widgetIcons.highSaturation };\n      }\n      return { key: null, label: 'Saturation', icon: this.widgetIcons.saturation };\n    },\n\n  updateSaturationToggleButton(button, index) {\n      if (!button) return;\n      const display = this.getSaturationToggleDisplay(index);\n      const iconNode = button.querySelector('svg');\n      if (iconNode) {\n        iconNode.outerHTML = display.icon;\n      } else {\n        button.insertAdjacentHTML('afterbegin', display.icon);\n      }\n\n      const translatedLabel = this.translate(display.label);\n      const labelNode = button.querySelector('.acc-label');\n      if (labelNode) {\n        labelNode.setAttribute('data-acc-text', display.label);\n        labelNode.innerText = translatedLabel;\n      }\n      button.setAttribute('title', translatedLabel);\n      button.setAttribute('aria-label', translatedLabel);\n      button.setAttribute('data-saturation-mode', display.key || 'off');\n    },\n\n  ensureSkipLink() {\n      if (typeof document === 'undefined') return null;\n      if (this.skipLinkElement && document.body.contains(this.skipLinkElement)) {\n        this.updateSkipLinkLabel();\n        return this.skipLinkElement;\n      }\n      const existing = document.getElementById('acc-skip-link');\n      if (existing) {\n        this.skipLinkElement = existing;\n        if (!existing.getAttribute('data-acc-text')) {\n          existing.setAttribute('data-acc-text', 'Skip to accessibility menu');\n        }\n        this.updateSkipLinkLabel();\n        return existing;\n      }\n  \n      const button = document.createElement('button');\n      button.type = 'button';\n      button.id = 'acc-skip-link';\n      button.className = 'acc-skip-link';\n      button.setAttribute('tabindex', '0');\n      button.setAttribute('data-acc-text', 'Skip to accessibility menu');\n      button.setAttribute('aria-label', this.translate('Skip to accessibility menu'));\n      button.textContent = this.translate('Skip to accessibility menu');\n  \n      button.addEventListener('click', (event) => {\n        event.preventDefault();\n        const toggle = this.widgetToggleButton;\n        if (!toggle) return;\n  \n        const currentMenu = this.activeMenuContainer || this.menuContainer;\n        const menuIsVisible = currentMenu && currentMenu.style.display !== 'none';\n  \n        const focusMenu = () => {\n          const targetMenu = this.activeMenuContainer || this.menuContainer;\n          if (!targetMenu) return;\n          const focusables = this.getFocusableElements(targetMenu);\n          if (focusables.length) {\n            focusables[0].focus();\n          }\n        };\n  \n        if (!menuIsVisible) {\n          toggle.click();\n          requestAnimationFrame(focusMenu);\n        } else {\n          focusMenu();\n        }\n      });\n  \n      document.body.insertBefore(button, document.body.firstChild);\n      this.skipLinkElement = button;\n      return button;\n    },\n\n  updateSkipLinkLabel() {\n      if (!this.skipLinkElement) return;\n      const key = this.skipLinkElement.getAttribute('data-acc-text') || 'Skip to accessibility menu';\n      const label = this.translate(key);\n      this.skipLinkElement.textContent = label;\n      this.skipLinkElement.setAttribute('aria-label', label);\n    },\n\n  shouldSkipScaling(element) {\n      return element.closest('.acc-menu, .acc-container, .acc-widget');\n    },\n\n  collectDirectTextParents(rootElement = document.body) {\n      const directTextParents = new Set();\n      if (typeof document === 'undefined' || typeof NodeFilter === 'undefined') {\n        return directTextParents;\n      }\n\n      const root = rootElement instanceof Element ? rootElement : document.body;\n      if (!root) return directTextParents;\n\n      const walker = document.createTreeWalker(root, NodeFilter.SHOW_TEXT, {\n        acceptNode: (node) => {\n          if (!node || !node.textContent || !node.textContent.trim()) {\n            return NodeFilter.FILTER_REJECT;\n          }\n          const parent = node.parentElement;\n          if (!parent) return NodeFilter.FILTER_REJECT;\n          if (this.shouldSkipScaling(parent)) return NodeFilter.FILTER_REJECT;\n          if (parent.closest('script,style,noscript,textarea,pre,code,svg')) {\n            return NodeFilter.FILTER_REJECT;\n          }\n          if (parent.matches(this.textScaleSelectors)) {\n            return NodeFilter.FILTER_REJECT;\n          }\n          return NodeFilter.FILTER_ACCEPT;\n        }\n      });\n\n      let currentNode = walker.nextNode();\n      while (currentNode) {\n        const parent = currentNode.parentElement;\n        if (parent) {\n          directTextParents.add(parent);\n        }\n        currentNode = walker.nextNode();\n      }\n\n      return directTextParents;\n    },\n\n  applyScaleToElement(element, multiplier) {\n      if (\n        !element ||\n        !(element instanceof Element) ||\n        this.shouldSkipScaling(element) ||\n        element.classList.contains('material-icons') ||\n        element.classList.contains('fa')\n      ) {\n        return;\n      }\n      const baseAttr = 'data-acc-baseSize';\n      if (!element.hasAttribute(baseAttr)) {\n        const computedSize = parseFloat(window.getComputedStyle(element).fontSize);\n        if (Number.isNaN(computedSize) || computedSize <= 0) {\n          return;\n        }\n        element.setAttribute(baseAttr, String(computedSize));\n      }\n      const baseSize = parseFloat(element.getAttribute(baseAttr));\n      if (Number.isNaN(baseSize) || baseSize <= 0) {\n        return;\n      }\n      element.style.fontSize = `${baseSize * multiplier}px`;\n    },\n\n  ensureTextScaleObserver() {\n      if (this.textScaleObserver || !document.body) return;\n      this.textScaleObserver = new MutationObserver((mutations) => {\n        if (this.currentTextScaleMultiplier <= 1) {\n          return;\n        }\n        const pending = new Set();\n        mutations.forEach(mutation => {\n          mutation.addedNodes.forEach(node => {\n            if (!(node instanceof Element)) return;\n            if (node.matches && node.matches(this.textScaleSelectors)) {\n              pending.add(node);\n            }\n            node.querySelectorAll?.(this.textScaleSelectors).forEach(el => pending.add(el));\n            this.collectDirectTextParents(node).forEach(el => pending.add(el));\n          });\n        });\n        if (!pending.size) return;\n        pending.forEach(el => this.applyScaleToElement(el, this.currentTextScaleMultiplier));\n      });\n      this.textScaleObserver.observe(document.body, { childList: true, subtree: true });\n    },\n\n  disconnectTextScaleObserver() {\n      if (!this.textScaleObserver) return;\n      this.textScaleObserver.disconnect();\n      this.textScaleObserver = null;\n    },\n\n  scaleText(multiply = 1) {\n      try {\n        this.currentTextScaleMultiplier = multiply;\n        if (multiply > 1) {\n          this.ensureTextScaleObserver();\n          const elements = document.querySelectorAll(this.textScaleSelectors);\n          elements.forEach(el => this.applyScaleToElement(el, multiply));\n          this.collectDirectTextParents(document.body).forEach(el => this.applyScaleToElement(el, multiply));\n        } else {\n          this.disconnectTextScaleObserver();\n          const scaledElements = document.querySelectorAll('[data-acc-baseSize]');\n          scaledElements.forEach(el => {\n            if (this.shouldSkipScaling(el)) return;\n            el.style.fontSize = '';\n            el.removeAttribute('data-acc-baseSize');\n          });\n        }\n      } catch (e) {\n        console.warn('Error scaling text:', e);\n      }\n    },\n\n  clampTextScalePercent(percent) {\n      const min = Number(this.textScaleMinPercent) || 80;\n      const max = Number(this.textScaleMaxPercent) || 150;\n      const step = Number(this.textScaleStepPercent) || 5;\n      const numeric = Number(percent);\n      if (!Number.isFinite(numeric)) return 100;\n      const snapped = Math.round((numeric - min) / step) * step + min;\n      return Math.min(max, Math.max(min, snapped));\n    },\n\n  getTextScalePercent(scaleValue = 1) {\n      if (scaleValue === false || scaleValue === null || typeof scaleValue === 'undefined') {\n        return this.clampTextScalePercent(100);\n      }\n      const numeric = Number(scaleValue);\n      if (!Number.isFinite(numeric)) {\n        return this.clampTextScalePercent(100);\n      }\n      if (numeric <= 0) {\n        return this.clampTextScalePercent(100);\n      }\n      const percent = numeric > 10 ? numeric : numeric * 100;\n      return this.clampTextScalePercent(percent);\n    },\n\n  syncTextScaleControlUI(menu, scaleValue = 1) {\n      if (!menu || !menu.querySelector) return;\n      const range = menu.querySelector('.acc-text-scale-range');\n      const label = menu.querySelector('.acc-text-scale-percent');\n      const percent = this.getTextScalePercent(scaleValue);\n      if (range) {\n        const min = Number(this.textScaleMinPercent) || 80;\n        const max = Number(this.textScaleMaxPercent) || 150;\n        const progress = ((percent - min) / (max - min)) * 100;\n        range.value = String(percent);\n        range.style.setProperty('--acc-text-scale-progress', `${Math.max(0, Math.min(100, progress))}%`);\n      }\n      if (label) {\n        label.textContent = `${percent}%`;\n      }\n    },\n\n  setTextScaleFromPercent(percent, options = {}) {\n      const shouldPersist = options.persist !== false;\n      const clampedPercent = this.clampTextScalePercent(percent);\n      const multiplier = Number((clampedPercent / 100).toFixed(2));\n      const exactIndex = this.textScaleValues.indexOf(multiplier);\n\n      if (this.multiLevelFeatures['text-scale']) {\n        this.multiLevelFeatures['text-scale'].currentIndex = exactIndex;\n      }\n\n      if (exactIndex > -1) {\n        this.textScaleIndex = exactIndex;\n      } else {\n        let nearestIndex = 0;\n        let minDistance = Infinity;\n        this.textScaleValues.forEach((value, index) => {\n          const distance = Math.abs(value - multiplier);\n          if (distance < minDistance) {\n            minDistance = distance;\n            nearestIndex = index;\n          }\n        });\n        this.textScaleIndex = nearestIndex;\n      }\n\n      this.scaleText(multiplier);\n\n      if (shouldPersist) {\n        this.updateState({ 'text-scale': multiplier });\n      }\n\n      return multiplier;\n    },\n\n  enableBoldText(enable = false) {\n      const contentSelector = [\n        '*',\n        ':not(.material-icons)',\n        ':not(.material-icons-outlined)',\n        ':not(.material-icons-round)',\n        ':not(.material-symbols-outlined)',\n        ':not(.material-symbols-rounded)',\n        ':not(.fa)',\n        ':not(.fas)',\n        ':not(.far)',\n        ':not(.fab)',\n        ':not(.fa-solid)',\n        ':not(.fa-regular)',\n        ':not(.fa-brands)',\n        ':not(.glyphicon)',\n        ':not(.icon)',\n        ':not(.icons)',\n        ':not([class*=\"icon-\"])',\n        ':not([data-icon])'\n      ].join('');\n      const config = {\n        id: \"bold-text\",\n        selector: \"body\",\n        childrenSelector: [contentSelector],\n        styles: { 'font-weight': '700' },\n        css: `\n          .acc-container, .acc-container *, .acc-menu, .acc-menu * {\n            font-weight: inherit !important;\n          }\n          input::placeholder, textarea::placeholder {\n            font-weight: 700 !important;\n          }\n        `\n      };\n      this.applyToolStyle({ ...config, enable });\n    },\n\n  adjustLetterSpacing(enable = false) {\n      const config = {\n        id: \"letter-spacing\",\n        selector: \"html\",\n        childrenSelector: ['', '*:not(.material-icons,.acc-menu,.acc-menu *, .acc-widget, .acc-widget *)'],\n        styles: { 'letter-spacing': '2px' }\n      };\n      this.applyToolStyle({ ...config, enable });\n    },\n\n  adjustLineSpacing(enable = false) {\n      const config = {\n        id: \"line-spacing\",\n        selector: \"html\",\n        childrenSelector: ['', '*:not(.material-icons,.acc-menu,.acc-menu *, .acc-widget, .acc-widget *)'],\n        styles: { 'line-height': '3' }\n      };\n      this.applyToolStyle({ ...config, enable });\n    },\n\n  enableLargePointer(enable = false) {\n      const config = {\n        id: \"large-pointer\",\n        selector: \"body\",\n        childrenSelector: ['*'],\n        styles: {\n          'cursor': `url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='98px' height='98px' viewBox='0 0 48 48'%3E%3Cpath fill='%23FFFFFF' d='M27.8 39.7c-.1 0-.2 0-.4-.1s-.4-.3-.6-.5l-3.7-8.6-4.5 4.2c-.1.2-.3.3-.6.3-.1 0-.3 0-.4-.1-.3-.1-.6-.5-.6-.9V12c0-.4.2-.8.6-.9.1-.1.3-.1.4-.1.2 0 .5.1.7.3l16 15c.3.3.4.7.3 1.1-.1.4-.5.6-.9.7l-6.3.6 3.9 8.5c.1.2.1.5 0 .8-.1.2-.3.5-.5.6l-2.9 1.3c-.2-.2-.4-.2-.5-.2z'/%3E%3Cpath fill='%23212121' d='m18 12 16 15-7.7.7 4.5 9.8-2.9 1.3-4.3-9.9L18 34V12m0-2c-.3 0-.5.1-.8.2-.7.3-1.2 1-1.2 1.8v22c0 .8.5 1.5 1.2 1.8.3.2.6.2.8.2.5 0 1-.2 1.4-.5l3.4-3.2 3.1 7.3c.2.5.6.9 1.1 1.1.2.1.5.1.7.1.3 0 .5-.1.8-.2l2.9-1.3c.5-.2.9-.6 1.1-1.1.2-.5.2-1.1 0-1.5l-3.3-7.2 4.9-.4c.8-.1 1.5-.6 1.7-1.3.3-.7.1-1.6-.5-2.1l-16-15c-.3-.5-.8-.7-1.3-.7z'/%3E%3C/svg%3E\") 40 15, auto`\n        }\n      };\n      this.applyToolStyle({ ...config, enable });\n    },\n\n  highlightLinks(enable = false) {\n    const config = {\n      id: \"highlight-links\",\n      selector: \"html\",\n      childrenSelector: [\n        \"a[href]:not(.acc-menu a, .acc-widget a)\",\n        \"summary.header__menu-item:not(.acc-menu summary, .acc-widget summary)\",\n        \"summary.link:not(.acc-menu summary, .acc-widget summary)\",\n        \"summary[role='button']:not(.acc-menu summary, .acc-widget summary)\",\n        \"details > summary.list-menu__item:not(.acc-menu summary, .acc-widget summary)\",\n        \".header__menu-item[role='button']:not(.acc-menu *, .acc-widget *)\"\n      ],\n      styles: { 'outline': `3px solid ${this.widgetTheme.primaryColor}`, 'outline-offset': '2px' }\n    };\n    this.applyToolStyle({ ...config, enable });\n  },\n\n  highlightTitles(enable = false) {\n      const config = {\n        id: \"highlight-title\",\n        selector: \"html\",\n        childrenSelector: this.targetSelectors.HEADERS,\n        styles: { 'outline': `3px solid ${this.widgetTheme.primaryColor}`, 'outline-offset': '2px' }\n      };\n      this.applyToolStyle({ ...config, enable });\n    },\n\n  ensureReadableFontLoaded() {\n      if (this.readableFontLoaded) return;\n      const existing = document.getElementById('acc-readable-text-font');\n      if (existing) {\n        this.readableFontLoaded = true;\n        return;\n      }\n      const style = document.createElement('style');\n      style.id = 'acc-readable-text-font';\n      style.textContent = `\n        @font-face {\n          font-family: \"OpenDyslexic3\";\n          src: url(\"https://website-widgets.pages.dev/fonts/OpenDyslexic3-Regular.woff\") format(\"woff\"),\n               url(\"https://website-widgets.pages.dev/fonts/OpenDyslexic3-Regular.ttf\") format(\"truetype\");\n          font-display: swap;\n        }\n      `;\n      document.head.appendChild(style);\n      this.readableFontLoaded = true;\n    },\n\n  enableReadableText(enable = false) {\n      const shouldEnable = !!enable;\n      if (shouldEnable) {\n        this.ensureReadableFontLoaded();\n      }\n      const contentSelector = [\n        '*',\n        ':not(.material-icons)',\n        ':not(.material-icons-outlined)',\n        ':not(.material-icons-round)',\n        ':not(.material-symbols-outlined)',\n        ':not(.material-symbols-rounded)',\n        ':not(.fa)',\n        ':not(.fas)',\n        ':not(.far)',\n        ':not(.fab)',\n        ':not(.fa-solid)',\n        ':not(.fa-regular)',\n        ':not(.fa-brands)',\n        ':not(.glyphicon)',\n        ':not(.icon)',\n        ':not(.icons)',\n        ':not([class*=\"icon-\"])',\n        ':not([data-icon])'\n      ].join('');\n      const config = {\n        id: \"readable-text\",\n        selector: \"body\",\n        childrenSelector: [contentSelector],\n        styles: { \n          'font-family': '\"OpenDyslexic3\", \"Comic Sans MS\", Arial, Helvetica, sans-serif' \n        },\n        css: `\n          .acc-container, .acc-container *, .acc-menu, .acc-menu * {\n            font-family: inherit !important;\n          }\n          input::placeholder, textarea::placeholder {\n            font-family: \"OpenDyslexic3\", \"Comic Sans MS\", Arial, Helvetica, sans-serif !important;\n          }\n        `\n      };\n      this.applyToolStyle({ ...config, enable: shouldEnable });\n    },\n\n  pauseMotion(enable = false) {\n    const config = {\n      id: \"pause-motion\",\n      selector: \"html\",\n      childrenSelector: ['*'],\n      styles: { 'transition': 'none', 'animation-fill-mode': 'forwards', 'animation-iteration-count': '1', 'animation-duration': '.01s' }\n    };\n    this.applyToolStyle({ ...config, enable });\n  },\n\n  enableHighContrastMode(enable = false) {\n    const X = ':not(.acc-container):not(.acc-container *):not(.acc-rg-container):not(.acc-rg-container *)';\n    const config = {\n      id: 'high-contrast-mode',\n      css: `\n        /* ── Base: force black on white ── */\n        body.acc-high-contrast-mode *${X} {\n          color: #000 !important;\n          background-color: #fff !important;\n          background-image: none !important;\n          text-shadow: none !important;\n          box-shadow: none !important;\n        }\n\n        body.acc-high-contrast-mode {\n          background: #fff !important;\n        }\n\n        /* ── Borders: solid and visible ── */\n        body.acc-high-contrast-mode *${X} {\n          border-color: #000 !important;\n        }\n\n        /* ── Links: underlined, distinct color ── */\n        body.acc-high-contrast-mode a${X} {\n          color: #00e !important;\n          text-decoration: underline !important;\n        }\n\n        body.acc-high-contrast-mode a:visited${X} {\n          color: #551a8b !important;\n        }\n\n        /* ── Headings: bold black ── */\n        body.acc-high-contrast-mode :where(h1,h2,h3,h4,h5,h6)${X} {\n          color: #000 !important;\n          font-weight: 700 !important;\n        }\n\n        /* ── Images: keep visible, add border ── */\n        body.acc-high-contrast-mode img${X} {\n          border: 1px solid #000 !important;\n        }\n\n        /* ── Inputs & buttons: high-contrast borders ── */\n        body.acc-high-contrast-mode :where(input, textarea, select, button)${X} {\n          border: 2px solid #000 !important;\n          background: #fff !important;\n          color: #000 !important;\n        }\n\n        /* ── Focus rings: thick, high-visibility ── */\n        body.acc-high-contrast-mode :focus-visible${X} {\n          outline: 3px solid #000 !important;\n          outline-offset: 2px !important;\n        }\n\n        /* ── Tables: visible cell borders ── */\n        body.acc-high-contrast-mode :where(table, th, td)${X} {\n          border: 1px solid #000 !important;\n        }\n      `\n    };\n    this.applyToolStyle({ ...config, enable });\n    document.body?.classList.toggle('acc-high-contrast-mode', !!enable);\n  },\n\n  enableReadingAid(enable = false) {\n    try {\n      let container = this.findElement('.acc-rg-container');\n      const guideHeight = 100; // Height of the clear reading window\n  \n      if (enable) {\n        // Always clean up existing listener first to prevent duplicates\n        if (window.__accweb__scrollGuide) {\n          document.removeEventListener('mousemove', window.__accweb__scrollGuide);\n          delete window.__accweb__scrollGuide;\n        }\n  \n        if (!container) {\n          // Create container but don't make it visible yet\n          container = document.createElement('div');\n          container.setAttribute('class', 'acc-rg-container');\n          container.setAttribute('aria-hidden', 'true');\n          container.innerHTML = this.readingAidTemplate;\n          document.body.prepend(container);\n        }\n  \n        const rgTop = container.querySelector('.acc-rg-top');\n        const rgBottom = container.querySelector('.acc-rg-bottom');\n        \n        // Initially hide the guide completely\n        rgTop.style.display = 'none';\n        rgBottom.style.display = 'none';\n        this.readingAidVisible = false;\n  \n        const updateGuidePosition = this.throttle((event) => {\n          // If first mouse movement after enabling, make the guide visible\n          if (!this.readingAidVisible) {\n            rgTop.style.display = 'block';\n            rgBottom.style.display = 'block';\n            this.readingAidVisible = true;\n          }\n          \n          // Position the guide at the mouse Y coordinate\n          const mouseY = event.clientY;\n          const topHeight = Math.max(0, mouseY - guideHeight / 2);\n          const bottomHeight = Math.max(0, window.innerHeight - (mouseY + guideHeight / 2));\n          rgTop.style.height = `${topHeight}px`;\n          rgBottom.style.height = `${bottomHeight}px`;\n        }, 16);\n  \n        window.__accweb__scrollGuide = updateGuidePosition;\n        document.addEventListener('mousemove', updateGuidePosition, { passive: true });\n      } else {\n        // Reset visibility flag when disabled\n        this.readingAidVisible = false;\n        \n        // Clean up event listener\n        if (window.__accweb__scrollGuide) {\n          document.removeEventListener('mousemove', window.__accweb__scrollGuide);\n          delete window.__accweb__scrollGuide;\n        }\n        \n        // Remove container\n        if (container) {\n          container.remove();\n        }\n      }\n    } catch (e) {\n      console.warn('Error with reading aid:', e);\n    }\n  },\n\n  loadAxeCore() {\n    if (this.axeCoreLoaded && window.axe) {\n      return Promise.resolve(window.axe);\n    }\n  \n    if (this.axeCorePromise) {\n      return this.axeCorePromise;\n    }\n  \n    this.axeCoreLoading = true;\n    this.axeCorePromise = new Promise((resolve, reject) => {\n      let script = document.querySelector('script[data-acc-axe-core=\"true\"]');\n      let settled = false;\n      let timeoutId = null;\n  \n      const settleSuccess = () => {\n        if (settled) return;\n        settled = true;\n        if (timeoutId) clearTimeout(timeoutId);\n        if (!window.axe) {\n          this.axeCoreLoading = false;\n          this.axeCoreLoaded = false;\n          this.axeCorePromise = null;\n          reject(new Error('axe-core loaded but window.axe is unavailable'));\n          return;\n        }\n        this.axeCoreLoading = false;\n        this.axeCoreLoaded = true;\n        if (script) {\n          script.setAttribute('data-acc-axe-core-loaded', 'true');\n        }\n        resolve(window.axe);\n      };\n  \n      const settleError = (error) => {\n        if (settled) return;\n        settled = true;\n        if (timeoutId) clearTimeout(timeoutId);\n        this.axeCoreLoading = false;\n        this.axeCoreLoaded = false;\n        this.axeCorePromise = null;\n        reject(error);\n      };\n  \n      if (window.axe) {\n        settleSuccess();\n        return;\n      }\n  \n      if (script && !script.src.includes(`/axe-core@${AXE_CORE_VERSION}/`)) {\n        script.remove();\n        script = null;\n      }\n\n      if (!script) {\n        script = document.createElement('script');\n        script.src = AXE_CORE_SRC;\n        script.async = true;\n        script.integrity = AXE_CORE_INTEGRITY;\n        script.crossOrigin = 'anonymous';\n        script.setAttribute('data-acc-axe-core', 'true');\n        document.head.appendChild(script);\n      }\n  \n      script.addEventListener('load', settleSuccess, { once: true });\n      script.addEventListener('error', () => settleError(new Error('Failed to load axe-core')), { once: true });\n      timeoutId = setTimeout(() => {\n        settleError(new Error('Timed out loading axe-core'));\n      }, 15000);\n    });\n  \n    return this.axeCorePromise;\n  },\n\n  getAxeRunOptions() {\n    return { ...AXE_RUN_OPTIONS };\n  },\n\n  getViolationCounts(results = {}) {\n    const counts = { critical: 0, serious: 0, moderate: 0, minor: 0 };\n    const violations = Array.isArray(results.violations) ? results.violations : [];\n    violations.forEach((violation) => {\n      const impact = violation?.impact;\n      if (impact && counts[impact] !== undefined) {\n        counts[impact] += Array.isArray(violation.nodes) ? violation.nodes.length : 0;\n      }\n    });\n    return counts;\n  },\n\n  updateViolationBubble(results = null) {\n    const bubble = this.violationBubble || this.findElement('.acc-violation-bubble');\n    if (!bubble) return;\n\n    const counts = this.getViolationCounts(results || this.axeScanResults || {});\n    const devMode = this.isDevMode();\n\n    let displayCount = 0;\n    let severity = '';\n\n    if (counts.critical > 0) {\n      displayCount = counts.critical;\n      severity = 'critical';\n    } else if (devMode && counts.serious > 0) {\n      displayCount = counts.serious;\n      severity = 'serious';\n    } else if (devMode && counts.moderate > 0) {\n      displayCount = counts.moderate;\n      severity = 'moderate';\n    }\n\n    if (displayCount <= 0) {\n      bubble.textContent = '';\n      bubble.hidden = true;\n      bubble.removeAttribute('data-severity');\n      return;\n    }\n\n    bubble.hidden = false;\n    bubble.dataset.severity = severity;\n    bubble.textContent = displayCount > 99 ? '99+' : String(displayCount);\n  },\n\n  async runBackgroundAxeScan({ force = false } = {}) {\n    if (!force && this.axeScanResults) {\n      this.updateViolationBubble(this.axeScanResults);\n      return this.axeScanResults;\n    }\n\n    if (!force && this.axeScanPromise) {\n      return this.axeScanPromise;\n    }\n\n    this.axeScanPromise = (async () => {\n      try {\n        const axe = await this.loadAxeCore();\n        const results = await axe.run(document, this.getAxeRunOptions());\n        this.axeScanResults = results;\n        this.updateViolationBubble(results);\n        return results;\n      } catch (error) {\n        this.updateViolationBubble({ violations: [] });\n        throw error;\n      } finally {\n        this.axeScanPromise = null;\n      }\n    })();\n\n    return this.axeScanPromise;\n  },\n\n  ensureMediaQuery(query) {\n    if (!query || typeof window === 'undefined' || typeof window.matchMedia !== 'function') {\n      return null;\n    }\n    if (!this.systemPreferenceMediaQueries) {\n      this.systemPreferenceMediaQueries = {};\n    }\n    if (!this.systemPreferenceMediaQueries[query]) {\n      this.systemPreferenceMediaQueries[query] = window.matchMedia(query);\n    }\n    return this.systemPreferenceMediaQueries[query];\n  },\n\n  applySystemMotionPreference(shouldEnable) {\n    this.loadConfig();\n    if (this.hasExplicitStatePreference('pause-motion')) {\n      return false;\n    }\n\n    const currentValue = !!this.retrieveState('pause-motion');\n    if (currentValue === shouldEnable && this.isSystemControlledPreference('pause-motion')) {\n      return false;\n    }\n\n    this.updateState({ 'pause-motion': shouldEnable }, { source: 'system' });\n    return true;\n  },\n\n  detectSystemPreferences() {\n    if (typeof window === 'undefined' || typeof window.matchMedia !== 'function') return;\n\n    const reducedMotionQuery = this.ensureMediaQuery(SYSTEM_PREFERS_REDUCED_MOTION);\n    const shouldPauseMotion = !!reducedMotionQuery?.matches;\n    const motionChanged = this.applySystemMotionPreference(shouldPauseMotion);\n\n    if (motionChanged) {\n      this.applyEnhancements();\n    }\n  },\n\n  clearSystemPreferenceListeners() {\n    const listeners = Array.isArray(this.systemPreferenceListeners) ? this.systemPreferenceListeners : [];\n    listeners.forEach((remove) => {\n      if (typeof remove === 'function') {\n        remove();\n      }\n    });\n    this.systemPreferenceListeners = [];\n  },\n\n  setupMediaQueryListeners() {\n    this.clearSystemPreferenceListeners();\n    if (typeof window === 'undefined' || typeof window.matchMedia !== 'function') return;\n\n    const reducedMotionQuery = this.ensureMediaQuery(SYSTEM_PREFERS_REDUCED_MOTION);\n\n    const listen = (mediaQuery, handler) => {\n      if (!mediaQuery || typeof handler !== 'function') return;\n      if (typeof mediaQuery.addEventListener === 'function') {\n        mediaQuery.addEventListener('change', handler);\n        this.systemPreferenceListeners.push(() => mediaQuery.removeEventListener('change', handler));\n      } else if (typeof mediaQuery.addListener === 'function') {\n        mediaQuery.addListener(handler);\n        this.systemPreferenceListeners.push(() => mediaQuery.removeListener(handler));\n      }\n    };\n\n    const onReducedMotionChange = (event) => {\n      const changed = this.applySystemMotionPreference(!!event.matches);\n      if (changed) {\n        this.applyEnhancements();\n      }\n    };\n\n    listen(reducedMotionQuery, onReducedMotionChange);\n  },\n\n  async runAccessibilityReport() {\n    // Create or get report panel\n    let panel = this.findElement('.acc-report-panel');\n  \n    if (!panel) {\n      panel = this.createReportPanel();\n      document.body.appendChild(panel);\n    }\n  \n    this.openReportPanel(panel);\n  \n    const contentArea = this.findElement('.acc-report-content', panel);\n    const statusArea = this.findElement('.acc-report-status', panel);\n  \n    // Show loading state\n    statusArea.textContent = this.translate('Loading...');\n    contentArea.innerHTML = `<div class=\"acc-report-loading\">${this.translate('Analyzing page...')}</div>`;\n  \n    try {\n      const results = await this.runBackgroundAxeScan({ force: true });\n\n      this.displayReportResults(panel, results);\n  \n    } catch (error) {\n      contentArea.innerHTML = `<div class=\"acc-report-error\">Error: ${error.message}</div>`;\n      statusArea.textContent = '';\n    }\n  },\n\n  getReportFocusableElements(panel) {\n    if (!panel) return [];\n    const dialog = this.findElement('.acc-report-dialog', panel);\n    return this.getFocusableElements(dialog || panel);\n  },\n\n  openReportPanel(panel) {\n    if (!panel) return;\n  \n    this.reportPreviousFocus = document.activeElement && typeof document.activeElement.focus === 'function'\n      ? document.activeElement\n      : null;\n  \n    panel.classList.add('acc-report-visible');\n    panel.setAttribute('aria-hidden', 'false');\n  \n    const dialog = this.findElement('.acc-report-dialog', panel);\n    const focusTarget = dialog || panel;\n    if (!focusTarget.hasAttribute('tabindex')) {\n      focusTarget.setAttribute('tabindex', '-1');\n    }\n  \n    if (this.reportKeyListener) {\n      document.removeEventListener('keydown', this.reportKeyListener, true);\n    }\n  \n    this.reportKeyListener = (event) => {\n      if (!panel.classList.contains('acc-report-visible')) return;\n  \n      if (event.key === 'Escape' || event.key === 'Esc') {\n        event.preventDefault();\n        event.stopPropagation();\n        this.closeReportPanel();\n        return;\n      }\n  \n      if (event.key !== 'Tab') return;\n  \n      const focusables = this.getReportFocusableElements(panel);\n      if (!focusables.length) {\n        event.preventDefault();\n        focusTarget.focus();\n        return;\n      }\n  \n      const first = focusables[0];\n      const last = focusables[focusables.length - 1];\n      const active = document.activeElement;\n      const outsidePanel = !panel.contains(active);\n  \n      if (event.shiftKey) {\n        if (active === first || outsidePanel) {\n          event.preventDefault();\n          last.focus();\n        }\n        return;\n      }\n  \n      if (active === last || outsidePanel) {\n        event.preventDefault();\n        first.focus();\n      }\n    };\n  \n    document.addEventListener('keydown', this.reportKeyListener, true);\n  \n    requestAnimationFrame(() => {\n      const focusables = this.getReportFocusableElements(panel);\n      if (focusables.length) {\n        focusables[0].focus();\n        return;\n      }\n      focusTarget.focus();\n    });\n  },\n\n  createReportPanel() {\n    const panel = document.createElement('div');\n    panel.className = 'acc-report-panel acc-container';\n    panel.setAttribute('role', 'dialog');\n    panel.setAttribute('aria-modal', 'true');\n    panel.setAttribute('aria-hidden', 'true');\n    panel.setAttribute('aria-labelledby', 'acc-report-title');\n  \n    panel.innerHTML = `\n      <div class=\"acc-report-overlay\"></div>\n      <div class=\"acc-report-dialog\">\n        <div class=\"acc-report-header\">\n          <h2 id=\"acc-report-title\" class=\"acc-report-title\">${this.translate('Accessibility Report')}</h2>\n          <button type=\"button\" class=\"acc-report-close\" aria-label=\"${this.translate('Close')}\">${this.widgetIcons.close}</button>\n        </div>\n        <div class=\"acc-report-status\"></div>\n        <div class=\"acc-report-content\"></div>\n        <div class=\"acc-report-footer\">\n          <span class=\"acc-report-powered\">Powered by axe-core</span>\n        </div>\n      </div>\n    `;\n  \n    // Close handlers\n    const closeBtn = panel.querySelector('.acc-report-close');\n    const overlay = panel.querySelector('.acc-report-overlay');\n  \n    closeBtn.addEventListener('click', () => this.closeReportPanel());\n    overlay.addEventListener('click', () => this.closeReportPanel());\n  \n    return panel;\n  },\n\n  displayReportResults(panel, results) {\n    const contentArea = this.findElement('.acc-report-content', panel);\n    const statusArea = this.findElement('.acc-report-status', panel);\n  \n    const violations = results.violations || [];\n    const passes = results.passes || [];\n    const incomplete = results.incomplete || [];\n  \n    // Count by severity\n    const counts = { critical: 0, serious: 0, moderate: 0, minor: 0 };\n    violations.forEach(v => {\n      if (counts[v.impact] !== undefined) {\n        counts[v.impact] += v.nodes.length;\n      }\n    });\n  \n    const totalViolations = Object.values(counts).reduce((a, b) => a + b, 0);\n  \n    statusArea.textContent = totalViolations > 0\n      ? `${totalViolations} ${this.translate('Violations Found')}`\n      : this.translate('No Issues Found');\n  \n    let html = `\n      <div class=\"acc-report-summary\">\n        <div class=\"acc-report-stat critical\">\n          <span class=\"acc-report-stat-value\">${counts.critical}</span>\n          <span class=\"acc-report-stat-label\">${this.translate('Critical')}</span>\n        </div>\n        <div class=\"acc-report-stat serious\">\n          <span class=\"acc-report-stat-value\">${counts.serious}</span>\n          <span class=\"acc-report-stat-label\">${this.translate('Serious')}</span>\n        </div>\n        <div class=\"acc-report-stat moderate\">\n          <span class=\"acc-report-stat-value\">${counts.moderate}</span>\n          <span class=\"acc-report-stat-label\">${this.translate('Moderate')}</span>\n        </div>\n        <div class=\"acc-report-stat minor\">\n          <span class=\"acc-report-stat-value\">${counts.minor}</span>\n          <span class=\"acc-report-stat-label\">${this.translate('Minor')}</span>\n        </div>\n        <div class=\"acc-report-stat passed\">\n          <span class=\"acc-report-stat-value\">${passes.length}</span>\n          <span class=\"acc-report-stat-label\">${this.translate('Passed Tests')}</span>\n        </div>\n      </div>\n    `;\n  \n    if (violations.length === 0) {\n      html += `\n        <div class=\"acc-report-success\">\n          <div class=\"acc-report-success-icon\">\n            <svg viewBox=\"0 0 24 24\"><path d=\"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z\"/></svg>\n          </div>\n          <h3>${this.translate('No Issues Found')}</h3>\n        </div>\n      `;\n    } else {\n      html += `<div class=\"acc-report-section\">\n        <div class=\"acc-report-section-title\">${this.translate('Violations Found')} (${violations.length})</div>\n      `;\n  \n      // Sort by severity\n      const severityOrder = { critical: 0, serious: 1, moderate: 2, minor: 3 };\n      violations.sort((a, b) => (severityOrder[a.impact] || 4) - (severityOrder[b.impact] || 4));\n  \n      violations.forEach((violation, index) => {\n        html += `\n          <div class=\"acc-report-violation\" data-index=\"${index}\">\n            <div class=\"acc-report-violation-header\">\n              <span class=\"acc-report-violation-impact ${violation.impact}\">${this.translate(this.capitalizeFirst(violation.impact))}</span>\n              <span class=\"acc-report-violation-title\">${this.escapeHtml(violation.help)}</span>\n              <span class=\"acc-report-violation-count\">${violation.nodes.length} ${this.translate('Element')}${violation.nodes.length > 1 ? 's' : ''}</span>\n            </div>\n            <div class=\"acc-report-violation-details\">\n              <p class=\"acc-report-violation-desc\">${this.escapeHtml(violation.description)}</p>\n              <p class=\"acc-report-violation-help\">\n                <a href=\"${violation.helpUrl}\" target=\"_blank\" rel=\"noopener\">${this.translate('How to Fix')} →</a>\n              </p>\n              ${violation.nodes.slice(0, 5).map(node => `\n                <div class=\"acc-report-node\">\n                  <div class=\"acc-report-node-html\">${this.escapeHtml(node.html)}</div>\n                  ${node.failureSummary ? `<div class=\"acc-report-node-fix\"><strong>${this.translate('Issue')}:</strong> ${this.escapeHtml(node.failureSummary)}</div>` : ''}\n                </div>\n              `).join('')}\n              ${violation.nodes.length > 5 ? `<p style=\"color:#666;font-size:13px;margin-top:12px;\">... and ${violation.nodes.length - 5} more elements</p>` : ''}\n            </div>\n          </div>\n        `;\n      });\n  \n      html += `</div>`;\n    }\n  \n    if (incomplete.length > 0) {\n      html += `\n        <div class=\"acc-report-section\">\n          <div class=\"acc-report-section-title\">${this.translate('Items Need Review')} (${incomplete.length})</div>\n          <p style=\"color:#666;font-size:14px;\">These items require manual verification.</p>\n        </div>\n      `;\n    }\n  \n    contentArea.innerHTML = html;\n  \n    // Add click handlers for expandable violations\n    contentArea.querySelectorAll('.acc-report-violation-header').forEach(header => {\n      header.addEventListener('click', () => {\n        header.parentElement.classList.toggle('expanded');\n      });\n    });\n  },\n\n  capitalizeFirst(str) {\n    if (!str) return '';\n    return str.charAt(0).toUpperCase() + str.slice(1);\n  },\n\n  escapeHtml(str) {\n    if (!str) return '';\n    const div = document.createElement('div');\n    div.textContent = str;\n    return div.innerHTML;\n  },\n\n  closeReportPanel() {\n    const panel = this.findElement('.acc-report-panel');\n    if (panel) {\n      panel.classList.remove('acc-report-visible');\n      panel.setAttribute('aria-hidden', 'true');\n    }\n  \n    if (this.reportKeyListener) {\n      document.removeEventListener('keydown', this.reportKeyListener, true);\n      this.reportKeyListener = null;\n    }\n  \n    const focusTarget = this.reportPreviousFocus;\n    this.reportPreviousFocus = null;\n    if (focusTarget && typeof focusTarget.focus === 'function') {\n      focusTarget.focus();\n    }\n  },\n\n  concealImages(enable = false) {\n    const styleId = `acc-hide-images`;\n    const existingStyle = document.getElementById(styleId);\n    if (existingStyle) existingStyle.remove();\n    document.documentElement.classList.toggle(styleId, enable);\n    if (enable) {\n      const css = `\n        body > *:not(.acc-container) img,\n        body > *:not(.acc-container) picture,\n        body > *:not(.acc-container) svg:not(.acc-container svg),\n        body > *:not(.acc-container) video,\n        body > *:not(.acc-container) iframe,\n        body > *:not(.acc-container) canvas,\n        body > *:not(.acc-container) .video,\n        body > *:not(.acc-container) .image {\n          display: none !important;\n        }\n      `;\n      this.injectStyle(styleId, css);\n    }\n  },\n\n  supportsSpeechSynthesis() {\n    if (typeof window === 'undefined') return false;\n    return (\n      'speechSynthesis' in window &&\n      typeof window.SpeechSynthesisUtterance !== 'undefined'\n    );\n  },\n\n  supportsTextToSpeech() {\n    return this.supportsSpeechSynthesis();\n  },\n\n  normalizeSpeechLanguage(languageCode = 'en') {\n    const code = String(languageCode || 'en').toLowerCase();\n    const languageMap = {\n      en: 'en-US',\n      it: 'it-IT',\n      fr: 'fr-FR',\n      de: 'de-DE',\n      es: 'es-ES',\n      ru: 'ru-RU',\n      pl: 'pl-PL',\n      ro: 'ro-RO',\n      nl: 'nl-NL',\n      uk: 'uk-UA'\n    };\n    return languageMap[code] || code;\n  },\n\n  getNativeTtsRate() {\n    const configured = Number(this.nativeTtsConfig?.rate);\n    if (!Number.isFinite(configured)) return 1;\n    return Math.min(2, Math.max(0.5, configured));\n  },\n\n  getNativeTtsPitch() {\n    const configured = Number(this.nativeTtsConfig?.pitch);\n    if (!Number.isFinite(configured)) return 1;\n    return Math.min(2, Math.max(0, configured));\n  },\n\n  isElementVisibleForTts(element) {\n    if (!(element instanceof Element)) return false;\n    const style = window.getComputedStyle(element);\n    if (style.display === 'none' || style.visibility === 'hidden') {\n      return false;\n    }\n    const rect = element.getBoundingClientRect();\n    return rect.width > 0 && rect.height > 0;\n  },\n\n  isTtsExcludedElement(element, { allowLandmarkRegions = false } = {}) {\n    if (!(element instanceof Element)) return true;\n    if (element.closest('.acc-container')) return true;\n    if (element.closest('script,style,noscript,template')) return true;\n    if (element.closest('[aria-hidden=\"true\"]')) return true;\n    if (\n      !allowLandmarkRegions &&\n      element.closest(\n        'nav,header,footer,aside,form,dialog,[role=\"navigation\"],[role=\"complementary\"],[role=\"search\"],[role=\"menu\"],[role=\"dialog\"],[role=\"alert\"],[aria-live]'\n      )\n    ) {\n      return true;\n    }\n    return false;\n  },\n\n  normalizeReadableText(text = '') {\n    return String(text)\n      .replace(/\\s+/g, ' ')\n      .replace(/[ \\t]+([,.;!?])/g, '$1')\n      .trim();\n  },\n\n  getTtsCandidateRoots() {\n    const selectors = [\n      'article',\n      'main',\n      '[role=\"main\"]',\n      '.content',\n      '.post',\n      '.entry-content',\n      '#content'\n    ];\n    const roots = [];\n    const seen = new Set();\n\n    selectors.forEach((selector) => {\n      document.querySelectorAll(selector).forEach((element) => {\n        if (!(element instanceof Element)) return;\n        if (this.isTtsExcludedElement(element) || !this.isElementVisibleForTts(element)) return;\n        if (seen.has(element)) return;\n        seen.add(element);\n        roots.push(element);\n      });\n    });\n\n    return roots;\n  },\n\n  getPrimaryContentRoot() {\n    if (typeof document === 'undefined') return null;\n    const candidates = this.getTtsCandidateRoots();\n    if (!candidates.length) {\n      const explicitCandidates = Array.from(\n        document.querySelectorAll('main,article,[role=\"main\"],#content,.content,.post,.entry-content')\n      ).filter((element) =>\n        element instanceof Element &&\n        !this.isTtsExcludedElement(element) &&\n        this.isElementVisibleForTts(element)\n      );\n\n      if (explicitCandidates.length) {\n        let explicitBest = explicitCandidates[0];\n        let explicitBestScore = -1;\n        explicitCandidates.forEach((candidate) => {\n          const textLength = this.normalizeReadableText(candidate.innerText || candidate.textContent || '').length;\n          const rect = candidate.getBoundingClientRect();\n          const score = textLength + (rect.width * rect.height * 0.0025);\n          if (score > explicitBestScore) {\n            explicitBestScore = score;\n            explicitBest = candidate;\n          }\n        });\n        return explicitBest;\n      }\n\n      if (document.body) {\n        const topLevelCandidates = Array.from(document.body.children).filter((element) =>\n          element instanceof Element &&\n          !element.classList.contains('acc-container') &&\n          this.isElementVisibleForTts(element)\n        );\n\n        if (topLevelCandidates.length) {\n          let best = topLevelCandidates[0];\n          let bestScore = -1;\n          topLevelCandidates.forEach((candidate) => {\n            const textLength = this.normalizeReadableText(candidate.innerText || candidate.textContent || '').length;\n            const rect = candidate.getBoundingClientRect();\n            const score = textLength + (rect.width * rect.height * 0.0025);\n            if (score > bestScore) {\n              bestScore = score;\n              best = candidate;\n            }\n          });\n          return best;\n        }\n      }\n\n      return document.body;\n    }\n\n    let bestRoot = candidates[0];\n    let bestScore = -1;\n    candidates.forEach((candidate) => {\n      const blocks = this.extractReadableBlocks(candidate);\n      const score = blocks.join(' ').length;\n      if (score > bestScore) {\n        bestScore = score;\n        bestRoot = candidate;\n      }\n    });\n    return bestRoot;\n  },\n\n  extractReadableBlocks(root) {\n    if (!(root instanceof Element)) return [];\n    const blockSelector = 'h1,h2,h3,h4,h5,h6,p,li,dt,dd,blockquote,figcaption,caption,th,td';\n    const blocks = [];\n    root.querySelectorAll(blockSelector).forEach((element) => {\n      if (!(element instanceof Element)) return;\n      if (this.isTtsExcludedElement(element) || !this.isElementVisibleForTts(element)) return;\n      const text = this.normalizeReadableText(element.innerText || element.textContent || '');\n      if (text.length < 15) return;\n      blocks.push(text);\n    });\n    return blocks;\n  },\n\n  getReadableContent() {\n    if (typeof document === 'undefined') return '';\n    const candidateRoots = this.getTtsCandidateRoots();\n    let bestBlocks = [];\n    let bestScore = -1;\n\n    candidateRoots.forEach((root) => {\n      const blocks = this.extractReadableBlocks(root);\n      if (!blocks.length) return;\n      const characterCount = blocks.join(' ').length;\n      const score = (blocks.length * 60) + characterCount;\n      if (score > bestScore) {\n        bestScore = score;\n        bestBlocks = blocks;\n      }\n    });\n\n    if (!bestBlocks.length && document.body) {\n      bestBlocks = this.extractReadableBlocks(document.body);\n    }\n\n    if (!bestBlocks.length && document.body) {\n      const fallback = this.normalizeReadableText(document.body.innerText || document.body.textContent || '');\n      return fallback.slice(0, 30000);\n    }\n\n    return bestBlocks.join('\\n\\n').slice(0, 30000);\n  },\n\n  splitLongSpeechSegment(segment, maxLength = 240) {\n    if (!segment) return [];\n    if (segment.length <= maxLength) return [segment];\n\n    const parts = [];\n    let remaining = segment;\n    while (remaining.length > maxLength) {\n      let splitIndex = remaining.lastIndexOf(',', maxLength);\n      if (splitIndex < Math.floor(maxLength * 0.5)) {\n        splitIndex = remaining.lastIndexOf(' ', maxLength);\n      }\n      if (splitIndex < Math.floor(maxLength * 0.5)) {\n        splitIndex = maxLength;\n      }\n      parts.push(remaining.slice(0, splitIndex).trim());\n      remaining = remaining.slice(splitIndex).trim();\n    }\n    if (remaining.length) {\n      parts.push(remaining);\n    }\n    return parts.filter(Boolean);\n  },\n\n  buildSpeechQueue(text = '') {\n    const normalized = this.normalizeReadableText(text);\n    if (!normalized) return [];\n\n    const paragraphCandidates = text\n      .split(/\\n{2,}/)\n      .map((paragraph) => this.normalizeReadableText(paragraph))\n      .filter(Boolean);\n\n    const paragraphs = paragraphCandidates.length ? paragraphCandidates : [normalized];\n    const queue = [];\n\n    paragraphs.forEach((paragraph) => {\n      const sentences = paragraph.split(/(?<=[.!?])\\s+/).filter(Boolean);\n      const sentenceList = sentences.length ? sentences : [paragraph];\n      let chunk = '';\n\n      sentenceList.forEach((sentence) => {\n        const next = chunk ? `${chunk} ${sentence}` : sentence;\n        if (next.length <= 240) {\n          chunk = next;\n          return;\n        }\n        if (chunk) {\n          queue.push(...this.splitLongSpeechSegment(chunk, 240));\n        }\n        chunk = sentence;\n      });\n\n      if (chunk) {\n        queue.push(...this.splitLongSpeechSegment(chunk, 240));\n      }\n    });\n\n    return queue.slice(0, 300);\n  },\n\n  resolveSpeechVoice(languageCode) {\n    if (!this.supportsSpeechSynthesis()) return null;\n    const synth = window.speechSynthesis;\n    const voices = synth.getVoices?.() || [];\n    if (!voices.length) return null;\n\n    const preferredVoiceName = String(this.nativeTtsConfig?.preferredVoiceName || '').trim().toLowerCase();\n    if (preferredVoiceName) {\n      const byExactName = voices.find((voice) => String(voice.name || '').trim().toLowerCase() === preferredVoiceName);\n      if (byExactName) return byExactName;\n      const byNameContains = voices.find((voice) => String(voice.name || '').toLowerCase().includes(preferredVoiceName));\n      if (byNameContains) return byNameContains;\n    }\n\n    const configuredVoiceLang = String(this.nativeTtsConfig?.preferredVoiceLang || '').trim();\n    const targetLanguage = configuredVoiceLang || languageCode;\n    const normalized = this.normalizeSpeechLanguage(targetLanguage).toLowerCase();\n    const primary = normalized.split('-')[0];\n    const localExact = voices.find((voice) => (\n      voice.localService &&\n      String(voice.lang || '').toLowerCase() === normalized\n    ));\n    const exact = voices.find((voice) => String(voice.lang || '').toLowerCase() === normalized);\n    const localByPrimary = voices.find((voice) => (\n      voice.localService &&\n      String(voice.lang || '').toLowerCase().startsWith(primary)\n    ));\n    const byPrimary = voices.find((voice) => String(voice.lang || '').toLowerCase().startsWith(primary));\n    const defaultVoice = voices.find((voice) => voice.default);\n    return localExact || exact || localByPrimary || byPrimary || defaultVoice || voices[0];\n  },\n\n  getSpeechTargetFromEvent(event) {\n    const target = event?.target;\n    if (!(target instanceof Element)) return null;\n    if (target.closest('.acc-container')) return null;\n\n    const block = target.closest('h1,h2,h3,h4,h5,h6,p,li,dt,dd,blockquote,figcaption,caption,th,td,div,section');\n    if (!(block instanceof Element)) return null;\n    if (this.isTtsExcludedElement(block, { allowLandmarkRegions: true }) || !this.isElementVisibleForTts(block)) return null;\n\n    const text = this.normalizeReadableText(block.innerText || block.textContent || '');\n    if (text.length < 2) return null;\n\n    return {\n      element: block,\n      text: text.slice(0, 30000)\n    };\n  },\n\n  setActiveSpeechTarget(element = null) {\n    if (this.ttsActiveTarget && this.ttsActiveTarget !== element) {\n      this.ttsActiveTarget.classList.remove('acc-tts-active-block');\n    }\n    this.ttsActiveTarget = element;\n    if (this.ttsActiveTarget) {\n      this.ttsActiveTarget.classList.add('acc-tts-active-block');\n    }\n  },\n\n  startTtsClickMode() {\n    if (typeof document === 'undefined' || this.ttsClickListener) return;\n    this.ttsClickListener = (event) => {\n      this.handleTtsClick(event);\n    };\n    document.addEventListener('click', this.ttsClickListener, true);\n    document.body?.classList.add('acc-tts-click-mode');\n  },\n\n  stopTtsClickMode() {\n    if (typeof document === 'undefined') return;\n    if (this.ttsClickListener) {\n      document.removeEventListener('click', this.ttsClickListener, true);\n      this.ttsClickListener = null;\n    }\n    document.body?.classList.remove('acc-tts-click-mode');\n    this.setActiveSpeechTarget(null);\n  },\n\n  handleTtsClick(event) {\n    if (!this.retrieveState('text-to-speech')) return;\n    const target = this.getSpeechTargetFromEvent(event);\n    if (!target) return;\n\n    this.setActiveSpeechTarget(target.element);\n    this.ttsTextCache = target.text;\n    this.startSpeechPlayback({ restart: true });\n  },\n\n  ensureTtsQueue() {\n    const text = this.ttsTextCache || this.getReadableContent();\n    if (!text) {\n      this.ttsQueue = [];\n      this.ttsQueueIndex = 0;\n      return false;\n    }\n    this.ttsTextCache = text;\n    this.ttsQueue = this.buildSpeechQueue(text);\n    this.ttsQueueIndex = 0;\n    return this.ttsQueue.length > 0;\n  },\n\n  speakNextTtsChunk(sessionId) {\n    if (!this.supportsSpeechSynthesis()) return;\n    if (sessionId !== this.ttsSessionId) return;\n\n    if (this.ttsQueueIndex >= this.ttsQueue.length) {\n      this.ttsStatus = 'stopped';\n      this.setActiveSpeechTarget(null);\n      return;\n    }\n\n    const synth = window.speechSynthesis;\n    const chunk = this.ttsQueue[this.ttsQueueIndex];\n    if (!chunk) {\n      this.ttsQueueIndex += 1;\n      this.speakNextTtsChunk(sessionId);\n      return;\n    }\n\n    const utterance = new window.SpeechSynthesisUtterance(chunk);\n    utterance.lang = this.normalizeSpeechLanguage(this.loadConfig().lang || 'en');\n    if (!this.ttsVoice || this.ttsVoice.lang?.toLowerCase() !== utterance.lang.toLowerCase()) {\n      this.ttsVoice = this.resolveSpeechVoice(utterance.lang);\n    }\n    if (this.ttsVoice) {\n      utterance.voice = this.ttsVoice;\n    }\n    utterance.rate = this.getNativeTtsRate();\n    utterance.pitch = this.getNativeTtsPitch();\n\n    utterance.onstart = () => {\n      if (sessionId !== this.ttsSessionId) return;\n      this.ttsStatus = 'reading';\n    };\n    utterance.onpause = () => {\n      if (sessionId !== this.ttsSessionId) return;\n      this.ttsStatus = 'paused';\n    };\n    utterance.onresume = () => {\n      if (sessionId !== this.ttsSessionId) return;\n      this.ttsStatus = 'reading';\n    };\n    utterance.onend = () => {\n      if (sessionId !== this.ttsSessionId) return;\n      this.ttsQueueIndex += 1;\n      this.speakNextTtsChunk(sessionId);\n    };\n    utterance.onerror = () => {\n      if (sessionId !== this.ttsSessionId) return;\n      this.ttsStatus = 'stopped';\n      this.setActiveSpeechTarget(null);\n    };\n\n    this.ttsUtterance = utterance;\n    synth.speak(utterance);\n  },\n\n  startNativeSpeechPlayback({ restart = false } = {}) {\n    if (!this.supportsSpeechSynthesis()) return;\n    const synth = window.speechSynthesis;\n\n    if (!restart && synth.paused) {\n      synth.resume();\n      this.ttsStatus = 'reading';\n      return;\n    }\n\n    const hasQueue = restart || !this.ttsQueue.length || this.ttsQueueIndex >= this.ttsQueue.length\n      ? this.ensureTtsQueue()\n      : true;\n    if (!hasQueue) {\n      this.stopSpeech();\n      return;\n    }\n\n    const sessionId = this.ttsSessionId + 1;\n    this.ttsSessionId = sessionId;\n    synth.cancel();\n    this.ttsStatus = 'reading';\n    this.speakNextTtsChunk(sessionId);\n  },\n\n  startSpeechPlayback({ restart = false } = {}) {\n    this.startNativeSpeechPlayback({ restart });\n  },\n\n  pauseSpeech() {\n    if (!this.supportsSpeechSynthesis()) return;\n    const synth = window.speechSynthesis;\n    if (synth.speaking && !synth.paused) {\n      synth.pause();\n      this.ttsStatus = 'paused';\n    }\n  },\n\n  resumeSpeech() {\n    if (!this.supportsSpeechSynthesis()) return;\n    const synth = window.speechSynthesis;\n    if (synth.paused) {\n      synth.resume();\n      this.ttsStatus = 'reading';\n      return;\n    }\n    this.startSpeechPlayback({ restart: false });\n  },\n\n  stopSpeech() {\n    const synth = this.supportsSpeechSynthesis() ? window.speechSynthesis : null;\n    this.ttsSessionId += 1;\n    if (synth && (synth.speaking || synth.paused)) {\n      synth.cancel();\n    }\n    this.ttsUtterance = null;\n    this.ttsQueueIndex = 0;\n    this.ttsStatus = 'stopped';\n    this.setActiveSpeechTarget(null);\n  },\n\n  enableTextToSpeech(enable = false) {\n    if (!this.supportsTextToSpeech()) return;\n    const isUserToggle = this.userInitiatedToggleKey === 'text-to-speech';\n\n    if (!enable) {\n      if (isUserToggle) this.announceTtsState(false);\n      this.stopSpeech();\n      this.stopTtsClickMode();\n      return;\n    }\n\n    const synth = window.speechSynthesis;\n    if (synth?.getVoices) {\n      synth.getVoices();\n    }\n\n    this.startTtsClickMode();\n    this.ttsStatus = 'idle';\n    if (isUserToggle) this.announceTtsState(true);\n  },\n\n  announceTtsState(active) {\n    if (!this.supportsTextToSpeech()) return;\n    const synth = window.speechSynthesis;\n    if (!synth) return;\n    const msg = active\n      ? this.translate('Text to Speech On')\n      : this.translate('Text to Speech Off');\n    synth.cancel();\n    const utterance = new SpeechSynthesisUtterance(msg);\n    const lang = this.normalizeSpeechLanguage(this.loadConfig().lang || 'en');\n    utterance.lang = lang;\n    const voice = this.resolveSpeechVoice(lang);\n    if (voice) {\n      utterance.voice = voice;\n    }\n    utterance.rate = this.getNativeTtsRate();\n    utterance.pitch = this.getNativeTtsPitch();\n    synth.speak(utterance);\n  },\n\n  ensureAnnotationLayer() {\n    if (this.annotationLayer && document.body.contains(this.annotationLayer)) {\n      return this.annotationLayer;\n    }\n    const layer = document.createElement('div');\n    layer.className = 'acc-annotation-layer acc-container';\n    layer.setAttribute('aria-hidden', 'true');\n    document.body.appendChild(layer);\n    this.annotationLayer = layer;\n    return layer;\n  },\n\n  resolveAnnotationTarget(selector) {\n    if (!selector || typeof selector !== 'string') return null;\n    try {\n      const element = document.querySelector(selector);\n      if (!element || element.closest('.acc-container')) return null;\n      return element;\n    } catch {\n      return null;\n    }\n  },\n\n  buildAnnotationEntries(results = {}) {\n    const violations = Array.isArray(results.violations) ? results.violations : [];\n    const entries = [];\n    const seen = new Set();\n\n    violations.forEach((violation) => {\n      const nodes = Array.isArray(violation.nodes) ? violation.nodes : [];\n      nodes.forEach((node) => {\n        const targets = Array.isArray(node.target) ? node.target : [];\n        const selector = targets.find((target) => typeof target === 'string' && target.trim().length);\n        if (!selector) return;\n        const key = `${selector}::${violation.id || violation.help || ''}`;\n        if (seen.has(key)) return;\n\n        const element = this.resolveAnnotationTarget(selector);\n        if (!element) return;\n        seen.add(key);\n        entries.push({\n          selector,\n          element,\n          impact: violation.impact || 'minor',\n          title: violation.help || this.translate('Issue'),\n          description: violation.description || '',\n          helpUrl: violation.helpUrl || '',\n          failureSummary: node.failureSummary || ''\n        });\n      });\n    });\n\n    return entries.slice(0, MAX_ANNOTATIONS);\n  },\n\n  createAnnotationMarker(annotation) {\n    const marker = document.createElement('button');\n    marker.type = 'button';\n    marker.className = 'acc-annotation-marker';\n    marker.dataset.impact = annotation.impact || 'minor';\n    marker.setAttribute('aria-label', annotation.title);\n    marker.title = annotation.title;\n    marker.innerHTML = '';\n\n    marker.addEventListener('click', (event) => {\n      event.preventDefault();\n      event.stopPropagation();\n      this.showAnnotationPopup(annotation, marker);\n    });\n\n    return marker;\n  },\n\n  positionAnnotationPopup(popup, marker) {\n    if (!popup || !marker) return;\n    const markerRect = marker.getBoundingClientRect();\n    const popupWidth = popup.offsetWidth || 300;\n    const popupHeight = popup.offsetHeight || 180;\n    const viewportWidth = window.innerWidth;\n    const viewportHeight = window.innerHeight;\n    const gap = 10;\n\n    let left = window.scrollX + markerRect.left + gap;\n    let top = window.scrollY + markerRect.bottom + gap;\n\n    if (left + popupWidth > window.scrollX + viewportWidth - gap) {\n      left = window.scrollX + viewportWidth - popupWidth - gap;\n    }\n    if (left < window.scrollX + gap) {\n      left = window.scrollX + gap;\n    }\n\n    if (top + popupHeight > window.scrollY + viewportHeight - gap) {\n      top = window.scrollY + markerRect.top - popupHeight - gap;\n    }\n    if (top < window.scrollY + gap) {\n      top = window.scrollY + gap;\n    }\n\n    popup.style.left = `${left}px`;\n    popup.style.top = `${top}px`;\n  },\n\n  clearAnnotationPopup() {\n    if (this.annotationPopup) {\n      this.annotationPopup.remove();\n      this.annotationPopup = null;\n    }\n  },\n\n  showAnnotationPopup(annotation, marker) {\n    if (!annotation || !marker || !this.annotationLayer) return;\n    this.clearAnnotationPopup();\n\n    const popup = document.createElement('div');\n    popup.className = 'acc-annotation-popup';\n    popup.innerHTML = `\n      <div class=\"acc-annotation-popup-header\">\n        <h3 class=\"acc-annotation-popup-title\">${this.escapeHtml(annotation.title)}</h3>\n        <button type=\"button\" class=\"acc-annotation-popup-close\" aria-label=\"${this.translate('Close')}\">${this.widgetIcons.close}</button>\n      </div>\n      <p><strong>${this.translate(this.capitalizeFirst(annotation.impact))}</strong></p>\n      <p>${this.escapeHtml(annotation.description)}</p>\n      ${annotation.failureSummary ? `<p><strong>${this.translate('Issue')}:</strong> ${this.escapeHtml(annotation.failureSummary)}</p>` : ''}\n      ${annotation.helpUrl ? `<p><a href=\"${annotation.helpUrl}\" target=\"_blank\" rel=\"noopener\">${this.translate('How to Fix')} →</a></p>` : ''}\n    `;\n    popup.__accMarker = marker;\n\n    const closeButton = popup.querySelector('.acc-annotation-popup-close');\n    closeButton?.addEventListener('click', () => this.clearAnnotationPopup());\n\n    this.annotationLayer.appendChild(popup);\n    this.annotationPopup = popup;\n    this.positionAnnotationPopup(popup, marker);\n  },\n\n  positionAnnotations() {\n    if (!Array.isArray(this.annotationItems) || !this.annotationItems.length) return;\n\n    this.annotationItems.forEach((item) => {\n      if (!item?.target || !item?.marker) return;\n      if (!document.contains(item.target)) {\n        item.marker.hidden = true;\n        return;\n      }\n\n      const rect = item.target.getBoundingClientRect();\n      const outOfView = (\n        rect.width <= 0 ||\n        rect.height <= 0 ||\n        rect.bottom < 0 ||\n        rect.top > window.innerHeight ||\n        rect.right < 0 ||\n        rect.left > window.innerWidth\n      );\n\n      if (outOfView) {\n        item.marker.hidden = true;\n        return;\n      }\n\n      item.marker.hidden = false;\n      item.marker.style.top = `${window.scrollY + rect.top + Math.min(16, rect.height / 2)}px`;\n      item.marker.style.left = `${window.scrollX + rect.right}px`;\n    });\n\n    if (this.annotationPopup?.__accMarker && !this.annotationPopup.__accMarker.hidden) {\n      this.positionAnnotationPopup(this.annotationPopup, this.annotationPopup.__accMarker);\n    }\n  },\n\n  enableAnnotations(enable = false) {\n    if (!enable) {\n      this.disableAnnotations();\n      return;\n    }\n\n    const requestId = ++this.annotationRequestId;\n    this.disableAnnotations({ cancelPending: false });\n    const layer = this.ensureAnnotationLayer();\n\n    this.runBackgroundAxeScan()\n      .then((results) => {\n        if (requestId !== this.annotationRequestId || !this.retrieveState('annotations')) {\n          return;\n        }\n        const annotations = this.buildAnnotationEntries(results);\n        this.annotationItems = annotations.map((annotation) => {\n          const marker = this.createAnnotationMarker(annotation);\n          layer.appendChild(marker);\n          return {\n            marker,\n            target: annotation.element,\n            data: annotation\n          };\n        });\n\n        if (!this.annotationRepositionHandler) {\n          this.annotationRepositionHandler = this.throttle(() => this.positionAnnotations(), 80);\n        }\n        window.addEventListener('scroll', this.annotationRepositionHandler, { passive: true });\n        window.addEventListener('resize', this.annotationRepositionHandler, { passive: true });\n\n        if (!this.annotationOutsideHandler) {\n          this.annotationOutsideHandler = (event) => {\n            if (!this.annotationPopup) return;\n            const clickedPopup = this.annotationPopup.contains(event.target);\n            const clickedMarker = event.target?.closest?.('.acc-annotation-marker');\n            if (!clickedPopup && !clickedMarker) {\n              this.clearAnnotationPopup();\n            }\n          };\n        }\n        document.addEventListener('click', this.annotationOutsideHandler, true);\n\n        this.positionAnnotations();\n      })\n      .catch((error) => {\n        console.warn('Failed to render annotations:', error);\n      });\n  },\n\n  disableAnnotations({ cancelPending = true } = {}) {\n    if (cancelPending) {\n      this.annotationRequestId += 1;\n    }\n    this.clearAnnotationPopup();\n\n    if (this.annotationOutsideHandler) {\n      document.removeEventListener('click', this.annotationOutsideHandler, true);\n    }\n    if (this.annotationRepositionHandler) {\n      window.removeEventListener('scroll', this.annotationRepositionHandler);\n      window.removeEventListener('resize', this.annotationRepositionHandler);\n    }\n\n    if (this.annotationLayer) {\n      this.annotationLayer.remove();\n      this.annotationLayer = null;\n    }\n\n    this.annotationItems = [];\n  },\n\n\n  clearSimpleLayoutDomMutations() {\n    if (this.simpleLayoutRoot) {\n      this.simpleLayoutRoot.classList.remove('acc-simple-layout-root');\n      this.simpleLayoutRoot = null;\n    }\n\n    if (Array.isArray(this.simpleLayoutHiddenElements)) {\n      this.simpleLayoutHiddenElements.forEach((element) => {\n        if (element && element.classList) {\n          element.classList.remove('acc-simple-layout-hidden');\n        }\n      });\n    }\n    this.simpleLayoutHiddenElements = [];\n  },\n\n  applySimpleLayoutDomMutations() {\n    const root = this.getPrimaryContentRoot();\n    if (!root || !document.body) return;\n\n    this.simpleLayoutRoot = root;\n    root.classList.add('acc-simple-layout-root');\n\n    const hiddenElements = [];\n    Array.from(document.body.children).forEach((child) => {\n      if (!(child instanceof Element)) return;\n      if (child.classList.contains('acc-container')) return;\n      if (child === root || child.contains(root)) return;\n      child.classList.add('acc-simple-layout-hidden');\n      hiddenElements.push(child);\n    });\n\n    const clutterSelectors = [\n      'aside',\n      'nav',\n      'form',\n      'footer',\n      '[role=\"complementary\"]',\n      '[role=\"search\"]',\n      '[role=\"contentinfo\"]',\n      '[aria-hidden=\"true\"]',\n      '[class*=\"cookie\"]',\n      '[id*=\"cookie\"]',\n      '[class*=\"banner\"]',\n      '[id*=\"banner\"]',\n      '[class*=\"popup\"]',\n      '[id*=\"popup\"]',\n      '[class*=\"modal\"]',\n      '[id*=\"modal\"]',\n      '[class*=\"advert\"]',\n      '[id*=\"advert\"]',\n      '[class*=\"ads\"]',\n      '[id*=\"ads\"]',\n      '[class*=\"sidebar\"]',\n      '[id*=\"sidebar\"]',\n      '[class*=\"social\"]',\n      '[id*=\"social\"]',\n      '[class*=\"share\"]',\n      '[id*=\"share\"]',\n      '[class*=\"newsletter\"]',\n      '[id*=\"newsletter\"]',\n      '[class*=\"related\"]',\n      '[id*=\"related\"]',\n      '[class*=\"comment\"]',\n      '[id*=\"comment\"]',\n      '[class*=\"footer\"]',\n      '[id*=\"footer\"]',\n      '[class*=\"promo\"]',\n      '[id*=\"promo\"]'\n    ].join(',');\n\n    root.querySelectorAll(clutterSelectors).forEach((element) => {\n      if (!(element instanceof Element)) return;\n      if (element.closest('.acc-container')) return;\n      if (element === root) return;\n      element.classList.add('acc-simple-layout-hidden');\n      hiddenElements.push(element);\n    });\n\n    this.simpleLayoutHiddenElements = hiddenElements;\n  },\n\n  enableSimpleLayout(enable = false) {\n    const S = 'body.acc-simple-layout-enabled';\n    const R = `${S} .acc-simple-layout-root`;\n    const X = ':not(.acc-container):not(.acc-container *)';\n    const config = {\n      id: 'simple-layout',\n      css: `\n        /* ── Body & root container ── */\n        ${S} {\n          background: #fff !important;\n        }\n\n        ${S} .acc-simple-layout-hidden {\n          display: none !important;\n        }\n\n        ${R} {\n          max-width: 72ch !important;\n          margin: 0 auto !important;\n          padding: clamp(20px, 4vw, 40px) 20px !important;\n          position: relative !important;\n          border-radius: 0 !important;\n          box-shadow: none !important;\n        }\n\n        /* ── Universal decoration strip ── */\n        ${R} :where(*)${X} {\n          background-color: transparent !important;\n          background-image: none !important;\n          box-shadow: none !important;\n          text-shadow: none !important;\n          border-color: transparent !important;\n        }\n\n        /* ── Layout linearization ── */\n        ${R} :where(div, section, article, header, main, footer, figure, figcaption, details, summary, hgroup, search)${X} {\n          display: block !important;\n          position: static !important;\n          float: none !important;\n          transform: none !important;\n          columns: auto !important;\n          column-count: auto !important;\n          width: auto !important;\n          min-width: 0 !important;\n          max-width: 100% !important;\n          margin-left: 0 !important;\n          margin-right: 0 !important;\n          padding-left: 0 !important;\n          padding-right: 0 !important;\n        }\n\n        /* ── Color reset ── */\n        ${R} :where(h1, h2, h3, h4, h5, h6)${X} {\n          color: #111 !important;\n        }\n\n        ${R} :where(p, li, dt, dd, td, th, span, blockquote, figcaption, label, summary, details)${X} {\n          color: #222 !important;\n        }\n\n        ${R} :where(a)${X} {\n          color: #1a0dab !important;\n        }\n\n        ${R} :where(a:visited)${X} {\n          color: #681da8 !important;\n        }\n\n        /* ── Typography ── */\n        ${R} :where(*)${X} {\n          font-family: system-ui, -apple-system, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif !important;\n        }\n\n        ${R} :where(p, li, dt, dd, blockquote, figcaption, td, th, label, summary)${X} {\n          font-size: clamp(1rem, 0.95rem + 0.25vw, 1.125rem) !important;\n          line-height: 1.8 !important;\n          letter-spacing: 0.01em !important;\n          max-width: 70ch !important;\n        }\n\n        ${R} :where(h1)${X} {\n          font-size: 2em !important;\n          line-height: 1.2 !important;\n          margin: 0.67em 0 !important;\n          font-weight: 700 !important;\n        }\n\n        ${R} :where(h2)${X} {\n          font-size: 1.5em !important;\n          line-height: 1.25 !important;\n          margin: 0.83em 0 !important;\n          font-weight: 700 !important;\n        }\n\n        ${R} :where(h3)${X} {\n          font-size: 1.25em !important;\n          line-height: 1.3 !important;\n          margin: 1em 0 !important;\n          font-weight: 600 !important;\n        }\n\n        ${R} :where(h4, h5, h6)${X} {\n          font-size: 1.1em !important;\n          line-height: 1.35 !important;\n          margin: 1em 0 !important;\n          font-weight: 600 !important;\n        }\n\n        /* ── Decorative images hidden ── */\n        ${R} :where(img[role=\"presentation\"], img[alt=\"\"], img:not([alt]), svg[aria-hidden=\"true\"])${X} {\n          display: none !important;\n        }\n\n        /* ── Meaningful borders restored ── */\n        ${R} :where(hr)${X} {\n          border: none !important;\n          border-top: 1px solid #d1d5db !important;\n          margin: 1.5em 0 !important;\n        }\n\n        ${R} :where(blockquote)${X} {\n          border-left: 4px solid #d1d5db !important;\n          padding-left: 1em !important;\n          margin-left: 0 !important;\n          font-style: italic !important;\n        }\n\n        ${R} :where(table)${X} {\n          border-collapse: collapse !important;\n          max-width: 100% !important;\n          overflow-x: auto !important;\n          display: table !important;\n        }\n\n        ${R} :where(th, td)${X} {\n          border: 1px solid #d1d5db !important;\n          padding: 8px 12px !important;\n          text-align: left !important;\n        }\n\n        ${R} :where(th)${X} {\n          font-weight: 600 !important;\n          background: #f8f9fa !important;\n        }\n\n        /* ── Lists ── */\n        ${R} :where(ul, ol)${X} {\n          padding-left: 1.5em !important;\n          margin: 0.75em 0 !important;\n        }\n\n        ${R} :where(li)${X} {\n          display: list-item !important;\n          margin: 0.25em 0 !important;\n        }\n\n        /* ── Code blocks ── */\n        ${R} :where(pre)${X} {\n          background: #f6f8fa !important;\n          border-radius: 6px !important;\n          padding: 1em !important;\n          overflow-x: auto !important;\n          max-width: 100% !important;\n        }\n\n        ${R} :where(code, kbd, samp)${X} {\n          font-family: ui-monospace, \"SFMono-Regular\", \"SF Mono\", Menlo, Consolas, \"Liberation Mono\", monospace !important;\n          font-size: 0.9em !important;\n        }\n\n        ${R} :where(code):not(pre code)${X} {\n          background: #f0f2f5 !important;\n          padding: 0.15em 0.4em !important;\n          border-radius: 3px !important;\n        }\n\n        /* ── Empty wrapper collapse ── */\n        ${R} :where(div:empty)${X} {\n          display: none !important;\n        }\n\n        /* ── Media ── */\n        ${R} :where(img, video, iframe)${X} {\n          max-width: 100% !important;\n          height: auto !important;\n          border-radius: 4px !important;\n        }\n      `\n    };\n\n    this.applyToolStyle({ ...config, enable });\n    document.body?.classList.toggle('acc-simple-layout-enabled', !!enable);\n\n    this.clearSimpleLayoutDomMutations();\n    if (enable) {\n      this.applySimpleLayoutDomMutations();\n    }\n  },\n\n  applyEnhancements() {\n      const { states } = this.loadConfig();\n      // Handle font size scaling\n      const hasTextScaleState = !!(states && Object.prototype.hasOwnProperty.call(states, 'text-scale'));\n      if (hasTextScaleState) {\n        const storedScale = states['text-scale'] === false ? 1 : states['text-scale'];\n        const appliedScale = this.setTextScaleFromPercent(storedScale, { persist: false });\n        this.syncTextScaleControlUI(document.querySelector('.acc-menu'), appliedScale);\n      } else {\n        this.textScaleIndex = 0;\n        if (this.multiLevelFeatures['text-scale']) {\n          this.multiLevelFeatures['text-scale'].currentIndex = -1;\n        }\n        this.scaleText(1);\n        this.syncTextScaleControlUI(document.querySelector('.acc-menu'), 1);\n      }\n      // Apply other enhancements\n      this.concealImages(states && states['hide-images']);\n      this.highlightTitles(states && states['highlight-title']);\n      this.highlightLinks(states && states['highlight-links']);\n      this.adjustLetterSpacing(states && states['letter-spacing']);\n      this.adjustLineSpacing(states && states['line-spacing']);\n      this.enableBoldText(states && states['bold-text']);\n      this.enableReadableText(states && states['readable-text']);\n      this.enableReadingAid(states && states['reading-aid']);\n      this.pauseMotion(states && states['pause-motion']);\n      this.enableLargePointer(states && states['large-pointer']);\n      this.enableHighContrastMode(states && states['high-contrast-mode']);\n      this.enableAnnotations(states && states['annotations']);\n      this.enableTextToSpeech(states && states['text-to-speech']);\n      this.enableSimpleLayout(states && states['simple-layout']);\n    },\n\n  isColorFilterKey(key) {\n      return Array.isArray(this.colorFilterKeys) && this.colorFilterKeys.includes(key);\n    },\n\n  getActiveColorFilterKey(states = this.widgetConfig.states) {\n      if (!this.colorFilterKeys || !this.colorFilterKeys.length) return null;\n      if (!states) return this.activeColorFilterKey || null;\n      for (const key of this.colorFilterKeys) {\n        if (states[key]) {\n          return key;\n        }\n      }\n      return null;\n    },\n\n  setColorFilterUI(menu, activeKey = null) {\n      if (!menu || !menu.querySelectorAll) return;\n      const contrastFeature = this.multiLevelFeatures?.['contrast-toggle'];\n      const contrastButton = menu.querySelector('.acc-btn[data-key=\"contrast-toggle\"]');\n      if (contrastFeature) {\n        const contrastIndex = contrastFeature.values.indexOf(activeKey);\n        contrastFeature.currentIndex = contrastIndex;\n        this.updateContrastToggleButton(contrastButton, contrastIndex);\n        if (contrastButton) {\n          const isContrastActive = contrastIndex >= 0;\n          contrastButton.classList.toggle('acc-selected', isContrastActive);\n          contrastButton.setAttribute('aria-pressed', isContrastActive ? 'true' : 'false');\n          const indicator = contrastButton.querySelector('.acc-progress-indicator[data-feature=\"contrast-toggle\"]');\n          if (indicator) {\n            const dots = indicator.querySelectorAll('.acc-progress-dot');\n            dots.forEach((dot, index) => {\n              dot.classList.toggle('active', index === contrastIndex);\n            });\n          }\n        }\n      }\n      const saturationFeature = this.multiLevelFeatures?.['saturation-toggle'];\n      const saturationButton = menu.querySelector('.acc-btn[data-key=\"saturation-toggle\"]');\n      if (saturationFeature) {\n        const saturationIndex = saturationFeature.values.indexOf(activeKey);\n        saturationFeature.currentIndex = saturationIndex;\n        this.updateSaturationToggleButton(saturationButton, saturationIndex);\n        if (saturationButton) {\n          const isSaturationActive = saturationIndex >= 0;\n          saturationButton.classList.toggle('acc-selected', isSaturationActive);\n          saturationButton.setAttribute('aria-pressed', isSaturationActive ? 'true' : 'false');\n          const indicator = saturationButton.querySelector('.acc-progress-indicator[data-feature=\"saturation-toggle\"]');\n          if (indicator) {\n            const dots = indicator.querySelectorAll('.acc-progress-dot');\n            dots.forEach((dot, index) => {\n              dot.classList.toggle('active', index === saturationIndex);\n            });\n          }\n        }\n      }\n      this.colorFilterKeys.forEach(filterKey => {\n        const button = menu.querySelector(`.acc-btn[data-key=\"${filterKey}\"]`);\n        if (!button) return;\n        const isActive = filterKey === activeKey;\n        button.classList.toggle('acc-selected', isActive);\n        button.setAttribute('aria-pressed', isActive ? 'true' : 'false');\n      });\n    },\n\n  updateColorFilterState(activeKey = null, source = 'user') {\n      if (!this.colorFilterKeys || !this.colorFilterKeys.length) {\n        this.activeColorFilterKey = null;\n        return;\n      }\n      const states = this.widgetConfig.states || {};\n      const payload = {};\n      let requiresUpdate = false;\n      this.colorFilterKeys.forEach(filterKey => {\n        const rawCurrent = states[filterKey];\n        const shouldBeActive = activeKey === filterKey;\n        if (shouldBeActive) {\n          if (rawCurrent !== true) {\n            payload[filterKey] = true;\n            requiresUpdate = true;\n          }\n        } else if (rawCurrent) {\n          payload[filterKey] = false;\n          requiresUpdate = true;\n        }\n      });\n      if (requiresUpdate) {\n        this.updateState(payload, { source });\n      }\n      this.activeColorFilterKey = activeKey;\n    },\n\n  computeFilteredBodyColor(filterKey) {\n      const bg = window.getComputedStyle(document.body).backgroundColor;\n      const m = bg.match(/rgba?\\(\\s*(\\d+),\\s*(\\d+),\\s*(\\d+)/);\n      if (!m) return null;\n      let r = +m[1], g = +m[2], b = +m[3];\n      const clamp = (v) => Math.min(255, Math.max(0, Math.round(v)));\n\n      switch (filterKey) {\n        case 'invert-colors':\n          r = 255 - r; g = 255 - g; b = 255 - b;\n          break;\n        case 'dark-contrast': {\n          // filter: contrast(150%) brightness(0.8) — applied left to right\n          r = 128 + (r - 128) * 1.5; g = 128 + (g - 128) * 1.5; b = 128 + (b - 128) * 1.5;\n          r *= 0.8; g *= 0.8; b *= 0.8;\n          break;\n        }\n        case 'light-contrast': {\n          // filter: contrast(125%) brightness(1.2)\n          r = 128 + (r - 128) * 1.25; g = 128 + (g - 128) * 1.25; b = 128 + (b - 128) * 1.25;\n          r *= 1.2; g *= 1.2; b *= 1.2;\n          break;\n        }\n        case 'low-saturation': {\n          // filter: saturate(50%) — use standard saturate matrix with s=0.5\n          const s = 0.5;\n          const nr = (0.213 + 0.787 * s) * r + (0.715 - 0.715 * s) * g + (0.072 - 0.072 * s) * b;\n          const ng = (0.213 - 0.213 * s) * r + (0.715 + 0.285 * s) * g + (0.072 - 0.072 * s) * b;\n          const nb = (0.213 - 0.213 * s) * r + (0.715 - 0.715 * s) * g + (0.072 + 0.928 * s) * b;\n          r = nr; g = ng; b = nb;\n          break;\n        }\n        case 'high-saturation': {\n          // filter: saturate(200%) — use standard saturate matrix with s=2\n          const s2 = 2;\n          const hr = (0.213 + 0.787 * s2) * r + (0.715 - 0.715 * s2) * g + (0.072 - 0.072 * s2) * b;\n          const hg = (0.213 - 0.213 * s2) * r + (0.715 + 0.285 * s2) * g + (0.072 - 0.072 * s2) * b;\n          const hb = (0.213 - 0.213 * s2) * r + (0.715 - 0.715 * s2) * g + (0.072 + 0.928 * s2) * b;\n          r = hr; g = hg; b = hb;\n          break;\n        }\n        default:\n          return null;\n      }\n      r = clamp(r); g = clamp(g); b = clamp(b);\n      // Skip if the result is the same as the original (no visible change)\n      if (r === +m[1] && g === +m[2] && b === +m[3]) return null;\n      return `rgb(${r},${g},${b})`;\n    },\n\n  applyVisualFilters() {\n      const { states } = this.loadConfig();\n      const activeKey = this.getActiveColorFilterKey(states);\n      this.activeColorFilterKey = activeKey;\n  \n      if (!activeKey) {\n        const style = document.getElementById('acc-filter-style');\n        if (style) style.remove();\n        return;\n      }\n      const filter = this.visualFilters[activeKey];\n      if (!filter) {\n        const style = document.getElementById('acc-filter-style');\n        if (style) style.remove();\n        return;\n      }\n      const adjustedFilter = {\n        ...filter,\n        selector: filter.selector || 'body > *:not(.acc-container):not(.acc-rg-container):not(#acc-skip-link)'\n      };\n      let css = this.buildCSS(adjustedFilter);\n\n      // Compute a filtered body background so the body itself matches\n      // the visual filter applied to its children.\n      const filteredBg = this.computeFilteredBodyColor(activeKey);\n      if (filteredBg) {\n        css += `body{background-color:${filteredBg}!important;}`;\n      }\n\n      this.injectStyle('acc-filter-style', css);\n    },\n\n  cycleTextScale(enable = false) {\n      if (enable) {\n        this.textScaleIndex = (this.textScaleIndex + 1) % this.textScaleValues.length;\n        if (this.multiLevelFeatures['text-scale']) {\n          this.multiLevelFeatures['text-scale'].currentIndex = this.textScaleIndex;\n        }\n      } else {\n        this.textScaleIndex = 0;\n        if (this.multiLevelFeatures['text-scale']) {\n          this.multiLevelFeatures['text-scale'].currentIndex = -1;\n        }\n      }\n      const progressIndicator = document.querySelector(`.acc-progress-indicator[data-feature=\"text-scale\"]`);\n      if (progressIndicator) {\n        const dots = progressIndicator.querySelectorAll('.acc-progress-dot');\n        dots.forEach(dot => dot.classList.remove('active'));\n        if (enable && this.textScaleIndex < dots.length) {\n          dots[this.textScaleIndex].classList.add('active');\n        }\n      }\n      const multiply = enable ? this.textScaleValues[this.textScaleIndex] : 1;\n      this.scaleText(multiply);\n      this.updateState({ 'text-scale': multiply });\n      return this.textScaleIndex;\n    },\n\n  cycleMultiLevelFeature(featureKey, button) {\n      const feature = this.multiLevelFeatures[featureKey];\n      if (!feature || !button) return;\n\n      if (featureKey === 'contrast-toggle' || featureKey === 'saturation-toggle') {\n        const newIndex = feature.currentIndex + 1;\n        const newActiveKey = newIndex >= feature.levels ? null : feature.values[newIndex];\n        this.updateColorFilterState(newActiveKey);\n        this.setColorFilterUI(button.closest('.acc-menu'), newActiveKey);\n        this.applyVisualFilters();\n        return;\n      }\n\n      const newIndex = feature.currentIndex + 1;\n      if (newIndex >= feature.levels) {\n        feature.currentIndex = -1;\n        button.classList.remove('acc-selected');\n        button.setAttribute('aria-pressed', 'false');\n        this.updateState({ [featureKey]: featureKey === 'text-scale' ? 1 : false });\n        if (featureKey === 'text-scale') {\n          this.textScaleIndex = 0;\n        }\n      } else {\n        feature.currentIndex = newIndex;\n        button.classList.add('acc-selected');\n        button.setAttribute('aria-pressed', 'true');\n        const newValue = feature.values[newIndex];\n        this.updateState({ [featureKey]: newValue });\n        if (featureKey === 'text-scale') {\n          this.textScaleIndex = newIndex;\n        }\n      }\n      const indicator = button.querySelector(`.acc-progress-indicator[data-feature=\"${featureKey}\"]`);\n      if (indicator) {\n        const dots = indicator.querySelectorAll('.acc-progress-dot');\n        dots.forEach((dot, i) => {\n          dot.classList.toggle('active', i === feature.currentIndex);\n        });\n      }\n      if (featureKey === 'text-scale') {\n        const multiply = feature.currentIndex >= 0 ? feature.values[feature.currentIndex] : 1;\n        this.scaleText(multiply);\n      } else {\n        this.applyVisualFilters();\n      }\n    },\n\n  resetEnhancements() {\n      this.saveConfig({ states: {}, systemDefaults: {} });\n      this.textScaleIndex = 0;\n      this.activeColorFilterKey = null;\n      Object.keys(this.multiLevelFeatures).forEach(key => {\n        this.multiLevelFeatures[key].currentIndex = -1;\n      });\n      const selected = document.querySelectorAll(\".acc-selected\");\n      selected.forEach(el => {\n        el.classList.remove(\"acc-selected\");\n        el.setAttribute('aria-pressed', 'false');\n      });\n      const indicators = document.querySelectorAll('.acc-progress-indicator');\n      indicators.forEach(indicator => {\n        const dots = indicator.querySelectorAll('.acc-progress-dot');\n        dots.forEach(dot => dot.classList.remove('active'));\n      });\n      const menu = document.querySelector('.acc-menu');\n      if (menu) {\n        this.setColorFilterUI(menu, null);\n        this.syncTextScaleControlUI(menu, 1);\n      }\n      \n      // Remove focus from active element to fix the persistent focus ring bug\n      if (document.activeElement) {\n        document.activeElement.blur();\n      }\n      const styleIds = [\n        'acc-bold-text',\n        'acc-letter-spacing',\n        'acc-line-spacing',\n        'acc-large-pointer',\n        'acc-highlight-links',\n        'acc-highlight-title',\n        'acc-readable-text',\n        'acc-pause-motion',\n        'acc-hide-images',\n        'acc-filter-style',\n        'acc-simple-layout'\n      ];\n      styleIds.forEach(id => {\n        const style = document.getElementById(id);\n        if (style) style.remove();\n      });\n      this.clearSimpleLayoutDomMutations();\n      document.documentElement.classList.remove(\n        'acc-filter',\n        'acc-saturation',\n        'acc-bold-text',\n        'acc-letter-spacing',\n        'acc-line-spacing',\n        'acc-large-pointer',\n        'acc-highlight-links',\n        'acc-highlight-title',\n        'acc-readable-text',\n        'acc-pause-motion',\n        'acc-hide-images',\n        'acc-high-contrast-mode',\n        'acc-simple-layout'\n      );\n      document.body?.classList.remove('acc-simple-layout-enabled');\n      document.body?.classList.remove('acc-high-contrast-mode');\n      this.disconnectTextScaleObserver();\n      this.currentTextScaleMultiplier = 1;\n      const scaledElements = document.querySelectorAll('[data-acc-baseSize]');\n      scaledElements.forEach(el => {\n        if (!(el instanceof Element) || this.shouldSkipScaling(el)) return;\n        el.style.fontSize = '';\n        el.removeAttribute('data-acc-baseSize');\n      });\n      let guide = this.findElement('.acc-rg-container');\n      if (guide) {\n        guide.remove();\n        if (window.__accweb__scrollGuide) {\n          document.removeEventListener('mousemove', window.__accweb__scrollGuide);\n          delete window.__accweb__scrollGuide;\n        }\n      }\n      this.disableAnnotations();\n      this.stopSpeech();\n      this.stopTtsClickMode();\n      this.clearSystemPreferenceListeners();\n      this.detectSystemPreferences();\n      this.setupMediaQueryListeners();\n      this.updateViolationBubble(this.axeScanResults);\n    },\n\n};\n","/** @typedef {import('./index.js').default} AccessibleWebWidget */\n\n/** @type {{ [methodName: string]: (this: AccessibleWebWidget, ...args: any[]) => any }} */\nexport const uiMethods = {\n\n  translate(label) {\n      const { lang } = this.loadConfig();\n      const dictionary = this.translations[lang] || this.translations[\"en\"];\n      return dictionary[label] || label;\n    },\n\n  getLanguageCountryLabel(languageCode) {\n      const countryByLanguage = {\n        en: 'USA',\n        it: 'Italy',\n        fr: 'France',\n        de: 'Germany',\n        es: 'Spain',\n        ru: 'Russia',\n        pl: 'Poland',\n        ro: 'Romania',\n        nl: 'Netherlands',\n        uk: 'Ukraine'\n      };\n      return countryByLanguage[languageCode] || String(languageCode || '').toUpperCase();\n    },\n\n  getLanguageFlag(languageCode) {\n      const countryCodeByLanguage = {\n        en: 'US',\n        it: 'IT',\n        fr: 'FR',\n        de: 'DE',\n        es: 'ES',\n        ru: 'RU',\n        pl: 'PL',\n        ro: 'RO',\n        nl: 'NL',\n        uk: 'UA'\n      };\n      const countryCode = (countryCodeByLanguage[languageCode] || String(languageCode || '').slice(0, 2)).toUpperCase();\n      if (!/^[A-Z]{2}$/.test(countryCode)) {\n        return '';\n      }\n      return String.fromCodePoint(...countryCode.split('').map(char => 127397 + char.charCodeAt(0)));\n    },\n\n  formatLanguageLabel(language) {\n      if (!language) return 'English (USA)';\n      const baseName = String(language.label || language.code || '')\n        .split('(')[0]\n        .trim() || String(language.code || 'en').toUpperCase();\n      return `${baseName} (${this.getLanguageCountryLabel(language.code)})`;\n    },\n\n  getWidgetIconMarkup(iconKey) {\n      const normalized = typeof iconKey === 'string' ? iconKey.trim().toLowerCase() : '';\n      const variants = this.widgetIcons?.accessibilityVariants || {};\n      return variants[normalized] || variants.default || this.widgetIcons.accessibility;\n    },\n\n  throttle(func, limit) {\n      let inThrottle;\n      return function (...args) {\n        if (!inThrottle) {\n          func.apply(this, args);\n          inThrottle = true;\n          setTimeout(() => (inThrottle = false), limit);\n        }\n      };\n    },\n\n  getFocusableElements(root) {\n      if (!root) return [];\n      const selectors = [\n        'a[href]',\n        'button:not([disabled])',\n        'input:not([disabled])',\n        'textarea:not([disabled])',\n        'select:not([disabled])',\n        '[tabindex]:not([tabindex=\"-1\"])'\n      ].join(',');\n      const hasDocument = typeof document !== 'undefined';\n      const activeElement = hasDocument ? document.activeElement : null;\n      return Array.from(root.querySelectorAll(selectors)).filter(el => {\n        if (el.hasAttribute('disabled')) return false;\n        if (el.getAttribute('aria-hidden') === 'true') return false;\n        if (el.closest('[aria-hidden=\"true\"]')) return false;\n        const rect = el.getBoundingClientRect();\n        const style = typeof window !== 'undefined' && window.getComputedStyle ? window.getComputedStyle(el) : { visibility: 'visible', display: 'block' };\n        const hasSize = rect.width > 0 || rect.height > 0;\n        const isVisible = (hasSize || (hasDocument && el === activeElement)) && style.visibility !== 'hidden' && style.display !== 'none';\n        return isVisible;\n      });\n    },\n\n  openMenu(menuContainer, toggleBtn) {\n      if (!menuContainer) return;\n      const menu = this.findElement('.acc-menu', menuContainer);\n      this.activeMenuContainer = menuContainer;\n      this.activeMenuToggle = toggleBtn || this.activeMenuToggle;\n      this.previousFocus = document.activeElement && typeof document.activeElement.focus === 'function'\n        ? document.activeElement\n        : null;\n  \n      menuContainer.style.display = 'block';\n      if (menu) {\n        menu.setAttribute('aria-hidden', 'false');\n        menu.setAttribute('aria-modal', 'true');\n        if (!menu.hasAttribute('tabindex')) {\n          menu.setAttribute('tabindex', '-1');\n        }\n      }\n  \n      if (this.activeMenuToggle) {\n        this.activeMenuToggle.setAttribute('aria-expanded', 'true');\n      }\n  \n      const focusable = this.getFocusableElements(menuContainer);\n      if (focusable.length) {\n        focusable[0].focus();\n      } else if (menu) {\n        menu.focus();\n      }\n  \n      if (this.menuKeyListener) {\n        document.removeEventListener('keydown', this.menuKeyListener, true);\n      }\n  \n      this.menuKeyListener = (event) => {\n        if (!this.activeMenuContainer) return;\n        if (event.key === 'Escape' || event.key === 'Esc') {\n          event.preventDefault();\n          this.closeMenu(this.activeMenuContainer);\n          return;\n        }\n        if (event.key === 'Tab') {\n          const focusables = this.getFocusableElements(this.activeMenuContainer);\n          if (!focusables.length) {\n            event.preventDefault();\n            return;\n          }\n          const first = focusables[0];\n          const last = focusables[focusables.length - 1];\n          if (event.shiftKey) {\n            if (document.activeElement === first) {\n              event.preventDefault();\n              last.focus();\n            }\n          } else if (document.activeElement === last) {\n            event.preventDefault();\n            first.focus();\n          }\n        }\n      };\n  \n      document.addEventListener('keydown', this.menuKeyListener, true);\n    },\n\n  closeMenu(menuContainer, toggleBtn) {\n      const targetContainer = menuContainer || this.activeMenuContainer;\n      if (!targetContainer) return;\n      const menu = this.findElement('.acc-menu', targetContainer);\n      targetContainer.style.display = 'none';\n      if (menu) {\n        menu.setAttribute('aria-hidden', 'true');\n        menu.setAttribute('aria-modal', 'false');\n      }\n\n      const langModal = this.findElement('#acc-lang-modal', targetContainer);\n      if (langModal) {\n        langModal.setAttribute('hidden', '');\n      }\n\n      const langToggle = this.findElement('.acc-footer-lang-toggle', targetContainer);\n      if (langToggle) {\n        langToggle.setAttribute('aria-expanded', 'false');\n      }\n\n      const langSearch = this.findElement('#acc-lang-search', targetContainer);\n      if (langSearch) {\n        langSearch.value = '';\n      }\n\n      targetContainer.querySelectorAll('.acc-lang-item').forEach(item => {\n        item.style.display = '';\n      });\n  \n      if (this.menuKeyListener) {\n        document.removeEventListener('keydown', this.menuKeyListener, true);\n        this.menuKeyListener = null;\n      }\n  \n      const toggle = toggleBtn || this.activeMenuToggle;\n      if (toggle) {\n        toggle.setAttribute('aria-expanded', 'false');\n      }\n  \n      const focusTarget = toggle || this.previousFocus;\n      if (focusTarget && typeof focusTarget.focus === 'function') {\n        focusTarget.focus();\n      }\n\n      this.stopSpeech();\n  \n      this.activeMenuContainer = null;\n      this.activeMenuToggle = null;\n      this.previousFocus = null;\n    },\n\n  renderOptions(options, optionClass) {\n      let html = '';\n      for (let i = 0; i < options.length; i++) {\n        const opt = options[i];\n        if (opt.requiresSpeechSynthesis && !this.supportsTextToSpeech()) {\n          continue;\n        }\n        const isMultiLevel = opt.multiLevel === true;\n        const mergedOptionClass = [optionClass, opt.optionClass].filter(Boolean).join(' ');\n        let progressIndicator = '';\n        if (isMultiLevel) {\n          const featureData = this.multiLevelFeatures[opt.key];\n          if (featureData) {\n            progressIndicator = `<div class=\"acc-progress-indicator\" data-feature=\"${opt.key}\">`;\n            for (let j = 0; j < featureData.levels; j++) {\n              const isActive = featureData.currentIndex === j;\n              progressIndicator += `<div class=\"acc-progress-dot${isActive ? ' active' : ''}\" data-level=\"${j}\"> </div>`;\n            }\n            progressIndicator += ` </div>`;\n          }\n        }\n        html += `<button \n          class=\"acc-btn ${mergedOptionClass} ${this.multiLevelFeatures[opt.key]?.currentIndex >= 0 ? 'acc-selected' : ''}\" \n          type=\"button\" \n          data-key=\"${opt.key}\" \n          data-multi-level=\"${isMultiLevel}\"\n          title=\"${opt.label}\"\n          aria-label=\"${opt.label}\"\n          aria-pressed=\"${this.multiLevelFeatures[opt.key]?.currentIndex >= 0 || false}\"\n          aria-controls=\"acc-menu-content\">\n            ${opt.icon}\n            <span class=\"acc-label\">${opt.label}</span>\n            ${progressIndicator}\n          </button>`;\n      }\n      return html;\n    },\n\n  renderTextScaleControl(scaleValue = 1) {\n      const percent = this.getTextScalePercent(scaleValue);\n      const min = Number(this.textScaleMinPercent) || 80;\n      const max = Number(this.textScaleMaxPercent) || 150;\n      const step = Number(this.textScaleStepPercent) || 5;\n      const progress = ((percent - min) / (max - min)) * 100;\n\n      return `\n        <div class=\"acc-text-scale-control\" data-key=\"text-scale\">\n          <div class=\"acc-text-scale-meta\">\n            <span class=\"acc-text-scale-icon\" aria-hidden=\"true\">${this.widgetIcons.adjustFontSize}</span>\n            <span class=\"acc-label\" data-acc-text=\"Font Size\">Font Size</span>\n            <span class=\"acc-text-scale-percent\">${percent}%</span>\n          </div>\n          <input\n            type=\"range\"\n            class=\"acc-text-scale-range\"\n            min=\"${min}\"\n            max=\"${max}\"\n            step=\"${step}\"\n            value=\"${percent}\"\n            data-acc-text=\"Font Size\"\n            aria-label=\"Font Size\"\n            style=\"--acc-text-scale-progress: ${Math.max(0, Math.min(100, progress))}%\">\n        </div>\n      `;\n    },\n\n  getTranslatedText(el, defaultValue) {\n      let text = el.getAttribute(\"data-acc-text\");\n      if (!text && defaultValue) {\n        text = defaultValue;\n        el.setAttribute(\"data-acc-text\", text);\n      }\n      return this.translate(text);\n    },\n\n  translateMenuUI(menu) {\n      menu.querySelectorAll(\".acc-section-title, .acc-label\").forEach(el => {\n        el.innerText = this.getTranslatedText(el, el.innerText.trim());\n      });\n      menu.querySelectorAll(\"[title]\").forEach(el => {\n        el.setAttribute(\"title\", this.getTranslatedText(el, el.getAttribute(\"title\")));\n      });\n      menu.querySelectorAll(\"[aria-label]\").forEach(el => {\n        el.setAttribute(\"aria-label\", this.getTranslatedText(el, el.getAttribute(\"aria-label\")));\n      });\n      this.updateSkipLinkLabel();\n    },\n\n  displayMenu({ container, lang, position = 'bottom-right', offset = [20, 20], size, icon }) {\n      try {\n        this.applyThemeVariables();\n        this.registerStaticStyles();\n\n        const activeLanguageCode = String(lang || 'en').split(/[_-]/)[0].toLowerCase();\n\n        const menuTemplate = `\n        <div class=\"acc-menu\" role=\"dialog\" aria-labelledby=\"accessibility-title\">\n          <div class=\"acc-menu-header\">\n            <div id=\"accessibility-title\" class=\"acc-menu-title\">\n              <span class=\"acc-menu-title-icon\" aria-hidden=\"true\">${this.getWidgetIconMarkup(icon)}</span>\n              <span class=\"acc-label\">Accessibility</span>\n            </div>\n            <div class=\"acc-header-actions\">\n              \n            </div>\n          </div>\n          <div id=\"acc-menu-content\" class=\"acc-menu-content\">\n            <div class=\"acc-options-all\"> </div>\n          </div>\n          <div class=\"acc-footer\">\n            <button type=\"button\" class=\"acc-footer-reset\" title=\"Reset settings\" aria-label=\"Reset settings\">\n              ${this.widgetIcons.reset}\n              <span class=\"acc-label\">Reset settings</span>\n            </button>\n            <div class=\"acc-footer-meta\">\n              <a href=\"https://github.com/ifrederico/accessible-web-widget\" target=\"_blank\" rel=\"noopener noreferrer\">AccessibleWeb Widget</a>\n              <button type=\"button\" class=\"acc-footer-lang-toggle\" title=\"Language\" aria-label=\"Language\" aria-expanded=\"false\" aria-controls=\"acc-lang-modal\">\n                <span id=\"acc-current-language\" class=\"acc-footer-lang-current\">${String(activeLanguageCode || 'en').toUpperCase()}</span>\n                <span class=\"acc-footer-lang-arrow\" aria-hidden=\"true\"> </span>\n              </button>\n            </div>\n            <div id=\"acc-lang-modal\" class=\"acc-lang-modal\" hidden>\n              <div class=\"acc-lang-modal-header\">\n                <div class=\"acc-section-title acc-label\">All Languages</div>\n              </div>\n              <div class=\"acc-lang-search-wrapper\">\n                <input type=\"text\" id=\"acc-lang-search\" class=\"acc-lang-search\" placeholder=\"Search language\" aria-label=\"Search language\">\n              </div>\n              <div class=\"acc-lang-list\">\n                ${this.supportedLanguages.map(language => {\n                  const languageLabel = this.formatLanguageLabel(language);\n                  const languageFlag = this.getLanguageFlag(language.code);\n                  return `<button type=\"button\" class=\"acc-lang-item${language.code === activeLanguageCode ? ' selected' : ''}\" data-lang=\"${language.code}\" aria-label=\"${languageLabel}\">\n                    <span class=\"acc-lang-item-main\">\n                      <span class=\"acc-lang-flag\" aria-hidden=\"true\">${languageFlag}</span>\n                      <span class=\"acc-lang-item-label\">${languageLabel}</span>\n                    </span>\n                    <span class=\"acc-icon-check\" aria-hidden=\"true\"> </span>\n                  </button>`;\n                }).join('')}\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"acc-overlay\"> </div>\n        `;\n        const menuContainer = document.createElement(\"div\");\n        menuContainer.innerHTML = menuTemplate;\n        menuContainer.style.display = 'none';\n        const menu = this.findElement(\".acc-menu\", menuContainer);\n        if (menu) {\n          menu.setAttribute('aria-hidden', 'true');\n          if (!menu.hasAttribute('tabindex')) {\n            menu.setAttribute('tabindex', '-1');\n          }\n        }\n        const isRightAligned = position === 'bottom-right' || position === 'top-right' || this.widgetTheme.menuPosition === 'right';\n        if (isRightAligned) {\n          menu.style.right = 'var(--acc-menu-inline-gap, 12px)';\n          menu.style.left = 'auto';\n        } else {\n          menu.style.left = 'var(--acc-menu-inline-gap, 12px)';\n          menu.style.right = 'auto';\n        }\n\n        const normalizedOffset = this.normalizeOffset(offset) || [20, 20];\n        const offsetY = normalizedOffset[1] ?? 25;\n        const buttonSize = size !== undefined && size !== null && String(size).trim() !== ''\n          ? this.normalizeButtonSize(size)\n          : (this.widgetTheme?.buttonSize || '48px');\n\n        if (position === 'bottom-right' || position === 'bottom-left') {\n          menu.style.bottom = `calc(${offsetY}px + ${buttonSize} + 16px)`;\n        } else if (position === 'top-right' || position === 'top-left') {\n          menu.style.top = `calc(${offsetY}px + ${buttonSize} + 16px)`;\n        }\n  \n        const config = this.loadConfig();\n\n        const textKeys = new Set(['text-scale', 'bold-text', 'line-spacing', 'letter-spacing', 'readable-text']);\n        const colorKeys = new Set(['contrast-toggle', 'invert-colors', 'saturation-toggle', 'high-contrast-mode']);\n        const readingAidsKeys = new Set(['reading-aid', 'highlight-links', 'highlight-title', 'simple-layout']);\n\n        const sourceOptions = [\n          ...this.contentOptions.map(option => ({ ...option })),\n          ...this.colorOptions.map(option => ({ ...option, optionClass: 'acc-filter' })),\n          ...this.accessTools.map(option => ({ ...option, optionClass: 'acc-tools' }))\n        ];\n\n        const groupedOptions = {\n          speech: [],\n          text: [],\n          color: [],\n          reading: [],\n          interaction: []\n        };\n\n        const seenKeys = new Set();\n        sourceOptions.forEach(option => {\n          if (!option?.key || seenKeys.has(option.key)) return;\n          seenKeys.add(option.key);\n\n          if (option.key === 'text-to-speech') {\n            groupedOptions.speech.push(option);\n            return;\n          }\n          if (textKeys.has(option.key)) {\n            groupedOptions.text.push(option);\n            return;\n          }\n          if (colorKeys.has(option.key)) {\n            groupedOptions.color.push(option);\n            return;\n          }\n          if (readingAidsKeys.has(option.key)) {\n            groupedOptions.reading.push(option);\n            return;\n          }\n          groupedOptions.interaction.push(option);\n        });\n\n        const sectionConfig = [\n          { key: 'speech', label: 'Speech', containerClass: 'acc-tts-toggle-container', optionClass: 'acc-tts-toggle' },\n          { key: 'text', label: 'Text', containerClass: 'acc-options acc-options-text' },\n          { key: 'color', label: 'Color & Contrast', containerClass: 'acc-options' },\n          { key: 'reading', label: 'Reading Aids', containerClass: 'acc-options' },\n          { key: 'interaction', label: 'Interaction', containerClass: 'acc-options' }\n        ];\n\n        const sectionMarkup = sectionConfig.map(section => {\n          let sectionOptions = groupedOptions[section.key];\n          let specialContent = '';\n\n          if (section.key === 'text') {\n            const textScaleOption = sectionOptions.find(option => option.key === 'text-scale');\n            sectionOptions = sectionOptions.filter(option => option.key !== 'text-scale');\n            const textOrder = ['line-spacing', 'letter-spacing', 'bold-text', 'readable-text'];\n            sectionOptions.sort((a, b) => {\n              const indexA = textOrder.indexOf(a.key);\n              const indexB = textOrder.indexOf(b.key);\n              const rankA = indexA === -1 ? Number.MAX_SAFE_INTEGER : indexA;\n              const rankB = indexB === -1 ? Number.MAX_SAFE_INTEGER : indexB;\n              return rankA - rankB;\n            });\n            if (textScaleOption) {\n              specialContent = this.renderTextScaleControl(config.states?.['text-scale'] || 1);\n            }\n\n            const firstThinRowKeys = new Set(['line-spacing', 'letter-spacing']);\n            const secondThinRowKeys = new Set(['bold-text', 'readable-text']);\n            const firstThinRowOptions = sectionOptions.filter(option => firstThinRowKeys.has(option.key));\n            const secondThinRowOptions = sectionOptions.filter(option => secondThinRowKeys.has(option.key));\n            const remainingTextOptions = sectionOptions.filter(option => (\n              !firstThinRowKeys.has(option.key) && !secondThinRowKeys.has(option.key)\n            ));\n            const firstThinRowHtml = firstThinRowOptions.length\n              ? `<div class=\"acc-options acc-options-text-inline\">${this.renderOptions(firstThinRowOptions, 'acc-text-inline')}</div>`\n              : '';\n            const secondThinRowHtml = secondThinRowOptions.length\n              ? `<div class=\"acc-options acc-options-text-inline\">${this.renderOptions(secondThinRowOptions, 'acc-text-inline')}</div>`\n              : '';\n            const remainingTextHtml = remainingTextOptions.length\n              ? `<div class=\"${section.containerClass}\">${this.renderOptions(remainingTextOptions, section.optionClass || '')}</div>`\n              : '';\n\n            if (!specialContent && !firstThinRowHtml && !secondThinRowHtml && !remainingTextHtml) return '';\n\n            return `\n              <section class=\"acc-option-category acc-option-category-${section.key}\">\n                <div class=\"acc-section-title acc-label\">${section.label}</div>\n                ${specialContent}\n                ${firstThinRowHtml}\n                ${secondThinRowHtml}\n                ${remainingTextHtml}\n              </section>\n            `;\n          }\n\n          if (section.key === 'color') {\n            const colorOrder = ['contrast-toggle', 'saturation-toggle', 'invert-colors', 'high-contrast-mode'];\n            sectionOptions.sort((a, b) => {\n              const indexA = colorOrder.indexOf(a.key);\n              const indexB = colorOrder.indexOf(b.key);\n              const rankA = indexA === -1 ? Number.MAX_SAFE_INTEGER : indexA;\n              const rankB = indexB === -1 ? Number.MAX_SAFE_INTEGER : indexB;\n              return rankA - rankB;\n            });\n\n            const firstThinRowKeys = new Set(['contrast-toggle', 'saturation-toggle']);\n            const secondThinRowKeys = new Set(['invert-colors', 'high-contrast-mode']);\n            const firstThinRowOptions = sectionOptions.filter(option => firstThinRowKeys.has(option.key));\n            const secondThinRowOptions = sectionOptions.filter(option => secondThinRowKeys.has(option.key));\n            const remainingColorOptions = sectionOptions.filter(option => (\n              !firstThinRowKeys.has(option.key) && !secondThinRowKeys.has(option.key)\n            ));\n\n            const firstThinRowHtml = firstThinRowOptions.length\n              ? `<div class=\"acc-options acc-options-text-inline\">${this.renderOptions(firstThinRowOptions, 'acc-text-inline')}</div>`\n              : '';\n            const secondThinRowHtml = secondThinRowOptions.length\n              ? `<div class=\"acc-options acc-options-text-inline\">${this.renderOptions(secondThinRowOptions, 'acc-text-inline')}</div>`\n              : '';\n            const remainingColorHtml = remainingColorOptions.length\n              ? `<div class=\"${section.containerClass}\">${this.renderOptions(remainingColorOptions, section.optionClass || '')}</div>`\n              : '';\n\n            if (!firstThinRowHtml && !secondThinRowHtml && !remainingColorHtml) return '';\n\n            return `\n              <section class=\"acc-option-category acc-option-category-${section.key}\">\n                <div class=\"acc-section-title acc-label\">${section.label}</div>\n                ${firstThinRowHtml}\n                ${secondThinRowHtml}\n                ${remainingColorHtml}\n              </section>\n            `;\n          }\n\n          if (section.key === 'reading') {\n            const readingOrder = ['highlight-links', 'highlight-title', 'reading-aid', 'simple-layout'];\n            sectionOptions.sort((a, b) => {\n              const indexA = readingOrder.indexOf(a.key);\n              const indexB = readingOrder.indexOf(b.key);\n              const rankA = indexA === -1 ? Number.MAX_SAFE_INTEGER : indexA;\n              const rankB = indexB === -1 ? Number.MAX_SAFE_INTEGER : indexB;\n              return rankA - rankB;\n            });\n\n            const firstThinRowKeys = new Set(['highlight-links', 'highlight-title']);\n            const secondThinRowKeys = new Set(['reading-aid', 'simple-layout']);\n            const firstThinRowOptions = sectionOptions.filter(option => firstThinRowKeys.has(option.key));\n            const secondThinRowOptions = sectionOptions.filter(option => secondThinRowKeys.has(option.key));\n            const remainingReadingOptions = sectionOptions.filter(option => (\n              !firstThinRowKeys.has(option.key) && !secondThinRowKeys.has(option.key)\n            ));\n\n            const firstThinRowHtml = firstThinRowOptions.length\n              ? `<div class=\"acc-options acc-options-text-inline\">${this.renderOptions(firstThinRowOptions, 'acc-text-inline')}</div>`\n              : '';\n            const secondThinRowHtml = secondThinRowOptions.length\n              ? `<div class=\"acc-options acc-options-text-inline\">${this.renderOptions(secondThinRowOptions, 'acc-text-inline')}</div>`\n              : '';\n            const remainingReadingHtml = remainingReadingOptions.length\n              ? `<div class=\"${section.containerClass}\">${this.renderOptions(remainingReadingOptions, section.optionClass || '')}</div>`\n              : '';\n\n            if (!firstThinRowHtml && !secondThinRowHtml && !remainingReadingHtml) return '';\n\n            return `\n              <section class=\"acc-option-category acc-option-category-${section.key}\">\n                <div class=\"acc-section-title acc-label\">${section.label}</div>\n                ${firstThinRowHtml}\n                ${secondThinRowHtml}\n                ${remainingReadingHtml}\n              </section>\n            `;\n          }\n\n          const sectionOptionsHtml = sectionOptions.length\n            ? this.renderOptions(sectionOptions, section.optionClass || '')\n            : '';\n\n          if (!specialContent && !sectionOptionsHtml.trim()) return '';\n\n          const optionsContainer = sectionOptionsHtml.trim()\n            ? `<div class=\"${section.containerClass}\">${sectionOptionsHtml}</div>`\n            : '';\n\n          return `\n            <section class=\"acc-option-category acc-option-category-${section.key}\">\n              <div class=\"acc-section-title acc-label\">${section.label}</div>\n              ${specialContent}\n              ${optionsContainer}\n            </section>\n          `;\n        }).join('');\n\n        menu.querySelector(\".acc-options-all\").innerHTML = sectionMarkup;\n        const langModal = this.findElement(\"#acc-lang-modal\", menu);\n        const langToggle = this.findElement(\".acc-footer-lang-toggle\", menu);\n        const langSearch = this.findElement(\"#acc-lang-search\", menu);\n        const langItems = menu.querySelectorAll(\".acc-lang-item\");\n\n        const closeLanguageModal = () => {\n          if (langModal) {\n            langModal.setAttribute('hidden', '');\n          }\n          if (langToggle) {\n            langToggle.setAttribute('aria-expanded', 'false');\n          }\n          if (langSearch) {\n            langSearch.value = '';\n          }\n          langItems.forEach(item => {\n            item.style.display = '';\n          });\n        };\n\n        const openLanguageModal = () => {\n          if (langModal) {\n            langModal.removeAttribute('hidden');\n          }\n          if (langToggle) {\n            langToggle.setAttribute('aria-expanded', 'true');\n          }\n          if (langSearch) {\n            langSearch.focus();\n          }\n        };\n\n        if (langToggle && langModal) {\n          langToggle.addEventListener('click', (event) => {\n            event.stopPropagation();\n            const isOpen = !langModal.hasAttribute('hidden');\n            if (isOpen) {\n              closeLanguageModal();\n            } else {\n              openLanguageModal();\n            }\n          });\n        }\n  \n        // Handle language search\n        if (langSearch) {\n          langSearch.addEventListener(\"input\", () => {\n            const searchValue = langSearch.value.toLowerCase();\n            langItems.forEach(item => {\n              const labelElement = item.querySelector('.acc-lang-item-label');\n              const text = (labelElement?.textContent || item.textContent).toLowerCase();\n              item.style.display = text.includes(searchValue) ? '' : 'none';\n            });\n          });\n        }\n  \n        // Handle language selection\n        langItems.forEach(item => {\n          item.addEventListener(\"click\", () => {\n            const langCode = item.getAttribute(\"data-lang\");\n            if (!langCode) return;\n            \n            // Update selected language\n            langItems.forEach(i => i.classList.remove(\"selected\"));\n            item.classList.add(\"selected\");\n            \n            // Update current language display\n            const currentLang = this.findElement(\"#acc-current-language\", menu);\n            if (currentLang) {\n              currentLang.textContent = String(langCode).toUpperCase();\n            }\n            closeLanguageModal();\n            \n            // Save language preference and update UI\n            this.saveConfig({ lang: langCode });\n            this.translateMenuUI(menuContainer);\n          });\n        });\n\n        const textScaleRange = this.findElement('.acc-text-scale-range', menu);\n        if (textScaleRange) {\n          textScaleRange.addEventListener('input', () => {\n            const multiplier = this.setTextScaleFromPercent(textScaleRange.value, { persist: false });\n            this.syncTextScaleControlUI(menu, multiplier);\n          });\n          textScaleRange.addEventListener('change', () => {\n            const multiplier = this.setTextScaleFromPercent(textScaleRange.value, { persist: true });\n            this.syncTextScaleControlUI(menu, multiplier);\n          });\n          this.syncTextScaleControlUI(menu, config.states?.['text-scale'] || 1);\n        }\n  \n        // click event handler:\n        menu.addEventListener('click', (e) => {\n          if (langModal && !langModal.hasAttribute('hidden')) {\n            const clickedInsideLanguageModal = Boolean(e.target.closest('.acc-lang-modal'));\n            const clickedLanguageToggle = Boolean(e.target.closest('.acc-footer-lang-toggle'));\n            if (!clickedInsideLanguageModal && !clickedLanguageToggle) {\n              closeLanguageModal();\n            }\n          }\n\n          const target = e.target.closest('[role=\"button\"], button, .acc-overlay');\n          if (!target) return;\n          if (target.classList.contains('acc-overlay')) {\n            this.closeMenu(menuContainer);\n            return;\n          }\n          if (target.classList.contains('acc-footer-reset')) {\n            this.resetEnhancements();\n            return;\n          }\n          const btn = target.classList.contains('acc-btn') ? target : null;\n          if (btn) {\n            const key = btn.dataset.key;\n            // Handle accessibility report action\n            if (key === 'accessibility-report') {\n              this.runAccessibilityReport();\n            }\n            // Handle multi-level features (font size, contrast).\n            else if (this.multiLevelFeatures[key]) {\n              this.cycleMultiLevelFeature(key, btn);\n            }\n            // For color adjustments, deselect any other active color filter.\n            else if (this.isColorFilterKey(key)) {\n              const isCurrentlyActive = btn.classList.contains('acc-selected');\n              const newActiveKey = isCurrentlyActive ? null : key;\n              this.setColorFilterUI(menu, newActiveKey);\n              this.updateColorFilterState(newActiveKey);\n              this.applyVisualFilters();\n            }\n            // For other adjustments, simply toggle.\n            else {\n              const isSelected = !btn.classList.contains(\"acc-selected\");\n              btn.classList.toggle('acc-selected', isSelected);\n              btn.setAttribute('aria-pressed', isSelected);\n              this.userInitiatedToggleKey = key;\n              try {\n                this.updateState({ [key]: isSelected });\n                this.applyEnhancements();\n              } finally {\n                this.userInitiatedToggleKey = null;\n              }\n            }\n          }\n        });\n        menu.querySelectorAll('[role=\"button\"], button').forEach(el => {\n          el.addEventListener('keydown', (e) => {\n            if (e.key === 'Enter' || e.key === ' ') {\n              e.preventDefault();\n              el.click();\n            }\n          });\n        });\n        this.translateMenuUI(menuContainer);\n        const activeColorFilter = this.getActiveColorFilterKey(config.states);\n        this.setColorFilterUI(menu, activeColorFilter);\n        this.updateColorFilterState(activeColorFilter);\n        if (config.states) {\n          for (let key in config.states) {\n            if (this.isColorFilterKey(key)) {\n              continue;\n            }\n            if (config.states[key] && key !== \"text-scale\") {\n              const selector = key; // keys now directly match our updated options.\n              const btn = this.findElement(`.acc-btn[data-key=\"${selector}\"]`, menu);\n              if (btn) {\n                btn.classList.add(\"acc-selected\");\n                btn.setAttribute('aria-pressed', 'true');\n              }\n            }\n          }\n        }\n        container.appendChild(menuContainer);\n        return menuContainer;\n      } catch (e) {\n        console.error('Error displaying menu:', e);\n        return null;\n      }\n    },\n\n  displayWidget(options) {\n    try {\n      this.applyThemeVariables();\n      this.registerStaticStyles();\n\n      const widgetTemplate = `\n        <div class=\"acc-widget\">\n          <a href=\"#\" id=\"accessibilityWidget\" class=\"acc-toggle-btn\" title=\"Open Accessibility Menu\" role=\"button\" aria-label=\"Open accessibility menu\" aria-expanded=\"false\">\n            <span class=\"acc-toggle-icon\" aria-hidden=\"true\">${this.getWidgetIconMarkup(options?.icon)}</span>\n            <span class=\"acc-violation-bubble\" data-severity=\"warning\" hidden> </span>\n          </a>\n        </div>\n        `;\n      \n        const widget = document.createElement(\"div\");\n        widget.innerHTML = widgetTemplate;\n        widget.classList.add(\"acc-container\");\n        const btn = this.findElement(\".acc-toggle-btn\", widget);\n        this.violationBubble = this.findElement('.acc-violation-bubble', widget);\n  \n        this.widgetToggleButton = btn;\n      \n        const { position = \"bottom-right\", offset = [20, 20], size } = options;\n        const normalizedOffset = this.normalizeOffset(offset) || [20, 20];\n        const offsetX = normalizedOffset[0] ?? 20;\n        const offsetY = normalizedOffset[1] ?? 25;\n        let buttonStyle = { left: `${offsetX}px`, bottom: `${offsetY}px` };\n        if (position === \"bottom-right\") {\n          buttonStyle = { right: `${offsetX}px`, left: \"auto\", bottom: `${offsetY}px` };\n        } else if (position === \"top-left\") {\n          buttonStyle = { top: `${offsetY}px`, bottom: \"auto\", left: `${offsetX}px` };\n        } else if (position === \"top-right\") {\n          buttonStyle = { top: `${offsetY}px`, right: `${offsetX}px`, bottom: \"auto\", left: \"auto\" };\n        }\n        Object.assign(btn.style, buttonStyle);\n  \n        if (size !== undefined && size !== null && String(size).trim() !== '') {\n          const buttonSize = this.normalizeButtonSize(size);\n          btn.style.setProperty('--acc-button-size', buttonSize);\n        }\n        \n        let menu;\n        btn.addEventListener(\"click\", (event) => {\n          event.preventDefault();\n          if (!menu) {\n            menu = this.displayMenu({ ...options, container: widget });\n            if (!menu) return;\n            this.menuContainer = menu;\n  \n            const overlay = menu.querySelector('.acc-overlay');\n            if (overlay) {\n              overlay.addEventListener('click', (overlayEvent) => {\n                overlayEvent.stopPropagation();\n                this.closeMenu(menu, btn);\n              });\n            }\n  \n            const closeBtn = menu.querySelector('.acc-menu-close');\n            if (closeBtn) {\n              closeBtn.addEventListener('click', (closeEvent) => {\n                closeEvent.stopPropagation();\n                this.closeMenu(menu, btn);\n              });\n            }\n          }\n  \n          const isHidden = menu.style.display === 'none' || window.getComputedStyle(menu).display === 'none';\n          if (isHidden) {\n            this.openMenu(menu, btn);\n          } else {\n            this.closeMenu(menu, btn);\n          }\n        });\n        \n        // Handle keyboard interaction\n        btn.addEventListener(\"keydown\", (e) => {\n          if (e.key === 'Enter' || e.key === ' ') {\n            e.preventDefault();\n            btn.click();\n          }\n        });\n        \n        document.body.appendChild(widget);\n        this.translateMenuUI(widget);\n        this.ensureSkipLink();\n        this.runBackgroundAxeScan().catch(() => {\n          this.updateViolationBubble({ violations: [] });\n        });\n        if (this.isDevMode()) {\n          const rerunDevScan = () => {\n            this.runBackgroundAxeScan({ force: true }).catch(() => {\n              this.updateViolationBubble(this.axeScanResults || { violations: [] });\n            });\n          };\n          if (document.readyState === 'complete') {\n            setTimeout(rerunDevScan, 250);\n          } else {\n            window.addEventListener('load', () => {\n              setTimeout(rerunDevScan, 150);\n            }, { once: true });\n          }\n        }\n        \n        // Add a click handler to the document to blur the toggle button when clicking outside\n        document.addEventListener('click', (e) => {\n          if (!btn) return;\n          const clickedToggle = e.target === btn || btn.contains(e.target);\n          const clickedInsideWidget = e.target.closest('.acc-container');\n          if (menu && this.activeMenuContainer === menu && menu.style.display !== 'none') {\n            const clickedInsideMenu = menu.contains(e.target);\n            if (!clickedToggle && !clickedInsideMenu && !clickedInsideWidget) {\n              this.closeMenu(menu, btn);\n            }\n          } else if (!clickedToggle) {\n            btn.blur();\n          }\n        });\n        \n        return widget;\n      } catch (e) {\n        console.error('Error displaying widget:', e);\n        return null;\n      }\n    },\n\n  startAccessibleWebWidget() {\n          try {\n            if (document.querySelector('.acc-widget .acc-toggle-btn')) {\n              return;\n            }\n  \n            const dataAttributeOptions = this.getDataAttributeOptions();\n            if (dataAttributeOptions && Object.keys(dataAttributeOptions).length) {\n              this.dataOptions = dataAttributeOptions;\n              this.options = {\n                ...this.options,\n                ...dataAttributeOptions\n              };\n            }\n  \n            const baseOptions = { ...this.options };\n            const lang = baseOptions.lang ||\n              document.querySelector('html')?.getAttribute('lang')?.replace(/[_-].*/, '') ||\n              navigator.language ||\n              \"en\";\n            baseOptions.lang = lang;\n  \n            baseOptions.position = baseOptions.position || \"bottom-right\";\n  \n            if (baseOptions.offset) {\n              baseOptions.offset = this.normalizeOffset(baseOptions.offset);\n            }\n  \n            if (baseOptions.size) {\n              baseOptions.size = this.normalizeButtonSize(baseOptions.size);\n              this.widgetTheme.buttonSize = baseOptions.size;\n            }\n\n            this.options = { ...baseOptions };\n            this.applyThemeOverrides(baseOptions);\n            this.applyThemeVariables();\n            this.registerStaticStyles();\n            \n            // First load the saved configuration\n            this.loadConfig(false);\n            this.detectSystemPreferences();\n            this.setupMediaQueryListeners();\n            const initialColorFilter = this.getActiveColorFilterKey(this.widgetConfig.states);\n            this.updateColorFilterState(initialColorFilter);\n            \n            // Apply all saved settings immediately on page load\n            this.applyEnhancements();\n            this.applyVisualFilters();\n            \n            // Then launch the widget UI\n            this.launchWidget(baseOptions);\n          } catch (e) {\n            console.error('Error starting AccessibleWeb Widget:', e);\n          }\n        },\n\n  launchWidget(args = {}) {\n          try {\n            let options = { lang: this.getDefaultLanguage(), position: 'bottom-right', offset: [20, 20] };\n            \n            // Load the saved configuration\n            try {\n              const savedConfig = this.fetchSavedConfig();\n              if (savedConfig) {\n                options = { ...options, ...JSON.parse(savedConfig) };\n                // Note: We don't call applyEnhancements() here anymore as it's already called in startAccessibleWebWidget\n              }\n            } catch (e) {\n              console.warn('Error loading saved config:', e);\n            }\n            \n            // Merge with new arguments\n            options = { ...options, ...args };\n            this.saveConfig(options);\n            \n            // Display the widget UI\n            this.displayWidget(options);\n          } catch (e) {\n            console.error('Error in widget launch:', e);\n          }\n        },\n\n};\n","/*!\n * AccessibleWeb Widget v1.1.4\n * https://github.com/ifrederico/accessible-web-widget\n *\n * Copyright (c) 2025 ifrederico\n * Released under the MIT License\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND.\n * See DISCLAIMER.md for important legal information.\n * This widget does not guarantee accessibility compliance.\n */\n\nimport { WIDGET_THEME } from './constants/theme.js';\nimport { WIDGET_ICONS } from './constants/icons.js';\nimport { TARGET_SELECTORS, PAGE_CONTENT_SELECTOR } from './constants/selectors.js';\nimport { TRANSLATIONS, SUPPORTED_LANGUAGES } from './constants/translations.js';\nimport { stateMethods } from './state.js';\nimport { styleMethods } from './styles.js';\nimport { featureMethods } from './features.js';\nimport { uiMethods } from './ui.js';\n\nclass AccessibleWebWidget {\n  constructor(options = {}) {\n    // ======================================================\n    // CONFIGURATION & INITIAL STATE\n    // ======================================================\n    this.widgetTheme = { ...WIDGET_THEME };\n    this.widgetIcons = WIDGET_ICONS;\n    this.targetSelectors = TARGET_SELECTORS;\n\n    this.visualFilters = {\n      'dark-contrast': {\n        styles: { 'filter': 'contrast(150%) brightness(0.8)' },\n        selector: PAGE_CONTENT_SELECTOR\n      },\n      'light-contrast': {\n        styles: { 'filter': 'contrast(125%) brightness(1.2)' },\n        selector: PAGE_CONTENT_SELECTOR\n      },\n      'invert-colors': {\n        styles: { 'filter': 'invert(100%)' },\n        selector: PAGE_CONTENT_SELECTOR\n      },\n      'low-saturation': {\n        styles: { 'filter': 'saturate(50%)' },\n        selector: PAGE_CONTENT_SELECTOR\n      },\n      'high-saturation': {\n        styles: { 'filter': 'saturate(200%)' },\n        selector: PAGE_CONTENT_SELECTOR\n      }\n    };\n\n    this.translations = TRANSLATIONS;\n    this.supportedLanguages = SUPPORTED_LANGUAGES.map((language) => ({ ...language }));\n\n    this.accessTools = [\n      { label: 'Big Cursor', key: 'large-pointer', icon: this.widgetIcons.largePointer },\n      { label: 'Stop Animations', key: 'pause-motion', icon: this.widgetIcons.pauseMotion },\n      { label: 'Reading Guide', key: 'reading-aid', icon: this.widgetIcons.readingAid },\n      {\n        label: 'Text to Speech',\n        key: 'text-to-speech',\n        icon: this.widgetIcons.textToSpeech,\n        requiresSpeechSynthesis: true\n      },\n      { label: 'High Contrast', key: 'high-contrast-mode', icon: this.widgetIcons.highContrast },\n      { label: 'Simplify Layout', key: 'simple-layout', icon: this.widgetIcons.simplifyLayout }\n    ];\n\n    // Add dev-only tools (?acc-dev=true)\n    if (this.isDevMode()) {\n      this.accessTools.push(\n        { label: 'Annotations', key: 'annotations', icon: this.widgetIcons.annotations },\n        {\n          label: 'Accessibility Report',\n          key: 'accessibility-report',\n          icon: this.widgetIcons.accessibilityReport,\n          isAction: true\n        }\n      );\n    }\n\n    // axe-core state\n    this.axeCoreLoaded = false;\n    this.axeCoreLoading = false;\n    this.axeCorePromise = null;\n    this.axeScanResults = null;\n    this.axeScanPromise = null;\n    this.violationBubble = null;\n\n    // Accessibility report modal state\n    this.reportPreviousFocus = null;\n    this.reportKeyListener = null;\n\n    // System preference state\n    this.systemPreferenceListeners = [];\n    this.systemPreferenceMediaQueries = {};\n\n    // Annotation state\n    this.annotationLayer = null;\n    this.annotationItems = [];\n    this.annotationPopup = null;\n    this.annotationRepositionHandler = null;\n    this.annotationOutsideHandler = null;\n    this.annotationRequestId = 0;\n\n    // Text-to-speech state\n    this.ttsUtterance = null;\n    this.ttsClickListener = null;\n    this.ttsActiveTarget = null;\n    this.ttsTextCache = '';\n    this.ttsStatus = 'stopped';\n    this.ttsQueue = [];\n    this.ttsQueueIndex = 0;\n    this.ttsSessionId = 0;\n    this.ttsVoice = null;\n\n\n    // Simplify layout state\n    this.simpleLayoutRoot = null;\n    this.simpleLayoutHiddenElements = [];\n\n    // Track direct user toggles for features that have side effects.\n    this.userInitiatedToggleKey = null;\n\n    // Font size cycling\n    this.textScaleIndex = 0;\n    this.textScaleValues = [1.2, 1.4, 1.6];\n    this.textScaleMinPercent = 80;\n    this.textScaleMaxPercent = 150;\n    this.textScaleStepPercent = 5;\n    this.contrastFilterValues = ['light-contrast', 'dark-contrast'];\n    this.saturationFilterValues = ['low-saturation', 'high-saturation'];\n\n    this.contentOptions = [\n      { label: 'Font Weight', key: 'bold-text', icon: this.widgetIcons.boldText },\n      { label: 'Line Height', key: 'line-spacing', icon: this.widgetIcons.lineSpacing },\n      { label: 'Letter Spacing', key: 'letter-spacing', icon: this.widgetIcons.letterSpacing },\n      { label: 'Hide Images', key: 'hide-images', icon: this.widgetIcons.hideImages },\n      { label: 'Dyslexia Font', key: 'readable-text', icon: this.widgetIcons.dyslexiaFont },\n      { label: 'Highlight Links', key: 'highlight-links', icon: this.widgetIcons.highlightLinks },\n      { label: 'Highlight Title', key: 'highlight-title', icon: this.widgetIcons.highlightTitle },\n      {\n        label: 'Font Size',\n        key: 'text-scale',\n        icon: this.widgetIcons.adjustFontSize,\n        multiLevel: true,\n        levels: this.textScaleValues.length\n      }\n    ];\n\n    this.multiLevelFeatures = {\n      'text-scale': {\n        levels: this.textScaleValues.length,\n        currentIndex: -1,\n        values: this.textScaleValues\n      },\n      'contrast-toggle': {\n        levels: this.contrastFilterValues.length,\n        currentIndex: -1,\n        values: this.contrastFilterValues\n      },\n      'saturation-toggle': {\n        levels: this.saturationFilterValues.length,\n        currentIndex: -1,\n        values: this.saturationFilterValues\n      }\n    };\n\n    this.readingAidTemplate = `\n      <div class=\"acc-rg acc-rg-top\" role=\"presentation\"> </div>\n      <div class=\"acc-rg acc-rg-bottom\" role=\"presentation\"> </div>\n    `;\n\n    this.colorOptions = [\n      {\n        label: 'Contrast',\n        key: 'contrast-toggle',\n        icon: this.widgetIcons.contrast,\n        multiLevel: true,\n        levels: this.contrastFilterValues.length\n      },\n      { label: 'Invert Colors', key: 'invert-colors', icon: this.widgetIcons.invertColors },\n      {\n        label: 'Saturation',\n        key: 'saturation-toggle',\n        icon: this.widgetIcons.saturation,\n        multiLevel: true,\n        levels: this.saturationFilterValues.length\n      }\n    ];\n    this.colorFilterKeys = Object.keys(this.visualFilters);\n    this.activeColorFilterKey = null;\n\n    this.textScaleSelectors = 'h1,h2,h3,h4,h5,h6,p,a,dl,dt,li,ol,th,td,span,blockquote,.acc-text';\n    this.textScaleObserver = null;\n    this.currentTextScaleMultiplier = 1;\n\n    // Global settings and state\n    this.widgetConfig = {};\n    this.cookieKey = 'accweb';\n    this.readingAidVisible = false;\n    this.readableFontLoaded = false;\n\n    // Menu state tracking for focus management\n    this.activeMenuContainer = null;\n    this.activeMenuToggle = null;\n    this.menuKeyListener = null;\n    this.previousFocus = null;\n    this.widgetToggleButton = null;\n    this.skipLinkElement = null;\n    this.menuContainer = null;\n\n    // Style registration state\n    this.staticStylesRegistered = false;\n\n    this.dataOptions = this.getDataAttributeOptions();\n\n    this.options = {\n      lang: this.getDefaultLanguage(),\n      position: 'bottom-right',\n      ...this.dataOptions,\n      ...options\n    };\n\n    this.applyThemeOverrides(this.options);\n\n    const normalizeTtsRate = (value) => {\n      const numeric = Number(value);\n      if (!Number.isFinite(numeric)) return 1;\n      return Math.min(2, Math.max(0.5, numeric));\n    };\n\n    const normalizeTtsPitch = (value) => {\n      const numeric = Number(value);\n      if (!Number.isFinite(numeric)) return 1;\n      return Math.min(2, Math.max(0, numeric));\n    };\n\n    this.nativeTtsConfig = {\n      preferredVoiceName: (\n        typeof options.ttsNativeVoiceName === 'string' &&\n        options.ttsNativeVoiceName.trim()\n      ) ? options.ttsNativeVoiceName.trim() : '',\n      preferredVoiceLang: (\n        typeof options.ttsNativeVoiceLang === 'string' &&\n        options.ttsNativeVoiceLang.trim()\n      ) ? options.ttsNativeVoiceLang.trim() : '',\n      rate: normalizeTtsRate(options.ttsRate),\n      pitch: normalizeTtsPitch(options.ttsPitch)\n    };\n\n    if (this.options.offset) {\n      this.options.offset = this.normalizeOffset(this.options.offset);\n    }\n\n    if (this.options.size) {\n      this.widgetTheme.buttonSize = this.normalizeButtonSize(this.options.size);\n      this.options.size = this.widgetTheme.buttonSize;\n    }\n\n    this.applyThemeVariables();\n    this.registerStaticStyles();\n  }\n\n  applyThemeOverrides(options = {}) {\n    if (!options || typeof options !== 'object') return;\n\n    const mergedOptions = {\n      ...(options.theme && typeof options.theme === 'object' ? options.theme : {}),\n      ...options\n    };\n\n    const themeKeys = [\n      'primaryColor',\n      'primaryColorLight',\n      'primaryColorDark',\n      'backgroundColor',\n      'textColor',\n      'textColorInverted',\n      'cardBackground',\n      'borderColor',\n      'focusRingColor',\n      'hoverColor',\n      'activeColor',\n      'borderRadius',\n      'buttonBorderRadius',\n      'headerHeight',\n      'focusBorderWidth',\n      'focusOutlineOffset',\n      'zIndex'\n    ];\n\n    themeKeys.forEach((key) => {\n      const value = mergedOptions[key];\n      if (value === undefined || value === null) return;\n\n      if (typeof value === 'string') {\n        const trimmed = value.trim();\n        if (!trimmed) return;\n        this.widgetTheme[key] = trimmed;\n        return;\n      }\n\n      this.widgetTheme[key] = value;\n    });\n\n    if (mergedOptions.buttonSize !== undefined && mergedOptions.buttonSize !== null && mergedOptions.buttonSize !== '') {\n      this.widgetTheme.buttonSize = this.normalizeButtonSize(mergedOptions.buttonSize);\n    }\n  }\n}\n\n/** @typedef {typeof stateMethods & typeof styleMethods & typeof featureMethods & typeof uiMethods} WidgetMixedMethods */\n/** @typedef {AccessibleWebWidget & WidgetMixedMethods} AccessibleWebWidgetInstance */\n\n/** @type {AccessibleWebWidget['prototype'] & WidgetMixedMethods} */\nconst widgetPrototype = AccessibleWebWidget.prototype;\n\nObject.assign(\n  widgetPrototype,\n  stateMethods,\n  styleMethods,\n  featureMethods,\n  uiMethods\n);\n\nif (typeof window !== 'undefined') {\n  window.AccessibleWebWidget = AccessibleWebWidget;\n}\n\nif (typeof document !== 'undefined') {\n  const globalAutoInitOptions = (\n    typeof window !== 'undefined' &&\n    window.AccessibleWebWidgetOptions &&\n    typeof window.AccessibleWebWidgetOptions === 'object'\n  ) ? window.AccessibleWebWidgetOptions : {};\n\n  /** @type {AccessibleWebWidgetInstance} */\n  const widgetInstance = new AccessibleWebWidget(globalAutoInitOptions);\n  if (document.readyState === 'complete' || document.readyState === 'interactive') {\n    widgetInstance.startAccessibleWebWidget();\n  } else {\n    document.addEventListener('DOMContentLoaded', () => widgetInstance.startAccessibleWebWidget());\n  }\n}\n\nexport default AccessibleWebWidget;\n"],"names":["WIDGET_THEME","primaryColor","primaryColorLight","primaryColorDark","backgroundColor","textColor","textColorInverted","buttonSize","cardBackground","borderColor","focusRingColor","hoverColor","activeColor","successColor","errorColor","warningColor","headerHeight","borderRadius","buttonBorderRadius","menuPosition","zIndex","focusBorderWidth","focusOutlineOffset","WIDGET_ICONS","accessibility","accessibilityVariants","default","largePointer","pauseMotion","readingAid","boldText","lineSpacing","letterSpacing","dyslexiaFont","highlightLinks","highlightTitle","contrast","darkContrast","lightContrast","invertColors","saturation","lowSaturation","highSaturation","reset","close","increase","decrease","arrowBack","adjustFontSize","language","hideImages","accessibilityReport","annotations","textToSpeech","highContrast","simplifyLayout","TARGET_SELECTORS","ALL","LINKS","HEADERS","TEXT","PAGE_CONTENT_SELECTOR","TRANSLATIONS","en","Close","Monochrome","Tools","Language","Critical","Serious","Moderate","Minor","Element","Issue","Annotations","Play","Pause","Stop","it","fr","de","es","ru","pl","ro","nl","uk","SUPPORTED_LANGUAGES","code","label","stateMethods","storageAvailable","test","localStorage","setItem","removeItem","fetchCookie","name","cookieName","decodedCookie","decodeURIComponent","document","cookie","split","map","c","trim","find","startsWith","substring","length","e","console","warn","storeCookie","value","days","d","Date","setTime","getTime","expires","toUTCString","isSecure","window","location","protocol","getSavedLanguage","this","stored","getItem","cookieKey","config","JSON","parse","lang","cookieVal","getBrowserLanguage","navigator","supportedCodes","supportedLanguages","browserLanguages","languages","userLanguage","browserLang","primaryCode","toLowerCase","includes","getDefaultLanguage","savedLang","isDevMode","URLSearchParams","search","get","getDataAttributeOptions","options","attributes","assignValue","key","String","position","normalized","normalizeOffset","offset","normalizedSize","normalizeButtonSize","size","icon","scriptCandidates","currentScript","push","querySelectorAll","forEach","script","el","attrName","attrValue","getAttribute","undefined","querySelector","parts","Array","isArray","parsed","part","number","Number","isFinite","Math","round","filter","fallback","widgetTheme","max","trimmed","numeric","toggleDisplay","state","style","display","isSystemControlledPreference","systemDefaults","widgetConfig","Object","prototype","hasOwnProperty","call","hasExplicitStatePreference","states","hasExplicitColorFilterPreference","colorFilterKeys","some","updateState","payload","source","previousStates","previousSystemDefaults","nextStates","nextSystemDefaults","keys","updatedConfig","saveConfig","newConfig","stringify","retrieveState","loadConfig","cache","savedConfig","fetchSavedConfig","fetchDataAttr","attr","dataAttr","element","STATIC_STYLES","join","styleMethods","findElement","selector","parent","injectStyle","id","css","getElementById","createElement","innerHTML","head","appendChild","createCSS","styles","browserPrefixes","prefixedProperties","prefix","wrapCSS","childrenSelector","output","child","buildCSS","applyToolStyle","enable","styleId","remove","documentElement","classList","toggle","applyThemeVariables","vars","entries","setProperty","registerStaticStyles","staticStylesRegistered","AXE_CORE_VERSION","AXE_CORE_SRC","AXE_RUN_OPTIONS","runOnly","SYSTEM_PREFERS_REDUCED_MOTION","featureMethods","getContrastToggleDisplay","index","widgetIcons","updateContrastToggleButton","button","iconNode","outerHTML","insertAdjacentHTML","translatedLabel","translate","labelNode","setAttribute","innerText","getSaturationToggleDisplay","updateSaturationToggleButton","ensureSkipLink","skipLinkElement","body","contains","updateSkipLinkLabel","existing","type","className","textContent","addEventListener","event","preventDefault","widgetToggleButton","currentMenu","activeMenuContainer","menuContainer","focusMenu","targetMenu","focusables","getFocusableElements","focus","click","requestAnimationFrame","insertBefore","firstChild","shouldSkipScaling","closest","collectDirectTextParents","rootElement","directTextParents","Set","NodeFilter","root","walker","createTreeWalker","SHOW_TEXT","acceptNode","node","FILTER_REJECT","parentElement","matches","textScaleSelectors","FILTER_ACCEPT","currentNode","nextNode","add","applyScaleToElement","multiplier","baseAttr","hasAttribute","computedSize","parseFloat","getComputedStyle","fontSize","isNaN","baseSize","ensureTextScaleObserver","textScaleObserver","MutationObserver","mutations","currentTextScaleMultiplier","pending","mutation","addedNodes","observe","childList","subtree","disconnectTextScaleObserver","disconnect","scaleText","multiply","removeAttribute","clampTextScalePercent","percent","min","textScaleMinPercent","textScaleMaxPercent","step","textScaleStepPercent","snapped","getTextScalePercent","scaleValue","syncTextScaleControlUI","menu","range","progress","setTextScaleFromPercent","shouldPersist","persist","clampedPercent","toFixed","exactIndex","textScaleValues","indexOf","multiLevelFeatures","currentIndex","textScaleIndex","nearestIndex","minDistance","Infinity","distance","abs","enableBoldText","adjustLetterSpacing","adjustLineSpacing","enableLargePointer","cursor","outline","highlightTitles","targetSelectors","ensureReadableFontLoaded","readableFontLoaded","enableReadableText","shouldEnable","transition","enableHighContrastMode","X","enableReadingAid","container","guideHeight","__accweb__scrollGuide","removeEventListener","readingAidTemplate","prepend","rgTop","rgBottom","readingAidVisible","updateGuidePosition","throttle","mouseY","clientY","topHeight","bottomHeight","innerHeight","height","passive","loadAxeCore","axeCoreLoaded","axe","Promise","resolve","axeCorePromise","axeCoreLoading","reject","settled","timeoutId","settleSuccess","clearTimeout","Error","settleError","error","src","async","integrity","crossOrigin","once","setTimeout","getAxeRunOptions","getViolationCounts","results","counts","critical","serious","moderate","minor","violations","violation","impact","nodes","updateViolationBubble","bubble","violationBubble","axeScanResults","devMode","displayCount","severity","hidden","dataset","runBackgroundAxeScan","force","axeScanPromise","run","ensureMediaQuery","query","matchMedia","systemPreferenceMediaQueries","applySystemMotionPreference","detectSystemPreferences","reducedMotionQuery","shouldPauseMotion","applyEnhancements","clearSystemPreferenceListeners","systemPreferenceListeners","setupMediaQueryListeners","mediaQuery","handler","addListener","removeListener","listen","runAccessibilityReport","panel","createReportPanel","openReportPanel","contentArea","statusArea","displayReportResults","message","getReportFocusableElements","dialog","reportPreviousFocus","activeElement","focusTarget","reportKeyListener","stopPropagation","closeReportPanel","first","last","active","outsidePanel","shiftKey","closeBtn","overlay","passes","incomplete","v","totalViolations","values","reduce","a","b","html","severityOrder","sort","capitalizeFirst","escapeHtml","help","description","helpUrl","slice","failureSummary","header","str","charAt","toUpperCase","div","concealImages","existingStyle","supportsSpeechSynthesis","SpeechSynthesisUtterance","supportsTextToSpeech","normalizeSpeechLanguage","languageCode","getNativeTtsRate","configured","nativeTtsConfig","rate","getNativeTtsPitch","pitch","isElementVisibleForTts","visibility","rect","getBoundingClientRect","width","isTtsExcludedElement","allowLandmarkRegions","normalizeReadableText","text","replace","getTtsCandidateRoots","roots","seen","has","getPrimaryContentRoot","candidates","explicitCandidates","from","explicitBest","explicitBestScore","candidate","textLength","score","topLevelCandidates","children","best","bestScore","bestRoot","extractReadableBlocks","blocks","getReadableContent","candidateRoots","bestBlocks","characterCount","splitLongSpeechSegment","segment","maxLength","remaining","splitIndex","lastIndexOf","floor","Boolean","buildSpeechQueue","paragraphCandidates","paragraph","paragraphs","queue","sentences","sentenceList","chunk","sentence","next","resolveSpeechVoice","synth","speechSynthesis","voices","getVoices","preferredVoiceName","byExactName","voice","byNameContains","targetLanguage","preferredVoiceLang","primary","localExact","localService","exact","localByPrimary","byPrimary","defaultVoice","getSpeechTargetFromEvent","target","block","setActiveSpeechTarget","ttsActiveTarget","startTtsClickMode","ttsClickListener","handleTtsClick","stopTtsClickMode","ttsTextCache","startSpeechPlayback","restart","ensureTtsQueue","ttsQueue","ttsQueueIndex","speakNextTtsChunk","sessionId","ttsSessionId","ttsStatus","utterance","ttsVoice","onstart","onpause","onresume","onend","onerror","ttsUtterance","speak","startNativeSpeechPlayback","paused","resume","stopSpeech","cancel","pauseSpeech","speaking","pause","resumeSpeech","enableTextToSpeech","isUserToggle","userInitiatedToggleKey","announceTtsState","msg","ensureAnnotationLayer","annotationLayer","layer","resolveAnnotationTarget","buildAnnotationEntries","title","createAnnotationMarker","annotation","marker","showAnnotationPopup","positionAnnotationPopup","popup","markerRect","popupWidth","offsetWidth","popupHeight","offsetHeight","viewportWidth","innerWidth","viewportHeight","gap","left","scrollX","top","scrollY","bottom","clearAnnotationPopup","annotationPopup","__accMarker","closeButton","positionAnnotations","annotationItems","item","right","enableAnnotations","disableAnnotations","requestId","annotationRequestId","cancelPending","then","data","annotationRepositionHandler","annotationOutsideHandler","clickedPopup","clickedMarker","catch","clearSimpleLayoutDomMutations","simpleLayoutRoot","simpleLayoutHiddenElements","applySimpleLayoutDomMutations","hiddenElements","clutterSelectors","enableSimpleLayout","S","R","storedScale","appliedScale","isColorFilterKey","getActiveColorFilterKey","activeColorFilterKey","setColorFilterUI","activeKey","contrastFeature","contrastButton","contrastIndex","isContrastActive","indicator","dot","saturationFeature","saturationButton","saturationIndex","isSaturationActive","filterKey","isActive","updateColorFilterState","requiresUpdate","rawCurrent","computeFilteredBodyColor","m","match","r","g","clamp","s","ng","nb","s2","hg","hb","applyVisualFilters","visualFilters","adjustedFilter","filteredBg","cycleTextScale","progressIndicator","dots","cycleMultiLevelFeature","featureKey","feature","newIndex","newActiveKey","levels","newValue","i","resetEnhancements","blur","guide","uiMethods","translations","getLanguageCountryLabel","getLanguageFlag","countryCode","fromCodePoint","char","charCodeAt","formatLanguageLabel","getWidgetIconMarkup","iconKey","variants","func","limit","inThrottle","args","apply","selectors","hasDocument","openMenu","toggleBtn","activeMenuToggle","previousFocus","focusable","menuKeyListener","closeMenu","targetContainer","langModal","langToggle","langSearch","renderOptions","optionClass","opt","requiresSpeechSynthesis","isMultiLevel","multiLevel","mergedOptionClass","featureData","j","renderTextScaleControl","getTranslatedText","defaultValue","translateMenuUI","displayMenu","activeLanguageCode","menuTemplate","languageLabel","languageFlag","offsetY","textKeys","colorKeys","readingAidsKeys","sourceOptions","contentOptions","option","colorOptions","accessTools","groupedOptions","speech","color","reading","interaction","seenKeys","sectionMarkup","containerClass","section","sectionOptions","specialContent","textScaleOption","textOrder","indexA","indexB","MAX_SAFE_INTEGER","firstThinRowKeys","secondThinRowKeys","firstThinRowOptions","secondThinRowOptions","remainingTextOptions","firstThinRowHtml","secondThinRowHtml","remainingTextHtml","colorOrder","remainingColorOptions","remainingColorHtml","readingOrder","remainingReadingOptions","remainingReadingHtml","sectionOptionsHtml","optionsContainer","langItems","closeLanguageModal","openLanguageModal","searchValue","labelElement","langCode","currentLang","textScaleRange","clickedInsideLanguageModal","clickedLanguageToggle","btn","isSelected","activeColorFilter","displayWidget","widgetTemplate","widget","normalizedOffset","offsetX","buttonStyle","assign","overlayEvent","closeEvent","rerunDevScan","readyState","clickedToggle","clickedInsideWidget","clickedInsideMenu","startAccessibleWebWidget","dataAttributeOptions","dataOptions","baseOptions","applyThemeOverrides","initialColorFilter","launchWidget","AccessibleWebWidget","constructor","isAction","contrastFilterValues","saturationFilterValues","ttsNativeVoiceName","ttsNativeVoiceLang","normalizeTtsRate","ttsRate","normalizeTtsPitch","ttsPitch","mergedOptions","theme","widgetPrototype","widgetInstance","AccessibleWebWidgetOptions"],"mappings":";;;;;;;;;;;gDAAO,MAAMA,EAAe,CAEtBC,aAAc,UACdC,kBAAmB,UACnBC,iBAAkB,UAClBC,gBAAiB,UACjBC,UAAW,UACXC,kBAAmB,UAGnBC,WAAY,OACZC,eAAgB,UAChBC,YAAa,UACbC,eAAgB,UAGhBC,WAAY,UACZC,YAAa,UAGbC,aAAc,UACdC,WAAY,UACZC,aAAc,UAGdC,aAAc,OACdC,aAAc,MACdC,mBAAoB,SACpBC,aAAc,QACdC,OAAQ,IAGRC,iBAAkB,MAClBC,mBAAoB,OCjCbC,EAAe,CACtBC,cAAe,sVACfC,sBAAuB,CACjBC,QAAS,sVACT,SAAU,sQACV,SAAU,ohBACV,SAAU,2fAEhBC,aAAc,kNACdC,YAAa,iiBACbC,WAAY,uWACZC,SAAU,kWACVC,YAAa,qSACbC,cAAe,wSACfC,aAAc,0fACdC,eAAgB,+XAChBC,eAAgB,+oBAChBC,SAAU,uaACVC,aAAc,4ZACdC,cAAe,4iBACfC,aAAc,ydACdC,WAAY,qTACZC,cAAe,8TACfC,eAAgB,q1BAChBC,MAAO,iYACPC,MAAO,8LACPC,SAAU,oHACVC,SAAU,kGACVC,UAAW,uLACXC,eAAgB,8HAChBC,SAAU,w9BACVC,WAAY,oVACZC,oBAAqB,ogBACrBC,YAAa,0jBACbC,aAAc,6XACdC,aAAc,gXACdC,eAAgB,mVCpCTC,EAAmB,CAC1BC,IAAK,CAAC,GAAI,gDACVC,MAAO,CAAC,WACRC,QAAS,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,kBAAmB,wBACjEC,KAAM,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,kBAAmB,uBAAwB,MAAO,IAAK,IAAK,MAAO,IAAK,uBAAwB,QAAS,KAAM,OAGnJC,EAAwB,0ECPxBC,EAAe,CACtBC,GAAI,CACF,qBAAsB,qBACtB,iBAAkB,iBAClB,qBAAsB,qBACtBC,MAAS,QACT,sBAAuB,sBACvB,mBAAoB,mBACpB,kBAAmB,kBACnB,kBAAmB,kBACnB,gBAAiB,gBACjB,oBAAqB,oBACrB,gBAAiB,gBACjB,iBAAkB,iBAClB,gBAAiB,gBACjB,gBAAiB,gBACjB,kBAAmB,kBACnB,iBAAkB,iBAClBC,WAAc,aACdC,MAAS,QACT,gBAAiB,gBACjB,kBAAmB,kBACnB,aAAc,aACd,qBAAsB,qBACtB,qBAAsB,qBACtB,iBAAkB,iBAClB,cAAe,cACf,cAAe,cACf,gBAAiB,gBACjBC,SAAY,WACZ,0BAA2B,0BAC3B,cAAe,cACf,6BAA8B,6BAC9B,uBAAwB,uBACxB,0BAA2B,0BAC3B,aAAc,aACd,oBAAqB,oBACrBC,SAAY,WACZC,QAAW,UACXC,SAAY,WACZC,MAAS,QACT,mBAAoB,mBACpB,kBAAmB,kBACnBC,QAAW,UACXC,MAAS,QACT,aAAc,aACd,eAAgB,eAChB,eAAgB,eAChB,oBAAqB,oBACrBC,YAAe,cACf,iBAAkB,iBAClB,oBAAqB,oBACrB,qBAAsB,qBACtB,kBAAmB,kBACnBC,KAAQ,OACRC,MAAS,QACTC,KAAQ,OACR,mBAAoB,mBACpB,aAAc,cAEhBC,GAAI,CACF,qBAAsB,qBACtB,iBAAkB,0BAClB,qBAAsB,mCACtBd,MAAS,SACT,sBAAuB,wBACvB,mBAAoB,yBACpB,kBAAmB,mBACnB,kBAAmB,iBACnB,gBAAiB,iBACjB,oBAAqB,qBACrB,gBAAiB,iBACjB,iBAAkB,mBAClB,gBAAiB,kBACjB,gBAAiB,iBACjB,kBAAmB,mBACnB,iBAAkB,oBAClBC,WAAc,gBACdC,MAAS,YACT,gBAAiB,mBACjB,kBAAmB,mBACnB,aAAc,iBACd,qBAAsB,0BACtB,qBAAsB,6BACtB,iBAAkB,qBAClB,cAAe,eACf,cAAe,YACf,gBAAiB,iBACjBC,SAAY,SACZ,0BAA2B,0BAC3B,cAAe,oBACf,6BAA8B,4BAC9B,uBAAwB,uBACxB,0BAA2B,iCAC3B,aAAc,iBACd,oBAAqB,oBACrBC,SAAY,UACZC,QAAW,QACXC,SAAY,WACZC,MAAS,SACT,mBAAoB,qBACpB,kBAAmB,0BACnBC,QAAW,WACXC,MAAS,WACT,aAAc,iBACd,eAAgB,gBAChB,eAAgB,gBAChB,oBAAqB,uBACrBC,YAAe,cACf,iBAAkB,iBAClB,oBAAqB,wBACrB,qBAAsB,2BACtB,kBAAmB,kBACnBC,KAAQ,OACRC,MAAS,QACTC,KAAQ,OACR,aAAc,cAEhBE,GAAI,CACF,qBAAsB,qBACtB,iBAAkB,+BAClB,qBAAsB,oCACtBf,MAAS,SACT,sBAAuB,yBACvB,mBAAoB,8BACpB,kBAAmB,uBACnB,kBAAmB,sBACnB,gBAAiB,iBACjB,oBAAqB,2BACrB,gBAAiB,wBACjB,iBAAkB,kBAClB,gBAAiB,mBACjB,gBAAiB,kBACjB,kBAAmB,oBACnB,iBAAkB,oBAClBC,WAAc,aACdC,MAAS,SACT,gBAAiB,mBACjB,kBAAmB,yBACnB,aAAc,gBACd,qBAAsB,gCACtB,qBAAsB,+BACtB,iBAAkB,yBAClB,cAAe,mBACf,cAAe,oBACf,gBAAiB,kBACjBC,SAAY,SACZ,0BAA2B,+BAC3B,cAAe,qBACf,6BAA8B,8BAC9B,uBAAwB,0BACxB,0BAA2B,qCAC3B,aAAc,gBACd,oBAAqB,wBACrBC,SAAY,WACZC,QAAW,QACXC,SAAY,SACZC,MAAS,SACT,mBAAoB,sBACpB,kBAAmB,wBACnBC,QAAW,UACXC,MAAS,WACT,aAAc,mBACd,eAAgB,oBAChB,eAAgB,gBAChB,oBAAqB,sBACrBC,YAAe,cACf,iBAAkB,iBAClB,oBAAqB,0BACrB,qBAAsB,6BACtB,kBAAmB,kBACnBC,KAAQ,OACRC,MAAS,QACTC,KAAQ,OACR,aAAc,cAEhBG,GAAI,CACF,qBAAsB,wBACtB,iBAAkB,6BAClB,qBAAsB,kCACtBhB,MAAS,YACT,sBAAuB,qBACvB,mBAAoB,wBACpB,kBAAmB,oBACnB,kBAAmB,oBACnB,gBAAiB,kBACjB,oBAAqB,kBACrB,gBAAiB,qBACjB,iBAAkB,kBAClB,gBAAiB,mBACjB,gBAAiB,iBACjB,kBAAmB,iBACnB,iBAAkB,qBAClBC,WAAc,YACdC,MAAS,YACT,gBAAiB,YACjB,kBAAmB,sBACnB,aAAc,gBACd,qBAAsB,uBACtB,qBAAsB,0BACtB,iBAAkB,iBAClB,cAAe,aACf,cAAe,gBACf,gBAAiB,sBACjBC,SAAY,UACZ,0BAA2B,+BAC3B,cAAe,oBACf,6BAA8B,qCAC9B,uBAAwB,2BACxB,0BAA2B,mCAC3B,aAAc,WACd,oBAAqB,2BACrBC,SAAY,WACZC,QAAW,gBACXC,SAAY,QACZC,MAAS,SACT,mBAAoB,oBACpB,kBAAmB,0BACnBC,QAAW,UACXC,MAAS,UACT,aAAc,SACd,eAAgB,oBAChB,eAAgB,mBAChB,oBAAqB,2BACrBC,YAAe,cACf,iBAAkB,iBAClB,oBAAqB,oBACrB,qBAAsB,oBACtB,kBAAmB,kBACnBC,KAAQ,OACRC,MAAS,QACTC,KAAQ,OACR,aAAc,cAEhBI,GAAI,CACF,qBAAsB,wBACtB,iBAAkB,4BAClB,qBAAsB,oCACtBjB,MAAS,SACT,sBAAuB,uBACvB,mBAAoB,2BACpB,kBAAmB,mBACnB,kBAAmB,mBACnB,gBAAiB,iBACjB,oBAAqB,mBACrB,gBAAiB,mBACjB,iBAAkB,kBAClB,gBAAiB,mBACjB,gBAAiB,iBACjB,kBAAmB,kBACnB,iBAAkB,kBAClBC,WAAc,YACdC,MAAS,eACT,gBAAiB,kBACjB,kBAAmB,sBACnB,aAAc,gBACd,qBAAsB,4BACtB,qBAAsB,6BACtB,iBAAkB,sBAClB,cAAe,kBACf,cAAe,mBACf,gBAAiB,uBACjBC,SAAY,SACZ,0BAA2B,8BAC3B,cAAe,mBACf,6BAA8B,8BAC9B,uBAAwB,2BACxB,0BAA2B,yCAC3B,aAAc,cACd,oBAAqB,uBACrBC,SAAY,UACZC,QAAW,QACXC,SAAY,WACZC,MAAS,QACT,mBAAoB,0BACpB,kBAAmB,4BACnBC,QAAW,WACXC,MAAS,WACT,aAAc,oBACd,eAAgB,iBAChB,eAAgB,oBAChB,oBAAqB,sBACrBC,YAAe,cACf,iBAAkB,iBAClB,oBAAqB,uBACrB,qBAAsB,0BACtB,kBAAmB,kBACnBC,KAAQ,OACRC,MAAS,QACTC,KAAQ,OACR,aAAc,cAEhBK,GAAI,CACF,qBAAsB,mBACtB,iBAAkB,qBAClB,qBAAsB,yBACtBlB,MAAS,UACT,sBAAuB,qBACvB,mBAAoB,yBACpB,kBAAmB,qBACnB,kBAAmB,kBACnB,gBAAiB,iBACjB,oBAAqB,kBACrB,gBAAiB,sBACjB,iBAAkB,mBAClB,gBAAiB,kBACjB,gBAAiB,mBACjB,kBAAmB,uBACnB,iBAAkB,sBAClBC,WAAc,cACdC,MAAS,cACT,gBAAiB,qBACjB,kBAAmB,sBACnB,aAAc,iBACd,qBAAsB,0BACtB,qBAAsB,0BACtB,iBAAkB,wBAClB,cAAe,gBACf,cAAe,eACf,gBAAiB,sBACjBC,SAAY,OACZ,0BAA2B,2BAC3B,cAAe,qBACf,6BAA8B,6BAC9B,uBAAwB,sBACxB,0BAA2B,iCAC3B,aAAc,cACd,oBAAqB,qBACrBC,SAAY,cACZC,QAAW,YACXC,SAAY,YACZC,MAAS,iBACT,mBAAoB,oBACpB,kBAAmB,qBACnBC,QAAW,UACXC,MAAS,WACT,aAAc,gBACd,eAAgB,gBAChB,eAAgB,mBAChB,oBAAqB,mBACrBC,YAAe,cACf,iBAAkB,iBAClB,oBAAqB,uBACrB,qBAAsB,wBACtB,kBAAmB,kBACnBC,KAAQ,OACRC,MAAS,QACTC,KAAQ,OACR,aAAc,cAEhBM,GAAI,CACF,qBAAsB,mBACtB,iBAAkB,sBAClB,qBAAsB,gCACtBnB,MAAS,UACT,sBAAuB,sBACvB,mBAAoB,4BACpB,kBAAmB,mBACnB,kBAAmB,kBACnB,gBAAiB,oBACjB,oBAAqB,uBACrB,gBAAiB,gBACjB,iBAAkB,iBAClB,gBAAiB,kBACjB,gBAAiB,kBACjB,kBAAmB,mBACnB,iBAAkB,kBAClBC,WAAc,mBACdC,MAAS,YACT,gBAAiB,oBACjB,kBAAmB,qBACnB,aAAc,cACd,qBAAsB,2BACtB,qBAAsB,4BACtB,iBAAkB,0BAClB,cAAe,iBACf,cAAe,mBACf,gBAAiB,yBACjBC,SAAY,QACZ,0BAA2B,0BAC3B,cAAe,eACf,6BAA8B,8BAC9B,uBAAwB,qBACxB,0BAA2B,kCAC3B,aAAc,eACd,oBAAqB,yBACrBC,SAAY,YACZC,QAAW,UACXC,SAAY,cACZC,MAAS,SACT,mBAAoB,wBACpB,kBAAmB,iBACnBC,QAAW,UACXC,MAAS,UACT,aAAc,eACd,eAAgB,iBAChB,eAAgB,kBAChB,oBAAqB,0BACrBC,YAAe,cACf,iBAAkB,iBAClB,oBAAqB,2BACrB,qBAAsB,4BACtB,kBAAmB,kBACnBC,KAAQ,OACRC,MAAS,QACTC,KAAQ,OACR,aAAc,cAEhBO,GAAI,CACF,qBAAsB,uBACtB,iBAAkB,kBAClB,qBAAsB,0BACtBpB,MAAS,UACT,sBAAuB,oBACvB,mBAAoB,2BACpB,kBAAmB,sBACnB,kBAAmB,sBACnB,gBAAiB,eACjB,oBAAqB,mBACrB,gBAAiB,mBACjB,iBAAkB,mBAClB,gBAAiB,qBACjB,gBAAiB,mBACjB,kBAAmB,qBACnB,iBAAkB,oBAClBC,WAAc,WACdC,MAAS,cACT,gBAAiB,iBACjB,kBAAmB,kBACnB,aAAc,cACd,qBAAsB,yBACtB,qBAAsB,4BACtB,iBAAkB,kBAClB,cAAe,iBACf,cAAe,eACf,gBAAiB,uBACjBC,SAAY,QACZ,0BAA2B,iCAC3B,cAAe,kBACf,6BAA8B,mCAC9B,uBAAwB,wBACxB,0BAA2B,oCAC3B,aAAc,gBACd,oBAAqB,0BACrBC,SAAY,SACZC,QAAW,OACXC,SAAY,UACZC,MAAS,QACT,mBAAoB,mBACpB,kBAAmB,wBACnBC,QAAW,UACXC,MAAS,WACT,aAAc,mBACd,eAAgB,mBAChB,eAAgB,gBAChB,oBAAqB,wBACrBC,YAAe,cACf,iBAAkB,iBAClB,oBAAqB,wBACrB,qBAAsB,uBACtB,kBAAmB,kBACnBC,KAAQ,OACRC,MAAS,QACTC,KAAQ,OACR,aAAc,cAEhBQ,GAAI,CACF,qBAAsB,wBACtB,iBAAkB,wBAClB,qBAAsB,6BACtBrB,MAAS,UACT,sBAAuB,sBACvB,mBAAoB,0BACpB,kBAAmB,kBACnB,kBAAmB,iBACnB,gBAAiB,sBACjB,oBAAqB,oBACrB,gBAAiB,kBACjB,iBAAkB,iBAClB,gBAAiB,kBACjB,gBAAiB,gBACjB,kBAAmB,mBACnB,iBAAkB,mBAClBC,WAAc,aACdC,MAAS,eACT,gBAAiB,WACjB,kBAAmB,oBACnB,aAAc,eACd,qBAAsB,0BACtB,qBAAsB,2BACtB,iBAAkB,gBAClB,cAAe,cACf,cAAe,cACf,gBAAiB,sBACjBC,SAAY,OACZ,0BAA2B,+BAC3B,cAAe,yBACf,6BAA8B,gCAC9B,uBAAwB,2BACxB,0BAA2B,sCAC3B,aAAc,WACd,oBAAqB,uBACrBC,SAAY,UACZC,QAAW,UACXC,SAAY,QACZC,MAAS,SACT,mBAAoB,yBACpB,kBAAmB,0BACnBC,QAAW,UACXC,MAAS,WACT,aAAc,mBACd,eAAgB,kBAChB,eAAgB,kBAChB,oBAAqB,uBACrBC,YAAe,cACf,iBAAkB,iBAClB,oBAAqB,wBACrB,qBAAsB,wBACtB,kBAAmB,kBACnBC,KAAQ,OACRC,MAAS,QACTC,KAAQ,OACR,aAAc,cAEhBS,GAAI,CACF,qBAAsB,mBACtB,iBAAkB,uBAClB,qBAAsB,2BACtBtB,MAAS,UACT,sBAAuB,wBACvB,mBAAoB,wBACpB,kBAAmB,qBACnB,kBAAmB,qBACnB,gBAAiB,oBACjB,oBAAqB,uBACrB,gBAAiB,sBACjB,iBAAkB,mBAClB,gBAAiB,kBACjB,gBAAiB,mBACjB,kBAAmB,qBACnB,iBAAkB,qBAClBC,WAAc,cACdC,MAAS,cACT,gBAAiB,sBACjB,kBAAmB,oBACnB,aAAc,iBACd,qBAAsB,0BACtB,qBAAsB,yBACtB,iBAAkB,uBAClB,cAAe,eACf,cAAe,eACf,gBAAiB,sBACjBC,SAAY,OACZ,0BAA2B,4BAC3B,cAAe,uBACf,6BAA8B,8BAC9B,uBAAwB,uBACxB,0BAA2B,kCAC3B,aAAc,kBACd,oBAAqB,qBACrBC,SAAY,YACZC,QAAW,YACXC,SAAY,WACZC,MAAS,YACT,mBAAoB,qBACpB,kBAAmB,sBACnBC,QAAW,UACXC,MAAS,WACT,aAAc,eACd,eAAgB,eAChB,eAAgB,iBAChB,oBAAqB,uBACrBC,YAAe,cACf,iBAAkB,iBAClB,oBAAqB,wBACrB,qBAAsB,uBACtB,kBAAmB,kBACnBC,KAAQ,OACRC,MAAS,QACTC,KAAQ,OACR,aAAc,eAITU,EAAsB,CAC7B,CAAEC,KAAM,KAAMC,MAAO,qBACrB,CAAED,KAAM,KAAMC,MAAO,sBACrB,CAAED,KAAM,KAAMC,MAAO,qBACrB,CAAED,KAAM,KAAMC,MAAO,oBACrB,CAAED,KAAM,KAAMC,MAAO,qBACrB,CAAED,KAAM,KAAMC,MAAO,qBACrB,CAAED,KAAM,KAAMC,MAAO,mBACrB,CAAED,KAAM,KAAMC,MAAO,qBACrB,CAAED,KAAM,KAAMC,MAAO,sBACrB,CAAED,KAAM,KAAMC,MAAO,2BC/kBdC,EAAe,CAE1B,gBAAAC,GACI,IACE,MAAMC,EAAO,WAGb,OAFAC,aAAaC,QAAQF,EAAMA,GAC3BC,aAAaE,WAAWH,IACjB,CACT,CAAE,MACA,OAAO,CACT,CACF,EAEF,WAAAI,CAAYC,GACR,MAAMC,EAAaD,EAAO,IAC1B,IACE,MAAME,EAAgBC,mBAAmBC,SAASC,QAClD,OAAOH,EAAcI,MAAM,KACxBC,IAAIC,GAAKA,EAAEC,QACXC,KAAKF,GAAKA,EAAEG,WAAWV,KACtBW,UAAUX,EAAWY,SAAW,IACtC,CAAE,MAAOC,GAEP,OADAC,QAAQC,KAAK,wBAAyBF,GAC/B,IACT,CACF,EAEF,WAAAG,CAAYjB,EAAMkB,EAAOC,GACrB,IACE,MAAMC,EAAI,IAAIC,KACdD,EAAEE,QAAQF,EAAEG,UAAoB,GAAPJ,EAAY,GAAK,GAAK,KAC/C,MAAMK,EAAU,WAAaJ,EAAEK,cACzBC,EAAwC,WAA7BC,OAAOC,SAASC,SACjCzB,SAASC,OAASL,EAAO,IAAMkB,EAAQ,IAAMM,EAAU,2BAA6BE,EAAW,UAAY,GAC7G,CAAE,MAAOZ,GACPC,QAAQC,KAAK,wBAAyBF,EACxC,CACF,EAEF,gBAAAgB,GACI,IAEE,GAAIC,KAAKrC,mBAAoB,CAC3B,MAAMsC,EAASpC,aAAaqC,QAAQF,KAAKG,WACzC,GAAIF,EAAQ,CACV,MAAMG,EAASC,KAAKC,MAAML,GAC1B,GAAIG,EAAOG,KAAM,OAAOH,EAAOG,IACjC,CACF,CAEA,MAAMC,EAAYR,KAAKhC,YAAYgC,KAAKG,WACxC,GAAIK,GAA2B,KAAdA,EAAkB,CACjC,MAAMJ,EAASC,KAAKC,MAAME,GAC1B,GAAIJ,EAAOG,KAAM,OAAOH,EAAOG,IACjC,CACF,CAAE,MAEF,CACA,OAAO,IACT,EAEF,kBAAAE,GACI,GAAyB,oBAAdC,UAA2B,MAAO,KAE7C,MAAMC,EAAiBX,KAAKY,mBAAmBpC,IAAI+B,GAAQA,EAAK/C,MAG1DqD,EAAmBH,UAAUI,UAC/B,IAAIJ,UAAUI,WACd,CAACJ,UAAUzF,UAAYyF,UAAUK,cAAgB,MAErD,IAAK,MAAMC,KAAeH,EAAkB,CAE1C,MAAMI,EAAcD,EAAYzC,MAAM,KAAK,GAAG2C,cAE9C,GAAIP,EAAeQ,SAASF,GAC1B,OAAOA,CAEX,CAGA,MAAO,IACT,EAEF,kBAAAG,GAEI,MAAMC,EAAYrB,KAAKD,mBACvB,GAAIsB,EAAW,CAEb,GADuBrB,KAAKY,mBAAmBpC,IAAI+B,GAAQA,EAAK/C,MAC7C2D,SAASE,GAC1B,OAAOA,CAEX,CACA,OAAOrB,KAAKS,oBACd,EAEF,SAAAa,GACI,GAAsB,oBAAX1B,OAAwB,OAAO,EAC1C,IAEE,MAAoC,SADlB,IAAI2B,gBAAgB3B,OAAOC,SAAS2B,QACrCC,IAAI,UACvB,CAAE,MACA,OAAO,CACT,CACF,EAEF,uBAAAC,GACI,MAAMC,EAAU,CAAA,EAChB,GAAwB,oBAAbtD,SAA0B,OAAOsD,EAE5C,MAAMC,EAAa,CAAC,OAAQ,WAAY,SAAU,OAAQ,QAEpDC,EAAc,CAACC,EAAK3C,KACxB,GAAIA,SAA4D,KAAVA,EACtD,OAAQ2C,GACN,IAAK,OAAQ,CACX,MAAMvB,EAAOwB,OAAO5C,GAAOT,OACvB6B,IAAMoB,EAAQpB,KAAOA,GACzB,KACF,CACA,IAAK,WAAY,CACf,MAAMyB,EAAWD,OAAO5C,GAAOT,OAC3BsD,IAAUL,EAAQK,SAAWA,GACjC,KACF,CACA,IAAK,SAAU,CACb,MAAMC,EAAajC,KAAKkC,gBAAgB/C,GACpC8C,IAAYN,EAAQQ,OAASF,GACjC,KACF,CACA,IAAK,OAAQ,CACX,MAAMG,EAAiBpC,KAAKqC,oBAAoBlD,GAC5CiD,IAAgBT,EAAQW,KAAOF,GACnC,KACF,CACA,IAAK,OAAQ,CACX,MAAMG,EAAOR,OAAO5C,GAAOT,OACvB6D,IAAMZ,EAAQY,KAAOA,GACzB,KACF,IAeEC,EAAmB,GAmBzB,OAlBInE,SAASoE,eACXD,EAAiBE,KAAKrE,SAASoE,eAEjCpE,SAASsE,iBAAiB,uHAAuHC,QAAQC,IAClJL,EAAiBrB,SAAS0B,IAC7BL,EAAiBE,KAAKG,KAG1BL,EAAiBI,QAlBOE,IACjBA,GACLlB,EAAWgB,QAAQd,IACjB,MAAMiB,EAAW,YAAYjB,IACvBkB,EAAYF,EAAGG,aAAeH,EAAGG,aAAaF,GAAY,KAChElB,EAAYC,EAAKkB,OAerBpB,EAAWgB,QAAQd,IACjB,QAAqBoB,IAAjBvB,EAAQG,GAAoB,OAChC,MAAMgB,EAAKzE,SAAS8E,cAAc,aAAarB,MAC3CgB,GACFjB,EAAYC,EAAKgB,EAAGG,aAAa,YAAYnB,QAI1CH,CACT,EAEF,eAAAO,CAAgB/C,GACZ,IAAKA,GAAmB,IAAVA,EAAa,OAC3B,IAAIiE,EAAQ,GAEVA,EADEC,MAAMC,QAAQnE,GACRA,EACkB,iBAAVA,EACRA,EAAMZ,MAAM,SAEZ,CAACY,GAEX,MAAMoE,EAASH,EACZ5E,IAAIgF,IACH,MAAMC,EAASC,OAAOF,GACtB,OAAOE,OAAOC,SAASF,GAAUG,KAAKC,MAAMJ,GAAU,OAEvDK,OAAOL,GAAqB,OAAXA,GAEpB,OAAKF,EAAOzE,QACU,IAAlByE,EAAOzE,QAAcyE,EAAOb,KAAKa,EAAO,IACrC,CAACA,EAAO,QAAkBL,IAAdK,EAAO,GAAmBA,EAAO,GAAKA,EAAO,UAFhE,CAGF,EAEF,mBAAAlB,CAAoBlD,GAChB,MAAM4E,EAAW/D,KAAKgE,aAAazL,YAAc,OACjD,GAAqB,iBAAV4G,GAAsBuE,OAAOC,SAASxE,GAC/C,MAAO,GAAGyE,KAAKK,IAAI,GAAIL,KAAKC,MAAM1E,QAEpC,GAAqB,iBAAVA,EAAoB,CAC7B,MAAM+E,EAAU/E,EAAMT,OACtB,IAAKwF,EAAS,OAAOH,EACrB,GAAI,8BAA8BnG,KAAKsG,GACrC,OAAOA,EAET,MAAMC,EAAUT,OAAOQ,GACvB,OAAIR,OAAOC,SAASQ,GACX,GAAGP,KAAKK,IAAI,GAAIL,KAAKC,MAAMM,QAE7BD,CACT,CACA,OAAOH,CACT,EAEF,aAAAK,CAActB,EAAIuB,GACd,GAAKvB,EACL,IACEA,EAAGwB,MAAMC,aAA4B,IAAVF,EACD,SAArBvB,EAAGwB,MAAMC,QAAqB,QAAU,OACxCF,EAAQ,QAAU,MACzB,CAAE,MAAOtF,GACPC,QAAQC,KAAK,0BAA2BF,EAC1C,CACF,EAEF,4BAAAyF,CAA6B1C,GACzB,MAAM2C,EAAiBzE,KAAK0E,cAAcD,gBAAkB,CAAA,EAC5D,OAAOE,OAAOC,UAAUC,eAAeC,KAAKL,EAAgB3C,EAC9D,EAEF,0BAAAiD,CAA2BjD,GACvB,MAAMkD,EAAShF,KAAK0E,cAAcM,QAAU,CAAA,EAC5C,QAAKL,OAAOC,UAAUC,eAAeC,KAAKE,EAAQlD,KAG1C9B,KAAKwE,6BAA6B1C,EAC5C,EAEF,gCAAAmD,GACI,MAAMD,EAAShF,KAAK0E,cAAcM,QAAU,CAAA,EACtCP,EAAiBzE,KAAK0E,cAAcD,gBAAkB,CAAA,EAE5D,OADapB,MAAMC,QAAQtD,KAAKkF,iBAAmBlF,KAAKkF,gBAAkB,IAC9DC,KAAMrD,GAChB6C,OAAOC,UAAUC,eAAeC,KAAKE,EAAQlD,KAC5C6C,OAAOC,UAAUC,eAAeC,KAAKL,EAAgB3C,GAE1D,EAEF,WAAAsD,CAAYC,EAAS1D,EAAU,IAC3B,MAAM2D,EAAS3D,EAAQ2D,QAAU,OAC3BC,EAAiBvF,KAAK0E,aAAaM,QAAU,CAAA,EAC7CQ,EAAyBxF,KAAK0E,aAAaD,gBAAkB,CAAA,EAC7DgB,EAAa,IAAKF,KAAmBF,GACrCK,EAAqB,IAAKF,GAC1BG,EAAOhB,OAAOgB,KAAKN,GAAW,CAAA,GAErB,WAAXC,EACFK,EAAK/C,QAASd,IACZ4D,EAAmB5D,GAAOuD,EAAQvD,KAGpC6D,EAAK/C,QAASd,IACR6C,OAAOC,UAAUC,eAAeC,KAAKY,EAAoB5D,WACpD4D,EAAmB5D,KAKhC,MAAM8D,EAAgB,IAAK5F,KAAK0E,aAAcM,OAAQS,EAAYhB,eAAgBiB,GAElF,OADA1F,KAAK6F,WAAWD,GACTA,CACT,EAEF,UAAAC,CAAWC,GAEP,GADA9F,KAAK0E,aAAe,IAAK1E,KAAK0E,gBAAiBoB,GAC3C9F,KAAKrC,mBACP,IACEE,aAAaC,QAAQkC,KAAKG,UAAWE,KAAK0F,UAAU/F,KAAK0E,cAC3D,CAAE,MACA1E,KAAKd,YAAYc,KAAKG,UAAWE,KAAK0F,UAAU/F,KAAK0E,cAAe,IACtE,MAEA1E,KAAKd,YAAYc,KAAKG,UAAWE,KAAK0F,UAAU/F,KAAK0E,cAAe,IAExE,EAEF,aAAAsB,CAAclE,GACV,OAAO9B,KAAK0E,aAAaM,OAAShF,KAAK0E,aAAaM,OAAOlD,QAAOoB,CACpE,EAEF,UAAA+C,CAAWC,GAAQ,GACf,GAAIA,EAAO,OAAOlG,KAAK0E,aACvB,MAAMyB,EAAcnG,KAAKoG,mBACzB,GAAID,EACF,IACEnG,KAAK0E,aAAerE,KAAKC,MAAM6F,EACjC,CAAE,MAAOpH,GACPC,QAAQC,KAAK,wBAAyBF,GACtCiB,KAAK0E,aAAe,CAAA,CACtB,CAEF,OAAO1E,KAAK0E,YACd,EAEF,gBAAA0B,GACI,GAAIpG,KAAKrC,mBACP,IACE,MAAMsC,EAASpC,aAAaqC,QAAQF,KAAKG,WACzC,GAAIF,EAAQ,OAAOA,CACrB,CAAE,MAAOlB,GACPC,QAAQC,KAAK,gDAAiDF,EAChE,CAEF,MAAMyB,EAAYR,KAAKhC,YAAYgC,KAAKG,WACxC,OAAOK,GAA2B,KAAdA,EAAmBA,EAAY,IACrD,EAEF,aAAA6F,CAAcC,GACV,IACE,MAAMC,EAAW,YAAYD,IACvBE,EAAUnI,SAAS8E,cAAc,IAAIoD,MAC3C,OAAOC,EAAUA,EAAQvD,aAAasD,GAAY,IACpD,CAAE,MAAOxH,GAEP,OADAC,QAAQC,KAAK,iCAAiCqH,IAAQvH,GAC/C,IACT,CACF,GCtUJ,MACM0H,EAAgB,+ioCAOpBC,KAAK,MAKMC,EAAe,CAE1B,WAAAC,CAAYC,EAAUC,EAASzI,UAC7B,IACE,OAAOyI,EAAO3D,cAAc0D,EAC9B,CAAE,MAAO9H,GAEP,OADAC,QAAQC,KAAK,6BAA6B4H,IAAY9H,GAC/C,IACT,CACF,EAEA,WAAAgI,CAAYC,EAAIC,GACd,GAAKA,GAA2B,oBAAb5I,SACnB,IACE,IAAIiG,EAAQjG,SAAS6I,eAAeF,IAAO3I,SAAS8I,cAAc,SAClE7C,EAAM8C,UAAYH,EACb3C,EAAM0C,KACT1C,EAAM0C,GAAKA,EACX3I,SAASgJ,KAAKC,YAAYhD,GAE9B,CAAE,MAAOvF,GACPC,QAAQC,KAAK,2BAA4BF,EAC3C,CACF,EAEA,SAAAwI,CAAUC,GACR,IAAIP,EAAM,GACV,IAAKO,EAAQ,OAAOP,EACpB,MAAMQ,EAAkB,CAAC,MAAO,OAAQ,QAAS,WAAY,IACvDC,EAAqB,CAAC,UAC5B,IAAK,IAAI5F,KAAO0F,EAAQ,CACtB,IAAK7C,OAAOC,UAAUC,eAAeC,KAAK0C,EAAQ1F,GAAM,UACzC4F,EAAmBvG,SAASW,GAAO2F,EAAkB,CAAC,KAC5D7E,QAAQ+E,IACfV,GAAO,GAAGU,IAAS7F,KAAO0F,EAAO1F,kBAErC,CACA,OAAOmF,CACT,EAEA,OAAAW,CAAQf,EAAUgB,EAAkBZ,GAClC,IAAIa,EAAS,GAIb,OAHAD,EAAiBjF,QAAQmF,IACvBD,GAAU,GAAGjB,KAAYkB,KAASd,OAE7Ba,CACT,EAEA,QAAAE,CAAS5H,GACP,IAAKA,EAAQ,MAAO,GACpB,IAAI0H,EAAS,GAMb,OALAA,GAAU9H,KAAKuH,UAAUnH,EAAOoH,QAAU,CAAA,GACtCM,EAAOhJ,QAAUsB,EAAOyG,WAC1BiB,EAAS9H,KAAK4H,QAAQxH,EAAOyG,SAAUzG,EAAOyH,kBAAoB,CAAC,IAAKC,IAE1EA,GAAU1H,EAAO6G,KAAO,GACjBa,CACT,EAEA,cAAAG,CAAe7H,GACb,IAAI4G,GAAEA,EAAK,GAAEkB,OAAEA,GAAS,GAAU9H,EAC9B+H,EAAU,OAAOnB,IACrB,GAAIkB,EAAQ,CACV,IAAIjB,EAAMjH,KAAKgI,SAAS5H,GACxBJ,KAAK+G,YAAYoB,EAASlB,EAC5B,KAAO,CACL,IAAI3C,EAAQjG,SAAS6I,eAAeiB,GAChC7D,GAAOA,EAAM8D,QACnB,CACA/J,SAASgK,gBAAgBC,UAAUC,OAAOJ,EAASD,EACrD,EAEA,mBAAAM,GACE,GAAwB,oBAAbnK,SAA0B,OAErC,MAAMoK,EAAO,CACX,sBAAuBzI,KAAKgE,YAAY/L,aACxC,4BAA6B+H,KAAKgE,YAAY9L,kBAC9C,2BAA4B8H,KAAKgE,YAAY7L,iBAC7C,iBAAkB6H,KAAKgE,YAAY5L,gBACnC,mBAAoB4H,KAAKgE,YAAY3L,UACrC,4BAA6B2H,KAAKgE,YAAY1L,kBAC9C,gBAAiB0H,KAAKgE,YAAYxL,eAClC,qBAAsBwH,KAAKgE,YAAYvL,YACvC,yBAA0BuH,KAAKgE,YAAYtL,eAC3C,oBAAqBsH,KAAKgE,YAAYrL,WACtC,qBAAsBqH,KAAKgE,YAAYpL,YACvC,sBAAuBoH,KAAKgE,YAAY/K,aACxC,6BAA8B+G,KAAKgE,YAAY9K,mBAC/C,sBAAuB8G,KAAKgE,YAAYhL,aACxC,4BAA6BgH,KAAKgE,YAAY3K,iBAC9C,6BAA8B2G,KAAKgE,YAAY1K,mBAC/C,uBAAwByI,OAAO/B,KAAKgE,YAAY5K,QAChD,oBAAqB4G,KAAKgE,YAAYzL,YAGxCoM,OAAO+D,QAAQD,GAAM7F,QAAQ,EAAEd,EAAK3C,MAClCd,SAASgK,gBAAgB/D,MAAMqE,YAAY7G,EAAK3C,IAEpD,EAEA,oBAAAyJ,GACM5I,KAAK6I,yBACT7I,KAAK+G,YApHe,oBAoHcN,GAClCzG,KAAK6I,wBAAyB,EAChC,GC3HIC,EAAmB,SACnBC,EAAe,yCAAyCD,eAExDE,EAAkB,CACtBC,QAAS,CAAC,SAAU,UAAW,UAAW,WAAY,kBAGlDC,EAAgC,mCAGzBC,EAAiB,CAE5B,wBAAAC,CAAyBC,GACrB,OAAc,IAAVA,EACK,CAAEvH,IAAK,iBAAkBrE,MAAO,QAAS8E,KAAMvC,KAAKsJ,YAAYhP,eAE3D,IAAV+O,EACK,CAAEvH,IAAK,gBAAiBrE,MAAO,OAAQ8E,KAAMvC,KAAKsJ,YAAYjP,cAEhE,CAAEyH,IAAK,KAAMrE,MAAO,WAAY8E,KAAMvC,KAAKsJ,YAAYlP,SAChE,EAEF,0BAAAmP,CAA2BC,EAAQH,GAC/B,IAAKG,EAAQ,OACb,MAAMjF,EAAUvE,KAAKoJ,yBAAyBC,GACxCI,EAAWD,EAAOrG,cAAc,OAClCsG,EACFA,EAASC,UAAYnF,EAAQhC,KAE7BiH,EAAOG,mBAAmB,aAAcpF,EAAQhC,MAGlD,MAAMqH,EAAkB5J,KAAK6J,UAAUtF,EAAQ9G,OACzCqM,EAAYN,EAAOrG,cAAc,cACnC2G,IACFA,EAAUC,aAAa,gBAAiBxF,EAAQ9G,OAChDqM,EAAUE,UAAYJ,GAExBJ,EAAOO,aAAa,QAASH,GAC7BJ,EAAOO,aAAa,aAAcH,GAClCJ,EAAOO,aAAa,qBAAsBxF,EAAQzC,KAAO,MAC3D,EAEF,0BAAAmI,CAA2BZ,GACvB,OAAc,IAAVA,EACK,CAAEvH,IAAK,iBAAkBrE,MAAO,MAAO8E,KAAMvC,KAAKsJ,YAAY7O,eAEzD,IAAV4O,EACK,CAAEvH,IAAK,kBAAmBrE,MAAO,OAAQ8E,KAAMvC,KAAKsJ,YAAY5O,gBAElE,CAAEoH,IAAK,KAAMrE,MAAO,aAAc8E,KAAMvC,KAAKsJ,YAAY9O,WAClE,EAEF,4BAAA0P,CAA6BV,EAAQH,GACjC,IAAKG,EAAQ,OACb,MAAMjF,EAAUvE,KAAKiK,2BAA2BZ,GAC1CI,EAAWD,EAAOrG,cAAc,OAClCsG,EACFA,EAASC,UAAYnF,EAAQhC,KAE7BiH,EAAOG,mBAAmB,aAAcpF,EAAQhC,MAGlD,MAAMqH,EAAkB5J,KAAK6J,UAAUtF,EAAQ9G,OACzCqM,EAAYN,EAAOrG,cAAc,cACnC2G,IACFA,EAAUC,aAAa,gBAAiBxF,EAAQ9G,OAChDqM,EAAUE,UAAYJ,GAExBJ,EAAOO,aAAa,QAASH,GAC7BJ,EAAOO,aAAa,aAAcH,GAClCJ,EAAOO,aAAa,uBAAwBxF,EAAQzC,KAAO,MAC7D,EAEF,cAAAqI,GACI,GAAwB,oBAAb9L,SAA0B,OAAO,KAC5C,GAAI2B,KAAKoK,iBAAmB/L,SAASgM,KAAKC,SAAStK,KAAKoK,iBAEtD,OADApK,KAAKuK,sBACEvK,KAAKoK,gBAEd,MAAMI,EAAWnM,SAAS6I,eAAe,iBACzC,GAAIsD,EAMF,OALAxK,KAAKoK,gBAAkBI,EAClBA,EAASvH,aAAa,kBACzBuH,EAAST,aAAa,gBAAiB,8BAEzC/J,KAAKuK,sBACEC,EAGT,MAAMhB,EAASnL,SAAS8I,cAAc,UAoCtC,OAnCAqC,EAAOiB,KAAO,SACdjB,EAAOxC,GAAK,gBACZwC,EAAOkB,UAAY,gBACnBlB,EAAOO,aAAa,WAAY,KAChCP,EAAOO,aAAa,gBAAiB,8BACrCP,EAAOO,aAAa,aAAc/J,KAAK6J,UAAU,+BACjDL,EAAOmB,YAAc3K,KAAK6J,UAAU,8BAEpCL,EAAOoB,iBAAiB,QAAUC,IAChCA,EAAMC,iBACN,MAAMvC,EAASvI,KAAK+K,mBACpB,IAAKxC,EAAQ,OAEb,MAAMyC,EAAchL,KAAKiL,qBAAuBjL,KAAKkL,cAG/CC,EAAY,KAChB,MAAMC,EAAapL,KAAKiL,qBAAuBjL,KAAKkL,cACpD,IAAKE,EAAY,OACjB,MAAMC,EAAarL,KAAKsL,qBAAqBF,GACzCC,EAAWvM,QACbuM,EAAW,GAAGE,SAPIP,GAA6C,SAA9BA,EAAY1G,MAAMC,QAerD4G,KAHA5C,EAAOiD,QACPC,sBAAsBN,MAM1B9M,SAASgM,KAAKqB,aAAalC,EAAQnL,SAASgM,KAAKsB,YACjD3L,KAAKoK,gBAAkBZ,EAChBA,CACT,EAEF,mBAAAe,GACI,IAAKvK,KAAKoK,gBAAiB,OAC3B,MAAMtI,EAAM9B,KAAKoK,gBAAgBnH,aAAa,kBAAoB,6BAC5DxF,EAAQuC,KAAK6J,UAAU/H,GAC7B9B,KAAKoK,gBAAgBO,YAAclN,EACnCuC,KAAKoK,gBAAgBL,aAAa,aAActM,EAClD,EAEFmO,kBAAkBpF,GACPA,EAAQqF,QAAQ,0CAG3B,wBAAAC,CAAyBC,EAAc1N,SAASgM,MAC5C,MAAM2B,EAAoB,IAAIC,IAC9B,GAAwB,oBAAb5N,UAAkD,oBAAf6N,WAC5C,OAAOF,EAGT,MAAMG,EAAOJ,aAAuBvP,QAAUuP,EAAc1N,SAASgM,KACrE,IAAK8B,EAAM,OAAOH,EAElB,MAAMI,EAAS/N,SAASgO,iBAAiBF,EAAMD,WAAWI,UAAW,CACnEC,WAAaC,IACX,IAAKA,IAASA,EAAK7B,cAAgB6B,EAAK7B,YAAYjM,OAClD,OAAOwN,WAAWO,cAEpB,MAAM3F,EAAS0F,EAAKE,cACpB,OAAK5F,EACD9G,KAAK4L,kBAAkB9E,IACvBA,EAAO+E,QAAQ,gDAGf/E,EAAO6F,QAAQ3M,KAAK4M,oBAJmBV,WAAWO,cAO/CP,WAAWW,cAREX,WAAWO,iBAYnC,IAAIK,EAAcV,EAAOW,WACzB,KAAOD,GAAa,CAClB,MAAMhG,EAASgG,EAAYJ,cACvB5F,GACFkF,EAAkBgB,IAAIlG,GAExBgG,EAAcV,EAAOW,UACvB,CAEA,OAAOf,CACT,EAEF,mBAAAiB,CAAoBzG,EAAS0G,GACzB,IACG1G,KACCA,aAAmBhK,UACrBwD,KAAK4L,kBAAkBpF,IACvBA,EAAQ8B,UAAUgC,SAAS,mBAC3B9D,EAAQ8B,UAAUgC,SAAS,MAE3B,OAEF,MAAM6C,EAAW,oBACjB,IAAK3G,EAAQ4G,aAAaD,GAAW,CACnC,MAAME,EAAeC,WAAW1N,OAAO2N,iBAAiB/G,GAASgH,UACjE,GAAI9J,OAAO+J,MAAMJ,IAAiBA,GAAgB,EAChD,OAEF7G,EAAQuD,aAAaoD,EAAUpL,OAAOsL,GACxC,CACA,MAAMK,EAAWJ,WAAW9G,EAAQvD,aAAakK,IAC7CzJ,OAAO+J,MAAMC,IAAaA,GAAY,IAG1ClH,EAAQlC,MAAMkJ,SAAcE,EAAWR,EAAd,KAC3B,EAEF,uBAAAS,IACQ3N,KAAK4N,mBAAsBvP,SAASgM,OACxCrK,KAAK4N,kBAAoB,IAAIC,iBAAkBC,IAC7C,GAAI9N,KAAK+N,4BAA8B,EACrC,OAEF,MAAMC,EAAU,IAAI/B,IACpB6B,EAAUlL,QAAQqL,IAChBA,EAASC,WAAWtL,QAAQ4J,IACpBA,aAAgBhQ,UAClBgQ,EAAKG,SAAWH,EAAKG,QAAQ3M,KAAK4M,qBACpCoB,EAAQhB,IAAIR,GAEdA,EAAK7J,mBAAmB3C,KAAK4M,oBAAoBhK,QAAQE,GAAMkL,EAAQhB,IAAIlK,IAC3E9C,KAAK8L,yBAAyBU,GAAM5J,QAAQE,GAAMkL,EAAQhB,IAAIlK,SAG7DkL,EAAQ1L,MACb0L,EAAQpL,QAAQE,GAAM9C,KAAKiN,oBAAoBnK,EAAI9C,KAAK+N,+BAE1D/N,KAAK4N,kBAAkBO,QAAQ9P,SAASgM,KAAM,CAAE+D,WAAW,EAAMC,SAAS,IAC5E,EAEF,2BAAAC,GACStO,KAAK4N,oBACV5N,KAAK4N,kBAAkBW,aACvBvO,KAAK4N,kBAAoB,KAC3B,EAEF,SAAAY,CAAUC,EAAW,GACjB,IAEE,GADAzO,KAAK+N,2BAA6BU,EAC9BA,EAAW,EAAG,CAChBzO,KAAK2N,0BACYtP,SAASsE,iBAAiB3C,KAAK4M,oBACvChK,QAAQE,GAAM9C,KAAKiN,oBAAoBnK,EAAI2L,IACpDzO,KAAK8L,yBAAyBzN,SAASgM,MAAMzH,QAAQE,GAAM9C,KAAKiN,oBAAoBnK,EAAI2L,GAC1F,KAAO,CACLzO,KAAKsO,8BACkBjQ,SAASsE,iBAAiB,uBAClCC,QAAQE,IACjB9C,KAAK4L,kBAAkB9I,KAC3BA,EAAGwB,MAAMkJ,SAAW,GACpB1K,EAAG4L,gBAAgB,uBAEvB,CACF,CAAE,MAAO3P,GACPC,QAAQC,KAAK,sBAAuBF,EACtC,CACF,EAEF,qBAAA4P,CAAsBC,GAClB,MAAMC,EAAMnL,OAAO1D,KAAK8O,sBAAwB,GAC1C7K,EAAMP,OAAO1D,KAAK+O,sBAAwB,IAC1CC,EAAOtL,OAAO1D,KAAKiP,uBAAyB,EAC5C9K,EAAUT,OAAOkL,GACvB,IAAKlL,OAAOC,SAASQ,GAAU,OAAO,IACtC,MAAM+K,EAAUtL,KAAKC,OAAOM,EAAU0K,GAAOG,GAAQA,EAAOH,EAC5D,OAAOjL,KAAKiL,IAAI5K,EAAKL,KAAKK,IAAI4K,EAAKK,GACrC,EAEF,mBAAAC,CAAoBC,EAAa,GAC7B,IAAmB,IAAfA,SAAwBA,EAC1B,OAAOpP,KAAK2O,sBAAsB,KAEpC,MAAMxK,EAAUT,OAAO0L,GACvB,IAAK1L,OAAOC,SAASQ,GACnB,OAAOnE,KAAK2O,sBAAsB,KAEpC,GAAIxK,GAAW,EACb,OAAOnE,KAAK2O,sBAAsB,KAEpC,MAAMC,EAAUzK,EAAU,GAAKA,EAAoB,IAAVA,EACzC,OAAOnE,KAAK2O,sBAAsBC,EACpC,EAEF,sBAAAS,CAAuBC,EAAMF,EAAa,GACtC,IAAKE,IAASA,EAAKnM,cAAe,OAClC,MAAMoM,EAAQD,EAAKnM,cAAc,yBAC3B1F,EAAQ6R,EAAKnM,cAAc,2BAC3ByL,EAAU5O,KAAKmP,oBAAoBC,GACzC,GAAIG,EAAO,CACT,MAAMV,EAAMnL,OAAO1D,KAAK8O,sBAAwB,GAE1CU,GAAaZ,EAAUC,KADjBnL,OAAO1D,KAAK+O,sBAAwB,KACLF,GAAQ,IACnDU,EAAMpQ,MAAQ4C,OAAO6M,GACrBW,EAAMjL,MAAMqE,YAAY,4BAA6B,GAAG/E,KAAKK,IAAI,EAAGL,KAAKiL,IAAI,IAAKW,OACpF,CACI/R,IACFA,EAAMkN,YAAc,GAAGiE,KAE3B,EAEF,uBAAAa,CAAwBb,EAASjN,EAAU,IACvC,MAAM+N,GAAoC,IAApB/N,EAAQgO,QACxBC,EAAiB5P,KAAK2O,sBAAsBC,GAC5C1B,EAAaxJ,QAAQkM,EAAiB,KAAKC,QAAQ,IACnDC,EAAa9P,KAAK+P,gBAAgBC,QAAQ9C,GAMhD,GAJIlN,KAAKiQ,mBAAmB,gBAC1BjQ,KAAKiQ,mBAAmB,cAAcC,aAAeJ,GAGnDA,GAAa,EACf9P,KAAKmQ,eAAiBL,MACjB,CACL,IAAIM,EAAe,EACfC,EAAcC,IAClBtQ,KAAK+P,gBAAgBnN,QAAQ,CAACzD,EAAOkK,KACnC,MAAMkH,EAAW3M,KAAK4M,IAAIrR,EAAQ+N,GAC9BqD,EAAWF,IACbA,EAAcE,EACdH,EAAe/G,KAGnBrJ,KAAKmQ,eAAiBC,CACxB,CAQA,OANApQ,KAAKwO,UAAUtB,GAEXwC,GACF1P,KAAKoF,YAAY,CAAE,aAAc8H,IAG5BA,CACT,EAEF,cAAAuD,CAAevI,GAAS,GACpB,MAoBM9H,EAAS,CACb4G,GAAI,YACJH,SAAU,OACVgB,iBAAkB,CAvBI,CACtB,IACA,wBACA,iCACA,8BACA,mCACA,kCACA,YACA,aACA,aACA,aACA,kBACA,oBACA,mBACA,mBACA,cACA,eACA,yBACA,qBACAnB,KAAK,KAKLc,OAAQ,CAAE,cAAe,OACzBP,IAAK,6PASPjH,KAAKiI,eAAe,IAAK7H,EAAQ8H,UACnC,EAEF,mBAAAwI,CAAoBxI,GAAS,GAOzBlI,KAAKiI,eAAe,CALlBjB,GAAI,iBACJH,SAAU,OACVgB,iBAAkB,CAAC,GAAI,4EACvBL,OAAQ,CAAE,iBAAkB,OAEGU,UACnC,EAEF,iBAAAyI,CAAkBzI,GAAS,GAOvBlI,KAAKiI,eAAe,CALlBjB,GAAI,eACJH,SAAU,OACVgB,iBAAkB,CAAC,GAAI,4EACvBL,OAAQ,CAAE,cAAe,KAEMU,UACnC,EAEF,kBAAA0I,CAAmB1I,GAAS,GACxB,MAAM9H,EAAS,CACb4G,GAAI,gBACJH,SAAU,OACVgB,iBAAkB,CAAC,KACnBL,OAAQ,CACNqJ,OAAU,iyBAGd7Q,KAAKiI,eAAe,IAAK7H,EAAQ8H,UACnC,EAEF,cAAAhO,CAAegO,GAAS,GACtB,MAAM9H,EAAS,CACb4G,GAAI,kBACJH,SAAU,OACVgB,iBAAkB,CAChB,0CACA,wEACA,2DACA,qEACA,gFACA,qEAEFL,OAAQ,CAAEsJ,QAAW,aAAa9Q,KAAKgE,YAAY/L,eAAgB,iBAAkB,QAEvF+H,KAAKiI,eAAe,IAAK7H,EAAQ8H,UACnC,EAEA,eAAA6I,CAAgB7I,GAAS,GACrB,MAAM9H,EAAS,CACb4G,GAAI,kBACJH,SAAU,OACVgB,iBAAkB7H,KAAKgR,gBAAgBrV,QACvC6L,OAAQ,CAAEsJ,QAAW,aAAa9Q,KAAKgE,YAAY/L,eAAgB,iBAAkB,QAEvF+H,KAAKiI,eAAe,IAAK7H,EAAQ8H,UACnC,EAEF,wBAAA+I,GACI,GAAIjR,KAAKkR,mBAAoB,OAE7B,GADiB7S,SAAS6I,eAAe,0BAGvC,YADAlH,KAAKkR,oBAAqB,GAG5B,MAAM5M,EAAQjG,SAAS8I,cAAc,SACrC7C,EAAM0C,GAAK,yBACX1C,EAAMqG,YAAc,2UAQpBtM,SAASgJ,KAAKC,YAAYhD,GAC1BtE,KAAKkR,oBAAqB,CAC5B,EAEF,kBAAAC,CAAmBjJ,GAAS,GACxB,MAAMkJ,IAAiBlJ,EACnBkJ,GACFpR,KAAKiR,2BAEP,MAoBM7Q,EAAS,CACb4G,GAAI,gBACJH,SAAU,OACVgB,iBAAkB,CAvBI,CACtB,IACA,wBACA,iCACA,8BACA,mCACA,kCACA,YACA,aACA,aACA,aACA,kBACA,oBACA,mBACA,mBACA,cACA,eACA,yBACA,qBACAnB,KAAK,KAKLc,OAAQ,CACN,cAAe,kEAEjBP,IAAK,wTASPjH,KAAKiI,eAAe,IAAK7H,EAAQ8H,OAAQkJ,GAC3C,EAEF,WAAAxX,CAAYsO,GAAS,GAOnBlI,KAAKiI,eAAe,CALlBjB,GAAI,eACJH,SAAU,OACVgB,iBAAkB,CAAC,KACnBL,OAAQ,CAAE6J,WAAc,OAAQ,sBAAuB,WAAY,4BAA6B,IAAK,qBAAsB,QAE5FnJ,UACnC,EAEA,sBAAAoJ,CAAuBpJ,GAAS,GAC9B,MAAMqJ,EAAI,6FACJnR,EAAS,CACb4G,GAAI,qBACJC,IAAK,0FAE4BsK,sZAaAA,2JAKAA,uJAKQA,kKAKgBA,6LAMtBA,2MAKoCA,yPAOzBA,0NAMOA,wEAKvDvR,KAAKiI,eAAe,IAAK7H,EAAQ8H,WACjC7J,SAASgM,MAAM/B,UAAUC,OAAO,2BAA4BL,EAC9D,EAEA,gBAAAsJ,CAAiBtJ,GAAS,GACxB,IACE,IAAIuJ,EAAYzR,KAAK4G,YAAY,qBACjC,MAAM8K,EAAc,IAEpB,GAAIxJ,EAAQ,CAENtI,OAAO+R,wBACTtT,SAASuT,oBAAoB,YAAahS,OAAO+R,8BAC1C/R,OAAO+R,uBAGXF,IAEHA,EAAYpT,SAAS8I,cAAc,OACnCsK,EAAU1H,aAAa,QAAS,oBAChC0H,EAAU1H,aAAa,cAAe,QACtC0H,EAAUrK,UAAYpH,KAAK6R,mBAC3BxT,SAASgM,KAAKyH,QAAQL,IAGxB,MAAMM,EAAQN,EAAUtO,cAAc,eAChC6O,EAAWP,EAAUtO,cAAc,kBAGzC4O,EAAMzN,MAAMC,QAAU,OACtByN,EAAS1N,MAAMC,QAAU,OACzBvE,KAAKiS,mBAAoB,EAEzB,MAAMC,EAAsBlS,KAAKmS,SAAUtH,IAEpC7K,KAAKiS,oBACRF,EAAMzN,MAAMC,QAAU,QACtByN,EAAS1N,MAAMC,QAAU,QACzBvE,KAAKiS,mBAAoB,GAI3B,MAAMG,EAASvH,EAAMwH,QACfC,EAAY1O,KAAKK,IAAI,EAAGmO,EAASV,EAAc,GAC/Ca,EAAe3O,KAAKK,IAAI,EAAGrE,OAAO4S,aAAeJ,EAASV,EAAc,IAC9EK,EAAMzN,MAAMmO,OAAS,GAAGH,MACxBN,EAAS1N,MAAMmO,OAAS,GAAGF,OAC1B,IAEH3S,OAAO+R,sBAAwBO,EAC/B7T,SAASuM,iBAAiB,YAAasH,EAAqB,CAAEQ,SAAS,GACzE,MAEE1S,KAAKiS,mBAAoB,EAGrBrS,OAAO+R,wBACTtT,SAASuT,oBAAoB,YAAahS,OAAO+R,8BAC1C/R,OAAO+R,uBAIZF,GACFA,EAAUrJ,QAGhB,CAAE,MAAOrJ,GACPC,QAAQC,KAAK,0BAA2BF,EAC1C,CACF,EAEA,WAAA4T,GACE,OAAI3S,KAAK4S,eAAiBhT,OAAOiT,IACxBC,QAAQC,QAAQnT,OAAOiT,MAG5B7S,KAAKgT,iBAIThT,KAAKiT,gBAAiB,EACtBjT,KAAKgT,eAAiB,IAAIF,QAAQ,CAACC,EAASG,KAC1C,IAAIrQ,EAASxE,SAAS8E,cAAc,oCAChCgQ,GAAU,EACVC,EAAY,KAEhB,MAAMC,EAAgB,KACpB,IAAIF,EAAJ,CAGA,GAFAA,GAAU,EACNC,GAAWE,aAAaF,IACvBxT,OAAOiT,IAKV,OAJA7S,KAAKiT,gBAAiB,EACtBjT,KAAK4S,eAAgB,EACrB5S,KAAKgT,eAAiB,UACtBE,EAAO,IAAIK,MAAM,kDAGnBvT,KAAKiT,gBAAiB,EACtBjT,KAAK4S,eAAgB,EACjB/P,GACFA,EAAOkH,aAAa,2BAA4B,QAElDgJ,EAAQnT,OAAOiT,IAfF,GAkBTW,EAAeC,IACfN,IACJA,GAAU,EACNC,GAAWE,aAAaF,GAC5BpT,KAAKiT,gBAAiB,EACtBjT,KAAK4S,eAAgB,EACrB5S,KAAKgT,eAAiB,KACtBE,EAAOO,KAGL7T,OAAOiT,IACTQ,KAIExQ,IAAWA,EAAO6Q,IAAIvS,SAAS,aAAa2H,QAC9CjG,EAAOuF,SACPvF,EAAS,MAGNA,IACHA,EAASxE,SAAS8I,cAAc,UAChCtE,EAAO6Q,IAAM3K,EACblG,EAAO8Q,OAAQ,EACf9Q,EAAO+Q,UAtrBY,0EAurBnB/Q,EAAOgR,YAAc,YACrBhR,EAAOkH,aAAa,oBAAqB,QACzC1L,SAASgJ,KAAKC,YAAYzE,IAG5BA,EAAO+H,iBAAiB,OAAQyI,EAAe,CAAES,MAAM,IACvDjR,EAAO+H,iBAAiB,QAAS,IAAM4I,EAAY,IAAID,MAAM,4BAA6B,CAAEO,MAAM,IAClGV,EAAYW,WAAW,KACrBP,EAAY,IAAID,MAAM,gCACrB,UA9DIvT,KAAKgT,eAkEhB,EAEAgB,iBAAgB,KACP,IAAKhL,IAGd,kBAAAiL,CAAmBC,EAAU,IAC3B,MAAMC,EAAS,CAAEC,SAAU,EAAGC,QAAS,EAAGC,SAAU,EAAGC,MAAO,GAQ9D,OAPmBlR,MAAMC,QAAQ4Q,EAAQM,YAAcN,EAAQM,WAAa,IACjE5R,QAAS6R,IAClB,MAAMC,EAASD,GAAWC,OACtBA,QAA6BxR,IAAnBiR,EAAOO,KACnBP,EAAOO,IAAWrR,MAAMC,QAAQmR,EAAUE,OAASF,EAAUE,MAAM7V,OAAS,KAGzEqV,CACT,EAEA,qBAAAS,CAAsBV,EAAU,MAC9B,MAAMW,EAAS7U,KAAK8U,iBAAmB9U,KAAK4G,YAAY,yBACxD,IAAKiO,EAAQ,OAEb,MAAMV,EAASnU,KAAKiU,mBAAmBC,GAAWlU,KAAK+U,gBAAkB,IACnEC,EAAUhV,KAAKsB,YAErB,IAAI2T,EAAe,EACfC,EAAW,GAaf,GAXIf,EAAOC,SAAW,GACpBa,EAAed,EAAOC,SACtBc,EAAW,YACFF,GAAWb,EAAOE,QAAU,GACrCY,EAAed,EAAOE,QACtBa,EAAW,WACFF,GAAWb,EAAOG,SAAW,IACtCW,EAAed,EAAOG,SACtBY,EAAW,YAGTD,GAAgB,EAIlB,OAHAJ,EAAOlK,YAAc,GACrBkK,EAAOM,QAAS,OAChBN,EAAOnG,gBAAgB,iBAIzBmG,EAAOM,QAAS,EAChBN,EAAOO,QAAQF,SAAWA,EAC1BL,EAAOlK,YAAcsK,EAAe,GAAK,MAAQlT,OAAOkT,EAC1D,EAEA,0BAAMI,EAAqBC,MAAEA,GAAQ,GAAU,CAAA,GAC7C,OAAKA,GAAStV,KAAK+U,gBACjB/U,KAAK4U,sBAAsB5U,KAAK+U,gBACzB/U,KAAK+U,kBAGTO,GAAStV,KAAKuV,iBAInBvV,KAAKuV,eAAiB,WACpB,IACE,MAAM1C,QAAY7S,KAAK2S,cACjBuB,QAAgBrB,EAAI2C,IAAInX,SAAU2B,KAAKgU,oBAG7C,OAFAhU,KAAK+U,eAAiBb,EACtBlU,KAAK4U,sBAAsBV,GACpBA,CACT,CAAE,MAAOT,GAEP,MADAzT,KAAK4U,sBAAsB,CAAEJ,WAAY,KACnCf,CACR,CAAC,QACCzT,KAAKuV,eAAiB,IACxB,CACD,EAbqB,IAHbvV,KAAKuV,eAmBhB,EAEA,gBAAAE,CAAiBC,GACf,OAAKA,GAA2B,oBAAX9V,QAAuD,mBAAtBA,OAAO+V,YAGxD3V,KAAK4V,+BACR5V,KAAK4V,6BAA+B,CAAA,GAEjC5V,KAAK4V,6BAA6BF,KACrC1V,KAAK4V,6BAA6BF,GAAS9V,OAAO+V,WAAWD,IAExD1V,KAAK4V,6BAA6BF,IARhC,IASX,EAEA,2BAAAG,CAA4BzE,GAE1B,GADApR,KAAKiG,aACDjG,KAAK+E,2BAA2B,gBAClC,OAAO,EAIT,SADuB/E,KAAKgG,cAAc,kBACrBoL,IAAgBpR,KAAKwE,6BAA6B,mBAIvExE,KAAKoF,YAAY,CAAE,eAAgBgM,GAAgB,CAAE9L,OAAQ,YACtD,EACT,EAEA,uBAAAwQ,GACE,GAAsB,oBAAXlW,QAAuD,mBAAtBA,OAAO+V,WAA2B,OAE9E,MAAMI,EAAqB/V,KAAKyV,iBAAiBvM,GAC3C8M,IAAsBD,GAAoBpJ,QAC1B3M,KAAK6V,4BAA4BG,IAGrDhW,KAAKiW,mBAET,EAEA,8BAAAC,IACoB7S,MAAMC,QAAQtD,KAAKmW,2BAA6BnW,KAAKmW,0BAA4B,IACzFvT,QAASwF,IACK,mBAAXA,GACTA,MAGJpI,KAAKmW,0BAA4B,EACnC,EAEA,wBAAAC,GAEE,GADApW,KAAKkW,iCACiB,oBAAXtW,QAAuD,mBAAtBA,OAAO+V,WAA2B,OAI/D,EAACU,EAAYC,KACrBD,GAAiC,mBAAZC,IACiB,mBAAhCD,EAAWzL,kBACpByL,EAAWzL,iBAAiB,SAAU0L,GACtCtW,KAAKmW,0BAA0BzT,KAAK,IAAM2T,EAAWzE,oBAAoB,SAAU0E,KACxC,mBAA3BD,EAAWE,cAC3BF,EAAWE,YAAYD,GACvBtW,KAAKmW,0BAA0BzT,KAAK,IAAM2T,EAAWG,eAAeF,OAWxEG,CApB2BzW,KAAKyV,iBAAiBvM,GAalB2B,IACb7K,KAAK6V,8BAA8BhL,EAAM8B,UAEvD3M,KAAKiW,qBAKX,EAEA,4BAAMS,GAEJ,IAAIC,EAAQ3W,KAAK4G,YAAY,qBAExB+P,IACHA,EAAQ3W,KAAK4W,oBACbvY,SAASgM,KAAK/C,YAAYqP,IAG5B3W,KAAK6W,gBAAgBF,GAErB,MAAMG,EAAc9W,KAAK4G,YAAY,sBAAuB+P,GACtDI,EAAa/W,KAAK4G,YAAY,qBAAsB+P,GAG1DI,EAAWpM,YAAc3K,KAAK6J,UAAU,cACxCiN,EAAY1P,UAAY,mCAAmCpH,KAAK6J,UAAU,6BAE1E,IACE,MAAMqK,QAAgBlU,KAAKqV,qBAAqB,CAAEC,OAAO,IAEzDtV,KAAKgX,qBAAqBL,EAAOzC,EAEnC,CAAE,MAAOT,GACPqD,EAAY1P,UAAY,wCAAwCqM,EAAMwD,gBACtEF,EAAWpM,YAAc,EAC3B,CACF,EAEA,0BAAAuM,CAA2BP,GACzB,IAAKA,EAAO,MAAO,GACnB,MAAMQ,EAASnX,KAAK4G,YAAY,qBAAsB+P,GACtD,OAAO3W,KAAKsL,qBAAqB6L,GAAUR,EAC7C,EAEA,eAAAE,CAAgBF,GACd,IAAKA,EAAO,OAEZ3W,KAAKoX,oBAAsB/Y,SAASgZ,eAAyD,mBAAjChZ,SAASgZ,cAAc9L,MAC/ElN,SAASgZ,cACT,KAEJV,EAAMrO,UAAU0E,IAAI,sBACpB2J,EAAM5M,aAAa,cAAe,SAElC,MACMuN,EADStX,KAAK4G,YAAY,qBAAsB+P,IACxBA,EACzBW,EAAYlK,aAAa,aAC5BkK,EAAYvN,aAAa,WAAY,MAGnC/J,KAAKuX,mBACPlZ,SAASuT,oBAAoB,UAAW5R,KAAKuX,mBAAmB,GAGlEvX,KAAKuX,kBAAqB1M,IACxB,IAAK8L,EAAMrO,UAAUgC,SAAS,sBAAuB,OAErD,GAAkB,WAAdO,EAAM/I,KAAkC,QAAd+I,EAAM/I,IAIlC,OAHA+I,EAAMC,iBACND,EAAM2M,uBACNxX,KAAKyX,mBAIP,GAAkB,QAAd5M,EAAM/I,IAAe,OAEzB,MAAMuJ,EAAarL,KAAKkX,2BAA2BP,GACnD,IAAKtL,EAAWvM,OAGd,OAFA+L,EAAMC,sBACNwM,EAAY/L,QAId,MAAMmM,EAAQrM,EAAW,GACnBsM,EAAOtM,EAAWA,EAAWvM,OAAS,GACtC8Y,EAASvZ,SAASgZ,cAClBQ,GAAgBlB,EAAMrM,SAASsN,GAEjC/M,EAAMiN,UACJF,IAAWF,GAASG,KACtBhN,EAAMC,iBACN6M,EAAKpM,UAKLqM,IAAWD,GAAQE,KACrBhN,EAAMC,iBACN4M,EAAMnM,UAIVlN,SAASuM,iBAAiB,UAAW5K,KAAKuX,mBAAmB,GAE7D9L,sBAAsB,KACpB,MAAMJ,EAAarL,KAAKkX,2BAA2BP,GAC/CtL,EAAWvM,OACbuM,EAAW,GAAGE,QAGhB+L,EAAY/L,SAEhB,EAEA,iBAAAqL,GACE,MAAMD,EAAQtY,SAAS8I,cAAc,OACrCwP,EAAMjM,UAAY,iCAClBiM,EAAM5M,aAAa,OAAQ,UAC3B4M,EAAM5M,aAAa,aAAc,QACjC4M,EAAM5M,aAAa,cAAe,QAClC4M,EAAM5M,aAAa,kBAAmB,oBAEtC4M,EAAMvP,UAAY,gMAIyCpH,KAAK6J,UAAU,sGACP7J,KAAK6J,UAAU,aAAa7J,KAAKsJ,YAAY1O,oRAWhH,MAAMmd,EAAWpB,EAAMxT,cAAc,qBAC/B6U,EAAUrB,EAAMxT,cAAc,uBAKpC,OAHA4U,EAASnN,iBAAiB,QAAS,IAAM5K,KAAKyX,oBAC9CO,EAAQpN,iBAAiB,QAAS,IAAM5K,KAAKyX,oBAEtCd,CACT,EAEA,oBAAAK,CAAqBL,EAAOzC,GAC1B,MAAM4C,EAAc9W,KAAK4G,YAAY,sBAAuB+P,GACtDI,EAAa/W,KAAK4G,YAAY,qBAAsB+P,GAEpDnC,EAAaN,EAAQM,YAAc,GACnCyD,EAAS/D,EAAQ+D,QAAU,GAC3BC,EAAahE,EAAQgE,YAAc,GAGnC/D,EAAS,CAAEC,SAAU,EAAGC,QAAS,EAAGC,SAAU,EAAGC,MAAO,GAC9DC,EAAW5R,QAAQuV,SACQjV,IAArBiR,EAAOgE,EAAEzD,UACXP,EAAOgE,EAAEzD,SAAWyD,EAAExD,MAAM7V,UAIhC,MAAMsZ,EAAkBzT,OAAO0T,OAAOlE,GAAQmE,OAAO,CAACC,EAAGC,IAAMD,EAAIC,EAAG,GAEtEzB,EAAWpM,YAAcyN,EAAkB,EACvC,GAAGA,KAAmBpY,KAAK6J,UAAU,sBACrC7J,KAAK6J,UAAU,mBAEnB,IAAI4O,EAAO,2IAGiCtE,EAAOC,kEACPpU,KAAK6J,UAAU,oIAGfsK,EAAOE,iEACPrU,KAAK6J,UAAU,oIAGfsK,EAAOG,kEACPtU,KAAK6J,UAAU,kIAGfsK,EAAOI,+DACPvU,KAAK6J,UAAU,gIAGfoO,EAAOnZ,gEACPkB,KAAK6J,UAAU,6DAK3D,GAA0B,IAAtB2K,EAAW1V,OACb2Z,GAAQ,kPAKEzY,KAAK6J,UAAU,sDAGpB,CACL4O,GAAQ,mFACkCzY,KAAK6J,UAAU,wBAAwB2K,EAAW1V,wBAI5F,MAAM4Z,EAAgB,CAAEtE,SAAU,EAAGC,QAAS,EAAGC,SAAU,EAAGC,MAAO,GACrEC,EAAWmE,KAAK,CAACJ,EAAGC,KAAOE,EAAcH,EAAE7D,SAAW,IAAMgE,EAAcF,EAAE9D,SAAW,IAEvFF,EAAW5R,QAAQ,CAAC6R,EAAWpL,KAC7BoP,GAAQ,6DAC0CpP,sHAEDoL,EAAUC,WAAW1U,KAAK6J,UAAU7J,KAAK4Y,gBAAgBnE,EAAUC,2EACnE1U,KAAK6Y,WAAWpE,EAAUqE,wEAC1BrE,EAAUE,MAAM7V,UAAUkB,KAAK6J,UAAU,aAAa4K,EAAUE,MAAM7V,OAAS,EAAI,IAAM,6IAG7FkB,KAAK6Y,WAAWpE,EAAUsE,mGAEpDtE,EAAUuE,2CAA2ChZ,KAAK6J,UAAU,0DAE/E4K,EAAUE,MAAMsE,MAAM,EAAG,GAAGza,IAAIgO,GAAQ,wGAEFxM,KAAK6Y,WAAWrM,EAAKiM,kCACvDjM,EAAK0M,eAAiB,4CAA4ClZ,KAAK6J,UAAU,sBAAsB7J,KAAK6Y,WAAWrM,EAAK0M,wBAA0B,8CAEzJxS,KAAK,sBACN+N,EAAUE,MAAM7V,OAAS,EAAI,iEAAiE2V,EAAUE,MAAM7V,OAAS,sBAAwB,uDAMzJ2Z,GAAQ,QACV,CAEIP,EAAWpZ,OAAS,IACtB2Z,GAAQ,+FAEoCzY,KAAK6J,UAAU,yBAAyBqO,EAAWpZ,uIAMjGgY,EAAY1P,UAAYqR,EAGxB3B,EAAYnU,iBAAiB,gCAAgCC,QAAQuW,IACnEA,EAAOvO,iBAAiB,QAAS,KAC/BuO,EAAOzM,cAAcpE,UAAUC,OAAO,eAG5C,EAEAqQ,gBAAgBQ,GACTA,EACEA,EAAIC,OAAO,GAAGC,cAAgBF,EAAIH,MAAM,GAD9B,GAInB,UAAAJ,CAAWO,GACT,IAAKA,EAAK,MAAO,GACjB,MAAMG,EAAMlb,SAAS8I,cAAc,OAEnC,OADAoS,EAAI5O,YAAcyO,EACXG,EAAInS,SACb,EAEA,gBAAAqQ,GACE,MAAMd,EAAQ3W,KAAK4G,YAAY,qBAC3B+P,IACFA,EAAMrO,UAAUF,OAAO,sBACvBuO,EAAM5M,aAAa,cAAe,SAGhC/J,KAAKuX,oBACPlZ,SAASuT,oBAAoB,UAAW5R,KAAKuX,mBAAmB,GAChEvX,KAAKuX,kBAAoB,MAG3B,MAAMD,EAActX,KAAKoX,oBACzBpX,KAAKoX,oBAAsB,KACvBE,GAA4C,mBAAtBA,EAAY/L,OACpC+L,EAAY/L,OAEhB,EAEA,aAAAiO,CAActR,GAAS,GACrB,MAAMC,EAAU,kBACVsR,EAAgBpb,SAAS6I,eAAeiB,GAG9C,GAFIsR,GAAeA,EAAcrR,SACjC/J,SAASgK,gBAAgBC,UAAUC,OAAOJ,EAASD,GAC/CA,EAAQ,CACV,MAAMjB,EAAM,8bAYZjH,KAAK+G,YAAYoB,EAASlB,EAC5B,CACF,EAEAyS,wBAAuB,IACC,oBAAX9Z,SAET,oBAAqBA,aACsB,IAApCA,OAAO+Z,0BAIlB,oBAAAC,GACE,OAAO5Z,KAAK0Z,yBACd,EAEA,uBAAAG,CAAwBC,EAAe,MACrC,MAAMtc,EAAOuE,OAAO+X,GAAgB,MAAM5Y,cAa1C,MAZoB,CAClBnF,GAAI,QACJe,GAAI,QACJC,GAAI,QACJC,GAAI,QACJC,GAAI,QACJC,GAAI,QACJC,GAAI,QACJC,GAAI,QACJC,GAAI,QACJC,GAAI,SAEaE,IAASA,CAC9B,EAEA,gBAAAuc,GACE,MAAMC,EAAatW,OAAO1D,KAAKia,iBAAiBC,MAChD,OAAKxW,OAAOC,SAASqW,GACdpW,KAAKiL,IAAI,EAAGjL,KAAKK,IAAI,GAAK+V,IADQ,CAE3C,EAEA,iBAAAG,GACE,MAAMH,EAAatW,OAAO1D,KAAKia,iBAAiBG,OAChD,OAAK1W,OAAOC,SAASqW,GACdpW,KAAKiL,IAAI,EAAGjL,KAAKK,IAAI,EAAG+V,IADU,CAE3C,EAEA,sBAAAK,CAAuB7T,GACrB,KAAMA,aAAmBhK,SAAU,OAAO,EAC1C,MAAM8H,EAAQ1E,OAAO2N,iBAAiB/G,GACtC,GAAsB,SAAlBlC,EAAMC,SAA2C,WAArBD,EAAMgW,WACpC,OAAO,EAET,MAAMC,EAAO/T,EAAQgU,wBACrB,OAAOD,EAAKE,MAAQ,GAAKF,EAAK9H,OAAS,CACzC,EAEAiI,qBAAoB,CAAClU,GAASmU,qBAAEA,GAAuB,GAAU,CAAA,MACzDnU,aAAmBhK,aACrBgK,EAAQqF,QAAQ,sBAChBrF,EAAQqF,QAAQ,sCAChBrF,EAAQqF,QAAQ,2BAEjB8O,IACDnU,EAAQqF,QACN,+JAQN+O,sBAAqB,CAACC,EAAO,KACpB9Y,OAAO8Y,GACXC,QAAQ,OAAQ,KAChBA,QAAQ,mBAAoB,MAC5Bpc,OAGL,oBAAAqc,GACE,MASMC,EAAQ,GACRC,EAAO,IAAIhP,IAYjB,MAtBkB,CAChB,UACA,OACA,gBACA,WACA,QACA,iBACA,YAKQrJ,QAASiE,IACjBxI,SAASsE,iBAAiBkE,GAAUjE,QAAS4D,IACrCA,aAAmBhK,UACrBwD,KAAK0a,qBAAqBlU,IAAaxG,KAAKqa,uBAAuB7T,KACnEyU,EAAKC,IAAI1U,KACbyU,EAAKjO,IAAIxG,GACTwU,EAAMtY,KAAK8D,SAIRwU,CACT,EAEA,qBAAAG,GACE,GAAwB,oBAAb9c,SAA0B,OAAO,KAC5C,MAAM+c,EAAapb,KAAK+a,uBACxB,IAAKK,EAAWtc,OAAQ,CACtB,MAAMuc,EAAqBhY,MAAMiY,KAC/Bjd,SAASsE,iBAAiB,sEAC1BmB,OAAQ0C,GACRA,aAAmBhK,UAClBwD,KAAK0a,qBAAqBlU,IAC3BxG,KAAKqa,uBAAuB7T,IAG9B,GAAI6U,EAAmBvc,OAAQ,CAC7B,IAAIyc,EAAeF,EAAmB,GAClCG,GAAoB,EAUxB,OATAH,EAAmBzY,QAAS6Y,IAC1B,MAAMC,EAAa1b,KAAK4a,sBAAsBa,EAAUzR,WAAayR,EAAU9Q,aAAe,IAAI7L,OAC5Fyb,EAAOkB,EAAUjB,wBACjBmB,EAAQD,EAAcnB,EAAKE,MAAQF,EAAK9H,OAAS,MACnDkJ,EAAQH,IACVA,EAAoBG,EACpBJ,EAAeE,KAGZF,CACT,CAEA,GAAIld,SAASgM,KAAM,CACjB,MAAMuR,EAAqBvY,MAAMiY,KAAKjd,SAASgM,KAAKwR,UAAU/X,OAAQ0C,GACpEA,aAAmBhK,UAClBgK,EAAQ8B,UAAUgC,SAAS,kBAC5BtK,KAAKqa,uBAAuB7T,IAG9B,GAAIoV,EAAmB9c,OAAQ,CAC7B,IAAIgd,EAAOF,EAAmB,GAC1BG,GAAY,EAUhB,OATAH,EAAmBhZ,QAAS6Y,IAC1B,MAAMC,EAAa1b,KAAK4a,sBAAsBa,EAAUzR,WAAayR,EAAU9Q,aAAe,IAAI7L,OAC5Fyb,EAAOkB,EAAUjB,wBACjBmB,EAAQD,EAAcnB,EAAKE,MAAQF,EAAK9H,OAAS,MACnDkJ,EAAQI,IACVA,EAAYJ,EACZG,EAAOL,KAGJK,CACT,CACF,CAEA,OAAOzd,SAASgM,IAClB,CAEA,IAAI2R,EAAWZ,EAAW,GACtBW,GAAY,EAShB,OARAX,EAAWxY,QAAS6Y,IAClB,MACME,EADS3b,KAAKic,sBAAsBR,GACrB/U,KAAK,KAAK5H,OAC3B6c,EAAQI,IACVA,EAAYJ,EACZK,EAAWP,KAGRO,CACT,EAEA,qBAAAC,CAAsB9P,GACpB,KAAMA,aAAgB3P,SAAU,MAAO,GACvC,MACM0f,EAAS,GAQf,OAPA/P,EAAKxJ,iBAFiB,oEAEeC,QAAS4D,IAC5C,KAAMA,aAAmBhK,SAAU,OACnC,GAAIwD,KAAK0a,qBAAqBlU,KAAaxG,KAAKqa,uBAAuB7T,GAAU,OACjF,MAAMqU,EAAO7a,KAAK4a,sBAAsBpU,EAAQwD,WAAaxD,EAAQmE,aAAe,IAChFkQ,EAAK/b,OAAS,IAClBod,EAAOxZ,KAAKmY,KAEPqB,CACT,EAEA,kBAAAC,GACE,GAAwB,oBAAb9d,SAA0B,MAAO,GAC5C,MAAM+d,EAAiBpc,KAAK+a,uBAC5B,IAAIsB,EAAa,GACbN,GAAY,EAiBhB,GAfAK,EAAexZ,QAASuJ,IACtB,MAAM+P,EAASlc,KAAKic,sBAAsB9P,GAC1C,IAAK+P,EAAOpd,OAAQ,OACpB,MAAMwd,EAAiBJ,EAAOxV,KAAK,KAAK5H,OAClC6c,EAAyB,GAAhBO,EAAOpd,OAAewd,EACjCX,EAAQI,IACVA,EAAYJ,EACZU,EAAaH,MAIZG,EAAWvd,QAAUT,SAASgM,OACjCgS,EAAarc,KAAKic,sBAAsB5d,SAASgM,QAG9CgS,EAAWvd,QAAUT,SAASgM,KAAM,CAEvC,OADiBrK,KAAK4a,sBAAsBvc,SAASgM,KAAKL,WAAa3L,SAASgM,KAAKM,aAAe,IACpFsO,MAAM,EAAG,IAC3B,CAEA,OAAOoD,EAAW3V,KAAK,QAAQuS,MAAM,EAAG,IAC1C,EAEA,sBAAAsD,CAAuBC,EAASC,EAAY,KAC1C,IAAKD,EAAS,MAAO,GACrB,GAAIA,EAAQ1d,QAAU2d,EAAW,MAAO,CAACD,GAEzC,MAAMpZ,EAAQ,GACd,IAAIsZ,EAAYF,EAChB,KAAOE,EAAU5d,OAAS2d,GAAW,CACnC,IAAIE,EAAaD,EAAUE,YAAY,IAAKH,GACxCE,EAAa/Y,KAAKiZ,MAAkB,GAAZJ,KAC1BE,EAAaD,EAAUE,YAAY,IAAKH,IAEtCE,EAAa/Y,KAAKiZ,MAAkB,GAAZJ,KAC1BE,EAAaF,GAEfrZ,EAAMV,KAAKga,EAAUzD,MAAM,EAAG0D,GAAYje,QAC1Cge,EAAYA,EAAUzD,MAAM0D,GAAYje,MAC1C,CAIA,OAHIge,EAAU5d,QACZsE,EAAMV,KAAKga,GAENtZ,EAAMU,OAAOgZ,QACtB,EAEA,gBAAAC,CAAiBlC,EAAO,IACtB,MAAM5Y,EAAajC,KAAK4a,sBAAsBC,GAC9C,IAAK5Y,EAAY,MAAO,GAExB,MAAM+a,EAAsBnC,EACzBtc,MAAM,UACNC,IAAKye,GAAcjd,KAAK4a,sBAAsBqC,IAC9CnZ,OAAOgZ,SAEJI,EAAaF,EAAoBle,OAASke,EAAsB,CAAC/a,GACjEkb,EAAQ,GAwBd,OAtBAD,EAAWta,QAASqa,IAClB,MAAMG,EAAYH,EAAU1e,MAAM,iBAAiBuF,OAAOgZ,SACpDO,EAAeD,EAAUte,OAASse,EAAY,CAACH,GACrD,IAAIK,EAAQ,GAEZD,EAAaza,QAAS2a,IACpB,MAAMC,EAAOF,EAAQ,GAAGA,KAASC,IAAaA,EAC1CC,EAAK1e,QAAU,IACjBwe,EAAQE,GAGNF,GACFH,EAAMza,QAAQ1C,KAAKuc,uBAAuBe,EAAO,MAEnDA,EAAQC,KAGND,GACFH,EAAMza,QAAQ1C,KAAKuc,uBAAuBe,EAAO,QAI9CH,EAAMlE,MAAM,EAAG,IACxB,EAEA,kBAAAwE,CAAmB3D,GACjB,IAAK9Z,KAAK0Z,0BAA2B,OAAO,KAC5C,MAAMgE,EAAQ9d,OAAO+d,gBACfC,EAASF,EAAMG,eAAiB,GACtC,IAAKD,EAAO9e,OAAQ,OAAO,KAE3B,MAAMgf,EAAqB/b,OAAO/B,KAAKia,iBAAiB6D,oBAAsB,IAAIpf,OAAOwC,cACzF,GAAI4c,EAAoB,CACtB,MAAMC,EAAcH,EAAOjf,KAAMqf,GAAUjc,OAAOic,EAAM/f,MAAQ,IAAIS,OAAOwC,gBAAkB4c,GAC7F,GAAIC,EAAa,OAAOA,EACxB,MAAME,EAAiBL,EAAOjf,KAAMqf,GAAUjc,OAAOic,EAAM/f,MAAQ,IAAIiD,cAAcC,SAAS2c,IAC9F,GAAIG,EAAgB,OAAOA,CAC7B,CAEA,MACMC,EADsBnc,OAAO/B,KAAKia,iBAAiBkE,oBAAsB,IAAIzf,QACrCob,EACxC7X,EAAajC,KAAK6Z,wBAAwBqE,GAAgBhd,cAC1Dkd,EAAUnc,EAAW1D,MAAM,KAAK,GAChC8f,EAAaT,EAAOjf,KAAMqf,GAC9BA,EAAMM,cACNvc,OAAOic,EAAMzd,MAAQ,IAAIW,gBAAkBe,GAEvCsc,EAAQX,EAAOjf,KAAMqf,GAAUjc,OAAOic,EAAMzd,MAAQ,IAAIW,gBAAkBe,GAC1Euc,EAAiBZ,EAAOjf,KAAMqf,GAClCA,EAAMM,cACNvc,OAAOic,EAAMzd,MAAQ,IAAIW,cAActC,WAAWwf,IAE9CK,EAAYb,EAAOjf,KAAMqf,GAAUjc,OAAOic,EAAMzd,MAAQ,IAAIW,cAActC,WAAWwf,IACrFM,EAAed,EAAOjf,KAAMqf,GAAUA,EAAMtkB,SAClD,OAAO2kB,GAAcE,GAASC,GAAkBC,GAAaC,GAAgBd,EAAO,EACtF,EAEA,wBAAAe,CAAyB9T,GACvB,MAAM+T,EAAS/T,GAAO+T,OACtB,KAAMA,aAAkBpiB,SAAU,OAAO,KACzC,GAAIoiB,EAAO/S,QAAQ,kBAAmB,OAAO,KAE7C,MAAMgT,EAAQD,EAAO/S,QAAQ,gFAC7B,KAAMgT,aAAiBriB,SAAU,OAAO,KACxC,GAAIwD,KAAK0a,qBAAqBmE,EAAO,CAAElE,sBAAsB,MAAY3a,KAAKqa,uBAAuBwE,GAAQ,OAAO,KAEpH,MAAMhE,EAAO7a,KAAK4a,sBAAsBiE,EAAM7U,WAAa6U,EAAMlU,aAAe,IAChF,OAAIkQ,EAAK/b,OAAS,EAAU,KAErB,CACL0H,QAASqY,EACThE,KAAMA,EAAK5B,MAAM,EAAG,KAExB,EAEA,qBAAA6F,CAAsBtY,EAAU,MAC1BxG,KAAK+e,iBAAmB/e,KAAK+e,kBAAoBvY,GACnDxG,KAAK+e,gBAAgBzW,UAAUF,OAAO,wBAExCpI,KAAK+e,gBAAkBvY,EACnBxG,KAAK+e,iBACP/e,KAAK+e,gBAAgBzW,UAAU0E,IAAI,uBAEvC,EAEA,iBAAAgS,GAC0B,oBAAb3gB,UAA4B2B,KAAKif,mBAC5Cjf,KAAKif,iBAAoBpU,IACvB7K,KAAKkf,eAAerU,IAEtBxM,SAASuM,iBAAiB,QAAS5K,KAAKif,kBAAkB,GAC1D5gB,SAASgM,MAAM/B,UAAU0E,IAAI,sBAC/B,EAEA,gBAAAmS,GAC0B,oBAAb9gB,WACP2B,KAAKif,mBACP5gB,SAASuT,oBAAoB,QAAS5R,KAAKif,kBAAkB,GAC7Djf,KAAKif,iBAAmB,MAE1B5gB,SAASgM,MAAM/B,UAAUF,OAAO,sBAChCpI,KAAK8e,sBAAsB,MAC7B,EAEA,cAAAI,CAAerU,GACb,IAAK7K,KAAKgG,cAAc,kBAAmB,OAC3C,MAAM4Y,EAAS5e,KAAK2e,yBAAyB9T,GACxC+T,IAEL5e,KAAK8e,sBAAsBF,EAAOpY,SAClCxG,KAAKof,aAAeR,EAAO/D,KAC3B7a,KAAKqf,oBAAoB,CAAEC,SAAS,IACtC,EAEA,cAAAC,GACE,MAAM1E,EAAO7a,KAAKof,cAAgBpf,KAAKmc,qBACvC,OAAKtB,GAKL7a,KAAKof,aAAevE,EACpB7a,KAAKwf,SAAWxf,KAAK+c,iBAAiBlC,GACtC7a,KAAKyf,cAAgB,EACdzf,KAAKwf,SAAS1gB,OAAS,IAP5BkB,KAAKwf,SAAW,GAChBxf,KAAKyf,cAAgB,GACd,EAMX,EAEA,iBAAAC,CAAkBC,GAChB,IAAK3f,KAAK0Z,0BAA2B,OACrC,GAAIiG,IAAc3f,KAAK4f,aAAc,OAErC,GAAI5f,KAAKyf,eAAiBzf,KAAKwf,SAAS1gB,OAGtC,OAFAkB,KAAK6f,UAAY,eACjB7f,KAAK8e,sBAAsB,MAI7B,MAAMpB,EAAQ9d,OAAO+d,gBACfL,EAAQtd,KAAKwf,SAASxf,KAAKyf,eACjC,IAAKnC,EAGH,OAFAtd,KAAKyf,eAAiB,OACtBzf,KAAK0f,kBAAkBC,GAIzB,MAAMG,EAAY,IAAIlgB,OAAO+Z,yBAAyB2D,GACtDwC,EAAUvf,KAAOP,KAAK6Z,wBAAwB7Z,KAAKiG,aAAa1F,MAAQ,MACnEP,KAAK+f,UAAY/f,KAAK+f,SAASxf,MAAMW,gBAAkB4e,EAAUvf,KAAKW,gBACzElB,KAAK+f,SAAW/f,KAAKyd,mBAAmBqC,EAAUvf,OAEhDP,KAAK+f,WACPD,EAAU9B,MAAQhe,KAAK+f,UAEzBD,EAAU5F,KAAOla,KAAK+Z,mBACtB+F,EAAU1F,MAAQpa,KAAKma,oBAEvB2F,EAAUE,QAAU,KACdL,IAAc3f,KAAK4f,eACvB5f,KAAK6f,UAAY,YAEnBC,EAAUG,QAAU,KACdN,IAAc3f,KAAK4f,eACvB5f,KAAK6f,UAAY,WAEnBC,EAAUI,SAAW,KACfP,IAAc3f,KAAK4f,eACvB5f,KAAK6f,UAAY,YAEnBC,EAAUK,MAAQ,KACZR,IAAc3f,KAAK4f,eACvB5f,KAAKyf,eAAiB,EACtBzf,KAAK0f,kBAAkBC,KAEzBG,EAAUM,QAAU,KACdT,IAAc3f,KAAK4f,eACvB5f,KAAK6f,UAAY,UACjB7f,KAAK8e,sBAAsB,QAG7B9e,KAAKqgB,aAAeP,EACpBpC,EAAM4C,MAAMR,EACd,EAEA,yBAAAS,EAA0BjB,QAAEA,GAAU,GAAU,CAAA,GAC9C,IAAKtf,KAAK0Z,0BAA2B,OACrC,MAAMgE,EAAQ9d,OAAO+d,gBAErB,IAAK2B,GAAW5B,EAAM8C,OAGpB,OAFA9C,EAAM+C,cACNzgB,KAAK6f,UAAY,WAOnB,OAHiBP,IAAYtf,KAAKwf,SAAS1gB,QAAUkB,KAAKyf,eAAiBzf,KAAKwf,SAAS1gB,SACrFkB,KAAKuf,kBAIP,YADAvf,KAAK0gB,aAIP,MAAMf,EAAY3f,KAAK4f,aAAe,EACtC5f,KAAK4f,aAAeD,EACpBjC,EAAMiD,SACN3gB,KAAK6f,UAAY,UACjB7f,KAAK0f,kBAAkBC,EACzB,EAEA,mBAAAN,EAAoBC,QAAEA,GAAU,GAAU,CAAA,GACxCtf,KAAKugB,0BAA0B,CAAEjB,WACnC,EAEA,WAAAsB,GACE,IAAK5gB,KAAK0Z,0BAA2B,OACrC,MAAMgE,EAAQ9d,OAAO+d,gBACjBD,EAAMmD,WAAanD,EAAM8C,SAC3B9C,EAAMoD,QACN9gB,KAAK6f,UAAY,SAErB,EAEA,YAAAkB,GACE,IAAK/gB,KAAK0Z,0BAA2B,OACrC,MAAMgE,EAAQ9d,OAAO+d,gBACrB,GAAID,EAAM8C,OAGR,OAFA9C,EAAM+C,cACNzgB,KAAK6f,UAAY,WAGnB7f,KAAKqf,oBAAoB,CAAEC,SAAS,GACtC,EAEA,UAAAoB,GACE,MAAMhD,EAAQ1d,KAAK0Z,0BAA4B9Z,OAAO+d,gBAAkB,KACxE3d,KAAK4f,cAAgB,EACjBlC,IAAUA,EAAMmD,UAAYnD,EAAM8C,SACpC9C,EAAMiD,SAER3gB,KAAKqgB,aAAe,KACpBrgB,KAAKyf,cAAgB,EACrBzf,KAAK6f,UAAY,UACjB7f,KAAK8e,sBAAsB,KAC7B,EAEA,kBAAAkC,CAAmB9Y,GAAS,GAC1B,IAAKlI,KAAK4Z,uBAAwB,OAClC,MAAMqH,EAA+C,mBAAhCjhB,KAAKkhB,uBAE1B,IAAKhZ,EAIH,OAHI+Y,GAAcjhB,KAAKmhB,kBAAiB,GACxCnhB,KAAK0gB,kBACL1gB,KAAKmf,mBAIP,MAAMzB,EAAQ9d,OAAO+d,gBACjBD,GAAOG,WACTH,EAAMG,YAGR7d,KAAKgf,oBACLhf,KAAK6f,UAAY,OACboB,GAAcjhB,KAAKmhB,kBAAiB,EAC1C,EAEA,gBAAAA,CAAiBvJ,GACf,IAAK5X,KAAK4Z,uBAAwB,OAClC,MAAM8D,EAAQ9d,OAAO+d,gBACrB,IAAKD,EAAO,OACZ,MAAM0D,EAAMxJ,EACR5X,KAAK6J,UAAU,qBACf7J,KAAK6J,UAAU,sBACnB6T,EAAMiD,SACN,MAAMb,EAAY,IAAInG,yBAAyByH,GACzC7gB,EAAOP,KAAK6Z,wBAAwB7Z,KAAKiG,aAAa1F,MAAQ,MACpEuf,EAAUvf,KAAOA,EACjB,MAAMyd,EAAQhe,KAAKyd,mBAAmBld,GAClCyd,IACF8B,EAAU9B,MAAQA,GAEpB8B,EAAU5F,KAAOla,KAAK+Z,mBACtB+F,EAAU1F,MAAQpa,KAAKma,oBACvBuD,EAAM4C,MAAMR,EACd,EAEA,qBAAAuB,GACE,GAAIrhB,KAAKshB,iBAAmBjjB,SAASgM,KAAKC,SAAStK,KAAKshB,iBACtD,OAAOthB,KAAKshB,gBAEd,MAAMC,EAAQljB,SAAS8I,cAAc,OAKrC,OAJAoa,EAAM7W,UAAY,qCAClB6W,EAAMxX,aAAa,cAAe,QAClC1L,SAASgM,KAAK/C,YAAYia,GAC1BvhB,KAAKshB,gBAAkBC,EAChBA,CACT,EAEA,uBAAAC,CAAwB3a,GACtB,IAAKA,GAAgC,iBAAbA,EAAuB,OAAO,KACtD,IACE,MAAML,EAAUnI,SAAS8E,cAAc0D,GACvC,OAAKL,GAAWA,EAAQqF,QAAQ,kBAA0B,KACnDrF,CACT,CAAE,MACA,OAAO,IACT,CACF,EAEA,sBAAAib,CAAuBvN,EAAU,IAC/B,MAAMM,EAAanR,MAAMC,QAAQ4Q,EAAQM,YAAcN,EAAQM,WAAa,GACtE9L,EAAU,GACVuS,EAAO,IAAIhP,IA0BjB,OAxBAuI,EAAW5R,QAAS6R,KACJpR,MAAMC,QAAQmR,EAAUE,OAASF,EAAUE,MAAQ,IAC3D/R,QAAS4J,IACb,MACM3F,GADUxD,MAAMC,QAAQkJ,EAAKoS,QAAUpS,EAAKoS,OAAS,IAClCjgB,KAAMigB,GAA6B,iBAAXA,GAAuBA,EAAOlgB,OAAOI,QACtF,IAAK+H,EAAU,OACf,MAAM/E,EAAM,GAAG+E,MAAa4N,EAAUzN,IAAMyN,EAAUqE,MAAQ,KAC9D,GAAImC,EAAKC,IAAIpZ,GAAM,OAEnB,MAAM0E,EAAUxG,KAAKwhB,wBAAwB3a,GACxCL,IACLyU,EAAKjO,IAAIlL,GACT4G,EAAQhG,KAAK,CACXmE,WACAL,UACAkO,OAAQD,EAAUC,QAAU,QAC5BgN,MAAOjN,EAAUqE,MAAQ9Y,KAAK6J,UAAU,SACxCkP,YAAatE,EAAUsE,aAAe,GACtCC,QAASvE,EAAUuE,SAAW,GAC9BE,eAAgB1M,EAAK0M,gBAAkB,UAKtCxQ,EAAQuQ,MAAM,EAhtDD,GAitDtB,EAEA,sBAAA0I,CAAuBC,GACrB,MAAMC,EAASxjB,SAAS8I,cAAc,UActC,OAbA0a,EAAOpX,KAAO,SACdoX,EAAOnX,UAAY,wBACnBmX,EAAOzM,QAAQV,OAASkN,EAAWlN,QAAU,QAC7CmN,EAAO9X,aAAa,aAAc6X,EAAWF,OAC7CG,EAAOH,MAAQE,EAAWF,MAC1BG,EAAOza,UAAY,GAEnBya,EAAOjX,iBAAiB,QAAUC,IAChCA,EAAMC,iBACND,EAAM2M,kBACNxX,KAAK8hB,oBAAoBF,EAAYC,KAGhCA,CACT,EAEA,uBAAAE,CAAwBC,EAAOH,GAC7B,IAAKG,IAAUH,EAAQ,OACvB,MAAMI,EAAaJ,EAAOrH,wBACpB0H,EAAaF,EAAMG,aAAe,IAClCC,EAAcJ,EAAMK,cAAgB,IACpCC,EAAgB1iB,OAAO2iB,WACvBC,EAAiB5iB,OAAO4S,YACxBiQ,EAAM,GAEZ,IAAIC,EAAO9iB,OAAO+iB,QAAUV,EAAWS,KAAOD,EAC1CG,EAAMhjB,OAAOijB,QAAUZ,EAAWa,OAASL,EAE3CC,EAAOR,EAAatiB,OAAO+iB,QAAUL,EAAgBG,IACvDC,EAAO9iB,OAAO+iB,QAAUL,EAAgBJ,EAAaO,GAEnDC,EAAO9iB,OAAO+iB,QAAUF,IAC1BC,EAAO9iB,OAAO+iB,QAAUF,GAGtBG,EAAMR,EAAcxiB,OAAOijB,QAAUL,EAAiBC,IACxDG,EAAMhjB,OAAOijB,QAAUZ,EAAWW,IAAMR,EAAcK,GAEpDG,EAAMhjB,OAAOijB,QAAUJ,IACzBG,EAAMhjB,OAAOijB,QAAUJ,GAGzBT,EAAM1d,MAAMoe,KAAO,GAAGA,MACtBV,EAAM1d,MAAMse,IAAM,GAAGA,KACvB,EAEA,oBAAAG,GACM/iB,KAAKgjB,kBACPhjB,KAAKgjB,gBAAgB5a,SACrBpI,KAAKgjB,gBAAkB,KAE3B,EAEA,mBAAAlB,CAAoBF,EAAYC,GAC9B,IAAKD,IAAeC,IAAW7hB,KAAKshB,gBAAiB,OACrDthB,KAAK+iB,uBAEL,MAAMf,EAAQ3jB,SAAS8I,cAAc,OACrC6a,EAAMtX,UAAY,uBAClBsX,EAAM5a,UAAY,qGAE2BpH,KAAK6Y,WAAW+I,EAAWF,6FACG1hB,KAAK6J,UAAU,aAAa7J,KAAKsJ,YAAY1O,kDAEzGoF,KAAK6J,UAAU7J,KAAK4Y,gBAAgBgJ,EAAWlN,mCACvD1U,KAAK6Y,WAAW+I,EAAW7I,2BAC9B6I,EAAW1I,eAAiB,cAAclZ,KAAK6J,UAAU,sBAAsB7J,KAAK6Y,WAAW+I,EAAW1I,sBAAwB,aAClI0I,EAAW5I,QAAU,eAAe4I,EAAW5I,2CAA2ChZ,KAAK6J,UAAU,0BAA4B,WAEzImY,EAAMiB,YAAcpB,EAEpB,MAAMqB,EAAclB,EAAM7e,cAAc,+BACxC+f,GAAatY,iBAAiB,QAAS,IAAM5K,KAAK+iB,wBAElD/iB,KAAKshB,gBAAgBha,YAAY0a,GACjChiB,KAAKgjB,gBAAkBhB,EACvBhiB,KAAK+hB,wBAAwBC,EAAOH,EACtC,EAEA,mBAAAsB,GACO9f,MAAMC,QAAQtD,KAAKojB,kBAAqBpjB,KAAKojB,gBAAgBtkB,SAElEkB,KAAKojB,gBAAgBxgB,QAASygB,IAC5B,IAAKA,GAAMzE,SAAWyE,GAAMxB,OAAQ,OACpC,IAAKxjB,SAASiM,SAAS+Y,EAAKzE,QAE1B,YADAyE,EAAKxB,OAAO1M,QAAS,GAIvB,MAAMoF,EAAO8I,EAAKzE,OAAOpE,wBAEvBD,EAAKE,OAAS,GACdF,EAAK9H,QAAU,GACf8H,EAAKuI,OAAS,GACdvI,EAAKqI,IAAMhjB,OAAO4S,aAClB+H,EAAK+I,MAAQ,GACb/I,EAAKmI,KAAO9iB,OAAO2iB,WAInBc,EAAKxB,OAAO1M,QAAS,GAIvBkO,EAAKxB,OAAO1M,QAAS,EACrBkO,EAAKxB,OAAOvd,MAAMse,IAAM,GAAGhjB,OAAOijB,QAAUtI,EAAKqI,IAAMhf,KAAKiL,IAAI,GAAI0L,EAAK9H,OAAS,OAClF4Q,EAAKxB,OAAOvd,MAAMoe,KAAO,GAAG9iB,OAAO+iB,QAAUpI,EAAK+I,aAGhDtjB,KAAKgjB,iBAAiBC,cAAgBjjB,KAAKgjB,gBAAgBC,YAAY9N,QACzEnV,KAAK+hB,wBAAwB/hB,KAAKgjB,gBAAiBhjB,KAAKgjB,gBAAgBC,aAE5E,EAEA,iBAAAM,CAAkBrb,GAAS,GACzB,IAAKA,EAEH,YADAlI,KAAKwjB,qBAIP,MAAMC,IAAczjB,KAAK0jB,oBACzB1jB,KAAKwjB,mBAAmB,CAAEG,eAAe,IACzC,MAAMpC,EAAQvhB,KAAKqhB,wBAEnBrhB,KAAKqV,uBACFuO,KAAM1P,IACL,GAAIuP,IAAczjB,KAAK0jB,sBAAwB1jB,KAAKgG,cAAc,eAChE,OAEF,MAAM5K,EAAc4E,KAAKyhB,uBAAuBvN,GAChDlU,KAAKojB,gBAAkBhoB,EAAYoD,IAAKojB,IACtC,MAAMC,EAAS7hB,KAAK2hB,uBAAuBC,GAE3C,OADAL,EAAMja,YAAYua,GACX,CACLA,SACAjD,OAAQgD,EAAWpb,QACnBqd,KAAMjC,KAIL5hB,KAAK8jB,8BACR9jB,KAAK8jB,4BAA8B9jB,KAAKmS,SAAS,IAAMnS,KAAKmjB,sBAAuB,KAErFvjB,OAAOgL,iBAAiB,SAAU5K,KAAK8jB,4BAA6B,CAAEpR,SAAS,IAC/E9S,OAAOgL,iBAAiB,SAAU5K,KAAK8jB,4BAA6B,CAAEpR,SAAS,IAE1E1S,KAAK+jB,2BACR/jB,KAAK+jB,yBAA4BlZ,IAC/B,IAAK7K,KAAKgjB,gBAAiB,OAC3B,MAAMgB,EAAehkB,KAAKgjB,gBAAgB1Y,SAASO,EAAM+T,QACnDqF,EAAgBpZ,EAAM+T,QAAQ/S,UAAU,0BACzCmY,GAAiBC,GACpBjkB,KAAK+iB,yBAIX1kB,SAASuM,iBAAiB,QAAS5K,KAAK+jB,0BAA0B,GAElE/jB,KAAKmjB,wBAENe,MAAOzQ,IACNzU,QAAQC,KAAK,gCAAiCwU,IAEpD,EAEA,kBAAA+P,EAAmBG,cAAEA,GAAgB,GAAS,CAAA,GACxCA,IACF3jB,KAAK0jB,qBAAuB,GAE9B1jB,KAAK+iB,uBAED/iB,KAAK+jB,0BACP1lB,SAASuT,oBAAoB,QAAS5R,KAAK+jB,0BAA0B,GAEnE/jB,KAAK8jB,8BACPlkB,OAAOgS,oBAAoB,SAAU5R,KAAK8jB,6BAC1ClkB,OAAOgS,oBAAoB,SAAU5R,KAAK8jB,8BAGxC9jB,KAAKshB,kBACPthB,KAAKshB,gBAAgBlZ,SACrBpI,KAAKshB,gBAAkB,MAGzBthB,KAAKojB,gBAAkB,EACzB,EAGA,6BAAAe,GACMnkB,KAAKokB,mBACPpkB,KAAKokB,iBAAiB9b,UAAUF,OAAO,0BACvCpI,KAAKokB,iBAAmB,MAGtB/gB,MAAMC,QAAQtD,KAAKqkB,6BACrBrkB,KAAKqkB,2BAA2BzhB,QAAS4D,IACnCA,GAAWA,EAAQ8B,WACrB9B,EAAQ8B,UAAUF,OAAO,8BAI/BpI,KAAKqkB,2BAA6B,EACpC,EAEA,6BAAAC,GACE,MAAMnY,EAAOnM,KAAKmb,wBAClB,IAAKhP,IAAS9N,SAASgM,KAAM,OAE7BrK,KAAKokB,iBAAmBjY,EACxBA,EAAK7D,UAAU0E,IAAI,0BAEnB,MAAMuX,EAAiB,GACvBlhB,MAAMiY,KAAKjd,SAASgM,KAAKwR,UAAUjZ,QAASmF,IACpCA,aAAiBvL,UACnBuL,EAAMO,UAAUgC,SAAS,kBACzBvC,IAAUoE,GAAQpE,EAAMuC,SAAS6B,KACrCpE,EAAMO,UAAU0E,IAAI,4BACpBuX,EAAe7hB,KAAKqF,OAGtB,MAAMyc,EAAmB,CACvB,QACA,MACA,OACA,SACA,yBACA,kBACA,uBACA,uBACA,oBACA,iBACA,oBACA,iBACA,mBACA,gBACA,mBACA,gBACA,oBACA,iBACA,iBACA,cACA,qBACA,kBACA,oBACA,iBACA,mBACA,gBACA,wBACA,qBACA,qBACA,kBACA,qBACA,kBACA,oBACA,iBACA,mBACA,iBACA9d,KAAK,KAEPyF,EAAKxJ,iBAAiB6hB,GAAkB5hB,QAAS4D,IACzCA,aAAmBhK,UACrBgK,EAAQqF,QAAQ,mBAChBrF,IAAY2F,IAChB3F,EAAQ8B,UAAU0E,IAAI,4BACtBuX,EAAe7hB,KAAK8D,OAGtBxG,KAAKqkB,2BAA6BE,CACpC,EAEA,kBAAAE,CAAmBvc,GAAS,GAC1B,MAAMwc,EAAI,iCACJC,EAAI,GAAGD,4BACPnT,EAAI,6CACJnR,EAAS,CACb4G,GAAI,gBACJC,IAAK,wDAEDyd,qEAIAA,4FAIAC,gVAUAA,cAAcpT,4SASdoT,8GAA8GpT,+iBAiB9GoT,mCAAmCpT,gEAInCoT,yFAAyFpT,gEAIzFoT,cAAcpT,mEAIdoT,sBAAsBpT,mGAKtBoT,cAAcpT,mJAIdoT,0EAA0EpT,oOAO1EoT,eAAepT,2LAOfoT,eAAepT,8LAOfoT,eAAepT,2LAOfoT,uBAAuBpT,yOAQvBoT,2FAA2FpT,mHAK3FoT,eAAepT,6JAMfoT,uBAAuBpT,4MAOvBoT,kBAAkBpT,mMAOlBoT,mBAAmBpT,+JAMnBoT,eAAepT,2IAMfoT,mBAAmBpT,gHAKnBoT,eAAepT,gJAMfoT,gBAAgBpT,qOAQhBoT,4BAA4BpT,kMAK5BoT,+BAA+BpT,2MAO/BoT,sBAAsBpT,6FAKtBoT,+BAA+BpT,+IAQrCvR,KAAKiI,eAAe,IAAK7H,EAAQ8H,WACjC7J,SAASgM,MAAM/B,UAAUC,OAAO,8BAA+BL,GAE/DlI,KAAKmkB,gCACDjc,GACFlI,KAAKskB,+BAET,EAEA,iBAAArO,GACI,MAAMjR,OAAEA,GAAWhF,KAAKiG,aAGxB,MAD6BjB,IAAUL,OAAOC,UAAUC,eAAeC,KAAKE,EAAQ,eAC7D,CACrB,MAAM4f,GAAuC,IAAzB5f,EAAO,cAA0B,EAAIA,EAAO,cAC1D6f,EAAe7kB,KAAKyP,wBAAwBmV,EAAa,CAAEjV,SAAS,IAC1E3P,KAAKqP,uBAAuBhR,SAAS8E,cAAc,aAAc0hB,EACnE,MACE7kB,KAAKmQ,eAAiB,EAClBnQ,KAAKiQ,mBAAmB,gBAC1BjQ,KAAKiQ,mBAAmB,cAAcC,cAAe,GAEvDlQ,KAAKwO,UAAU,GACfxO,KAAKqP,uBAAuBhR,SAAS8E,cAAc,aAAc,GAGnEnD,KAAKwZ,cAAcxU,GAAUA,EAAO,gBACpChF,KAAK+Q,gBAAgB/L,GAAUA,EAAO,oBACtChF,KAAK9F,eAAe8K,GAAUA,EAAO,oBACrChF,KAAK0Q,oBAAoB1L,GAAUA,EAAO,mBAC1ChF,KAAK2Q,kBAAkB3L,GAAUA,EAAO,iBACxChF,KAAKyQ,eAAezL,GAAUA,EAAO,cACrChF,KAAKmR,mBAAmBnM,GAAUA,EAAO,kBACzChF,KAAKwR,iBAAiBxM,GAAUA,EAAO,gBACvChF,KAAKpG,YAAYoL,GAAUA,EAAO,iBAClChF,KAAK4Q,mBAAmB5L,GAAUA,EAAO,kBACzChF,KAAKsR,uBAAuBtM,GAAUA,EAAO,uBAC7ChF,KAAKujB,kBAAkBve,GAAUA,EAAoB,aACrDhF,KAAKghB,mBAAmBhc,GAAUA,EAAO,mBACzChF,KAAKykB,mBAAmBzf,GAAUA,EAAO,iBAC3C,EAEF,gBAAA8f,CAAiBhjB,GACb,OAAOuB,MAAMC,QAAQtD,KAAKkF,kBAAoBlF,KAAKkF,gBAAgB/D,SAASW,EAC9E,EAEF,uBAAAijB,CAAwB/f,EAAShF,KAAK0E,aAAaM,QAC/C,IAAKhF,KAAKkF,kBAAoBlF,KAAKkF,gBAAgBpG,OAAQ,OAAO,KAClE,IAAKkG,EAAQ,OAAOhF,KAAKglB,sBAAwB,KACjD,IAAK,MAAMljB,KAAO9B,KAAKkF,gBACrB,GAAIF,EAAOlD,GACT,OAAOA,EAGX,OAAO,IACT,EAEF,gBAAAmjB,CAAiB3V,EAAM4V,EAAY,MAC/B,IAAK5V,IAASA,EAAK3M,iBAAkB,OACrC,MAAMwiB,EAAkBnlB,KAAKiQ,qBAAqB,mBAC5CmV,EAAiB9V,EAAKnM,cAAc,wCAC1C,GAAIgiB,EAAiB,CACnB,MAAME,EAAgBF,EAAgB9M,OAAOrI,QAAQkV,GAGrD,GAFAC,EAAgBjV,aAAemV,EAC/BrlB,KAAKuJ,2BAA2B6b,EAAgBC,GAC5CD,EAAgB,CAClB,MAAME,EAAmBD,GAAiB,EAC1CD,EAAe9c,UAAUC,OAAO,eAAgB+c,GAChDF,EAAerb,aAAa,eAAgBub,EAAmB,OAAS,SACxE,MAAMC,EAAYH,EAAejiB,cAAc,2DAC/C,GAAIoiB,EAAW,CACAA,EAAU5iB,iBAAiB,qBACnCC,QAAQ,CAAC4iB,EAAKnc,KACjBmc,EAAIld,UAAUC,OAAO,SAAUc,IAAUgc,IAE7C,CACF,CACF,CACA,MAAMI,EAAoBzlB,KAAKiQ,qBAAqB,qBAC9CyV,EAAmBpW,EAAKnM,cAAc,0CAC5C,GAAIsiB,EAAmB,CACrB,MAAME,EAAkBF,EAAkBpN,OAAOrI,QAAQkV,GAGzD,GAFAO,EAAkBvV,aAAeyV,EACjC3lB,KAAKkK,6BAA6Bwb,EAAkBC,GAChDD,EAAkB,CACpB,MAAME,EAAqBD,GAAmB,EAC9CD,EAAiBpd,UAAUC,OAAO,eAAgBqd,GAClDF,EAAiB3b,aAAa,eAAgB6b,EAAqB,OAAS,SAC5E,MAAML,EAAYG,EAAiBviB,cAAc,6DACjD,GAAIoiB,EAAW,CACAA,EAAU5iB,iBAAiB,qBACnCC,QAAQ,CAAC4iB,EAAKnc,KACjBmc,EAAIld,UAAUC,OAAO,SAAUc,IAAUsc,IAE7C,CACF,CACF,CACA3lB,KAAKkF,gBAAgBtC,QAAQijB,IAC3B,MAAMrc,EAAS8F,EAAKnM,cAAc,sBAAsB0iB,OACxD,IAAKrc,EAAQ,OACb,MAAMsc,EAAWD,IAAcX,EAC/B1b,EAAOlB,UAAUC,OAAO,eAAgBud,GACxCtc,EAAOO,aAAa,eAAgB+b,EAAW,OAAS,UAE5D,EAEF,sBAAAC,CAAuBb,EAAY,KAAM5f,EAAS,QAC9C,IAAKtF,KAAKkF,kBAAoBlF,KAAKkF,gBAAgBpG,OAEjD,YADAkB,KAAKglB,qBAAuB,MAG9B,MAAMhgB,EAAShF,KAAK0E,aAAaM,QAAU,CAAA,EACrCK,EAAU,CAAA,EAChB,IAAI2gB,GAAiB,EACrBhmB,KAAKkF,gBAAgBtC,QAAQijB,IAC3B,MAAMI,EAAajhB,EAAO6gB,GACHX,IAAcW,GAEhB,IAAfI,IACF5gB,EAAQwgB,IAAa,EACrBG,GAAiB,GAEVC,IACT5gB,EAAQwgB,IAAa,EACrBG,GAAiB,KAGjBA,GACFhmB,KAAKoF,YAAYC,EAAS,CAAEC,WAE9BtF,KAAKglB,qBAAuBE,CAC9B,EAEF,wBAAAgB,CAAyBL,GACrB,MACMM,EADKvmB,OAAO2N,iBAAiBlP,SAASgM,MAAMjS,gBACrCguB,MAAM,qCACnB,IAAKD,EAAG,OAAO,KACf,IAAIE,GAAKF,EAAE,GAAIG,GAAKH,EAAE,GAAI3N,GAAK2N,EAAE,GACjC,MAAMI,EAASpO,GAAMvU,KAAKiL,IAAI,IAAKjL,KAAKK,IAAI,EAAGL,KAAKC,MAAMsU,KAE1D,OAAQ0N,GACN,IAAK,gBACHQ,EAAI,IAAMA,EAAGC,EAAI,IAAMA,EAAG9N,EAAI,IAAMA,EACpC,MACF,IAAK,gBAEH6N,EAAI,IAAkB,KAAXA,EAAI,KAAYC,EAAI,IAAkB,KAAXA,EAAI,KAAY9N,EAAI,IAAkB,KAAXA,EAAI,KACrE6N,GAAK,GAAKC,GAAK,GAAK9N,GAAK,GACzB,MAEF,IAAK,iBAEH6N,EAAI,IAAkB,MAAXA,EAAI,KAAaC,EAAI,IAAkB,MAAXA,EAAI,KAAa9N,EAAI,IAAkB,MAAXA,EAAI,KACvE6N,GAAK,IAAKC,GAAK,IAAK9N,GAAK,IACzB,MAEF,IAAK,iBAAkB,CAErB,MAAMgO,EAAI,GAEJC,GAAM,KAAQ,KAAQD,GAAKH,GAAK,KAAQ,KAAQG,GAAKF,GAAK,KAAQ,KAAQE,GAAKhO,EAC/EkO,GAAM,KAAQ,KAAQF,GAAKH,GAAK,KAAQ,KAAQG,GAAKF,GAAK,KAAQ,KAAQE,GAAKhO,EACrF6N,GAHY,KAAQ,KAAQG,GAAKH,GAAK,KAAQ,KAAQG,GAAKF,GAAK,KAAQ,KAAQE,GAAKhO,EAG7E8N,EAAIG,EAAIjO,EAAIkO,EACpB,KACF,CACA,IAAK,kBAAmB,CAEtB,MAAMC,EAAK,EAELC,GAAM,KAAQ,KAAQD,GAAMN,GAAK,KAAQ,KAAQM,GAAML,GAAK,KAAQ,KAAQK,GAAMnO,EAClFqO,GAAM,KAAQ,KAAQF,GAAMN,GAAK,KAAQ,KAAQM,GAAML,GAAK,KAAQ,KAAQK,GAAMnO,EACxF6N,GAHY,KAAQ,KAAQM,GAAMN,GAAK,KAAQ,KAAQM,GAAML,GAAK,KAAQ,KAAQK,GAAMnO,EAGhF8N,EAAIM,EAAIpO,EAAIqO,EACpB,KACF,CACA,QACE,OAAO,KAIX,OAFAR,EAAIE,EAAMF,GAAIC,EAAIC,EAAMD,GAAI9N,EAAI+N,EAAM/N,GAElC6N,KAAOF,EAAE,IAAMG,KAAOH,EAAE,IAAM3N,KAAO2N,EAAE,GAAW,KAC/C,OAAOE,KAAKC,KAAK9N,IAC1B,EAEF,kBAAAsO,GACI,MAAM9hB,OAAEA,GAAWhF,KAAKiG,aAClBif,EAAYllB,KAAK+kB,wBAAwB/f,GAG/C,GAFAhF,KAAKglB,qBAAuBE,GAEvBA,EAAW,CACd,MAAM5gB,EAAQjG,SAAS6I,eAAe,oBAEtC,YADI5C,GAAOA,EAAM8D,SAEnB,CACA,MAAMtE,EAAS9D,KAAK+mB,cAAc7B,GAClC,IAAKphB,EAAQ,CACX,MAAMQ,EAAQjG,SAAS6I,eAAe,oBAEtC,YADI5C,GAAOA,EAAM8D,SAEnB,CACA,MAAM4e,EAAiB,IAClBljB,EACH+C,SAAU/C,EAAO+C,UAAY,2EAE/B,IAAII,EAAMjH,KAAKgI,SAASgf,GAIxB,MAAMC,EAAajnB,KAAKkmB,yBAAyBhB,GAC7C+B,IACFhgB,GAAO,yBAAyBggB,iBAGlCjnB,KAAK+G,YAAY,mBAAoBE,EACvC,EAEF,cAAAigB,CAAehf,GAAS,GAChBA,GACFlI,KAAKmQ,gBAAkBnQ,KAAKmQ,eAAiB,GAAKnQ,KAAK+P,gBAAgBjR,OACnEkB,KAAKiQ,mBAAmB,gBAC1BjQ,KAAKiQ,mBAAmB,cAAcC,aAAelQ,KAAKmQ,kBAG5DnQ,KAAKmQ,eAAiB,EAClBnQ,KAAKiQ,mBAAmB,gBAC1BjQ,KAAKiQ,mBAAmB,cAAcC,cAAe,IAGzD,MAAMiX,EAAoB9oB,SAAS8E,cAAc,sDACjD,GAAIgkB,EAAmB,CACrB,MAAMC,EAAOD,EAAkBxkB,iBAAiB,qBAChDykB,EAAKxkB,QAAQ4iB,GAAOA,EAAIld,UAAUF,OAAO,WACrCF,GAAUlI,KAAKmQ,eAAiBiX,EAAKtoB,QACvCsoB,EAAKpnB,KAAKmQ,gBAAgB7H,UAAU0E,IAAI,SAE5C,CACA,MAAMyB,EAAWvG,EAASlI,KAAK+P,gBAAgB/P,KAAKmQ,gBAAkB,EAGtE,OAFAnQ,KAAKwO,UAAUC,GACfzO,KAAKoF,YAAY,CAAE,aAAcqJ,IAC1BzO,KAAKmQ,cACd,EAEF,sBAAAkX,CAAuBC,EAAY9d,GAC/B,MAAM+d,EAAUvnB,KAAKiQ,mBAAmBqX,GACxC,IAAKC,IAAY/d,EAAQ,OAEzB,GAAmB,oBAAf8d,GAAmD,sBAAfA,EAAoC,CAC1E,MAAME,EAAWD,EAAQrX,aAAe,EAClCuX,EAAeD,GAAYD,EAAQG,OAAS,KAAOH,EAAQlP,OAAOmP,GAIxE,OAHAxnB,KAAK+lB,uBAAuB0B,GAC5BznB,KAAKilB,iBAAiBzb,EAAOqC,QAAQ,aAAc4b,QACnDznB,KAAK8mB,oBAEP,CAEA,MAAMU,EAAWD,EAAQrX,aAAe,EACxC,GAAIsX,GAAYD,EAAQG,OACtBH,EAAQrX,cAAe,EACvB1G,EAAOlB,UAAUF,OAAO,gBACxBoB,EAAOO,aAAa,eAAgB,SACpC/J,KAAKoF,YAAY,CAAEkiB,CAACA,GAA4B,eAAfA,GAA8B,IAC5C,eAAfA,IACFtnB,KAAKmQ,eAAiB,OAEnB,CACLoX,EAAQrX,aAAesX,EACvBhe,EAAOlB,UAAU0E,IAAI,gBACrBxD,EAAOO,aAAa,eAAgB,QACpC,MAAM4d,EAAWJ,EAAQlP,OAAOmP,GAChCxnB,KAAKoF,YAAY,CAAEkiB,CAACA,GAAaK,IACd,eAAfL,IACFtnB,KAAKmQ,eAAiBqX,EAE1B,CACA,MAAMjC,EAAY/b,EAAOrG,cAAc,yCAAyCmkB,OAChF,GAAI/B,EAAW,CACAA,EAAU5iB,iBAAiB,qBACnCC,QAAQ,CAAC4iB,EAAKoC,KACjBpC,EAAIld,UAAUC,OAAO,SAAUqf,IAAML,EAAQrX,eAEjD,CACA,GAAmB,eAAfoX,EAA6B,CAC/B,MAAM7Y,EAAW8Y,EAAQrX,cAAgB,EAAIqX,EAAQlP,OAAOkP,EAAQrX,cAAgB,EACpFlQ,KAAKwO,UAAUC,EACjB,MACEzO,KAAK8mB,oBAET,EAEF,iBAAAe,GACI7nB,KAAK6F,WAAW,CAAEb,OAAQ,CAAA,EAAIP,eAAgB,CAAA,IAC9CzE,KAAKmQ,eAAiB,EACtBnQ,KAAKglB,qBAAuB,KAC5BrgB,OAAOgB,KAAK3F,KAAKiQ,oBAAoBrN,QAAQd,IAC3C9B,KAAKiQ,mBAAmBnO,GAAKoO,cAAe,IAE7B7R,SAASsE,iBAAiB,iBAClCC,QAAQE,IACfA,EAAGwF,UAAUF,OAAO,gBACpBtF,EAAGiH,aAAa,eAAgB,WAEf1L,SAASsE,iBAAiB,2BAClCC,QAAQ2iB,IACJA,EAAU5iB,iBAAiB,qBACnCC,QAAQ4iB,GAAOA,EAAIld,UAAUF,OAAO,aAE3C,MAAMkH,EAAOjR,SAAS8E,cAAc,aAChCmM,IACFtP,KAAKilB,iBAAiB3V,EAAM,MAC5BtP,KAAKqP,uBAAuBC,EAAM,IAIhCjR,SAASgZ,eACXhZ,SAASgZ,cAAcyQ,OAER,CACf,gBACA,qBACA,mBACA,oBACA,sBACA,sBACA,oBACA,mBACA,kBACA,mBACA,qBAEOllB,QAAQoE,IACf,MAAM1C,EAAQjG,SAAS6I,eAAeF,GAClC1C,GAAOA,EAAM8D,WAEnBpI,KAAKmkB,gCACL9lB,SAASgK,gBAAgBC,UAAUF,OACjC,aACA,iBACA,gBACA,qBACA,mBACA,oBACA,sBACA,sBACA,oBACA,mBACA,kBACA,yBACA,qBAEF/J,SAASgM,MAAM/B,UAAUF,OAAO,6BAChC/J,SAASgM,MAAM/B,UAAUF,OAAO,0BAChCpI,KAAKsO,8BACLtO,KAAK+N,2BAA6B,EACX1P,SAASsE,iBAAiB,uBAClCC,QAAQE,IACfA,aAActG,UAAYwD,KAAK4L,kBAAkB9I,KACvDA,EAAGwB,MAAMkJ,SAAW,GACpB1K,EAAG4L,gBAAgB,wBAErB,IAAIqZ,EAAQ/nB,KAAK4G,YAAY,qBACzBmhB,IACFA,EAAM3f,SACFxI,OAAO+R,wBACTtT,SAASuT,oBAAoB,YAAahS,OAAO+R,8BAC1C/R,OAAO+R,wBAGlB3R,KAAKwjB,qBACLxjB,KAAK0gB,aACL1gB,KAAKmf,mBACLnf,KAAKkW,iCACLlW,KAAK8V,0BACL9V,KAAKoW,2BACLpW,KAAK4U,sBAAsB5U,KAAK+U,eAClC,GC3hFSiT,EAAY,CAEvB,SAAAne,CAAUpM,GACN,MAAM8C,KAAEA,GAASP,KAAKiG,aAEtB,OADmBjG,KAAKioB,aAAa1nB,IAASP,KAAKioB,aAAiB,IAClDxqB,IAAUA,CAC9B,EAEFyqB,wBAAwBpO,IACM,CACxB/d,GAAI,MACJe,GAAI,QACJC,GAAI,SACJC,GAAI,UACJC,GAAI,QACJC,GAAI,SACJC,GAAI,SACJC,GAAI,UACJC,GAAI,cACJC,GAAI,WAEmBwc,IAAiB/X,OAAO+X,GAAgB,IAAIR,eAGzE,eAAA6O,CAAgBrO,GACZ,MAYMsO,GAZwB,CAC5BrsB,GAAI,KACJe,GAAI,KACJC,GAAI,KACJC,GAAI,KACJC,GAAI,KACJC,GAAI,KACJC,GAAI,KACJC,GAAI,KACJC,GAAI,KACJC,GAAI,MAEqCwc,IAAiB/X,OAAO+X,GAAgB,IAAIb,MAAM,EAAG,IAAIK,cACpG,MAAK,aAAa1b,KAAKwqB,GAGhBrmB,OAAOsmB,iBAAiBD,EAAY7pB,MAAM,IAAIC,IAAI8pB,GAAQ,OAASA,EAAKC,WAAW,KAFjF,EAGX,EAEF,mBAAAC,CAAoBvtB,GAChB,IAAKA,EAAU,MAAO,gBAItB,MAAO,GAHU8G,OAAO9G,EAASwC,OAASxC,EAASuC,MAAQ,IACxDe,MAAM,KAAK,GACXG,QAAUqD,OAAO9G,EAASuC,MAAQ,MAAM8b,kBACpBtZ,KAAKkoB,wBAAwBjtB,EAASuC,QAC/D,EAEF,mBAAAirB,CAAoBC,GAChB,MAAMzmB,EAAgC,iBAAZymB,EAAuBA,EAAQhqB,OAAOwC,cAAgB,GAC1EynB,EAAW3oB,KAAKsJ,aAAa7P,uBAAyB,CAAA,EAC5D,OAAOkvB,EAAS1mB,IAAe0mB,EAASjvB,SAAWsG,KAAKsJ,YAAY9P,aACtE,EAEF,QAAA2Y,CAASyW,EAAMC,GACX,IAAIC,EACJ,OAAO,YAAaC,GACbD,IACHF,EAAKI,MAAMhpB,KAAM+oB,GACjBD,GAAa,EACb/U,WAAW,IAAO+U,GAAa,EAAQD,GAE3C,CACF,EAEF,oBAAAvd,CAAqBa,GACjB,IAAKA,EAAM,MAAO,GAClB,MAAM8c,EAAY,CAChB,UACA,yBACA,wBACA,2BACA,yBACA,mCACAviB,KAAK,KACDwiB,EAAkC,oBAAb7qB,SACrBgZ,EAAgB6R,EAAc7qB,SAASgZ,cAAgB,KAC7D,OAAOhU,MAAMiY,KAAKnP,EAAKxJ,iBAAiBsmB,IAAYnlB,OAAOhB,IACzD,GAAIA,EAAGsK,aAAa,YAAa,OAAO,EACxC,GAAuC,SAAnCtK,EAAGG,aAAa,eAA2B,OAAO,EACtD,GAAIH,EAAG+I,QAAQ,wBAAyB,OAAO,EAC/C,MAAM0O,EAAOzX,EAAG0X,wBACVlW,EAA0B,oBAAX1E,QAA0BA,OAAO2N,iBAAmB3N,OAAO2N,iBAAiBzK,GAAM,CAAEwX,WAAY,UAAW/V,QAAS,SAGzI,OAFgBgW,EAAKE,MAAQ,GAAKF,EAAK9H,OAAS,GACjByW,GAAepmB,IAAOuU,IAAwC,WAArB/S,EAAMgW,YAA6C,SAAlBhW,EAAMC,SAGnH,EAEF,QAAA4kB,CAASje,EAAeke,GACpB,IAAKle,EAAe,OACpB,MAAMoE,EAAOtP,KAAK4G,YAAY,YAAasE,GAC3ClL,KAAKiL,oBAAsBC,EAC3BlL,KAAKqpB,iBAAmBD,GAAappB,KAAKqpB,iBAC1CrpB,KAAKspB,cAAgBjrB,SAASgZ,eAAyD,mBAAjChZ,SAASgZ,cAAc9L,MACzElN,SAASgZ,cACT,KAEJnM,EAAc5G,MAAMC,QAAU,QAC1B+K,IACFA,EAAKvF,aAAa,cAAe,SACjCuF,EAAKvF,aAAa,aAAc,QAC3BuF,EAAKlC,aAAa,aACrBkC,EAAKvF,aAAa,WAAY,OAI9B/J,KAAKqpB,kBACPrpB,KAAKqpB,iBAAiBtf,aAAa,gBAAiB,QAGtD,MAAMwf,EAAYvpB,KAAKsL,qBAAqBJ,GACxCqe,EAAUzqB,OACZyqB,EAAU,GAAGhe,QACJ+D,GACTA,EAAK/D,QAGHvL,KAAKwpB,iBACPnrB,SAASuT,oBAAoB,UAAW5R,KAAKwpB,iBAAiB,GAGhExpB,KAAKwpB,gBAAmB3e,IACtB,GAAK7K,KAAKiL,oBAAV,CACA,GAAkB,WAAdJ,EAAM/I,KAAkC,QAAd+I,EAAM/I,IAGlC,OAFA+I,EAAMC,sBACN9K,KAAKypB,UAAUzpB,KAAKiL,qBAGtB,GAAkB,QAAdJ,EAAM/I,IAAe,CACvB,MAAMuJ,EAAarL,KAAKsL,qBAAqBtL,KAAKiL,qBAClD,IAAKI,EAAWvM,OAEd,YADA+L,EAAMC,iBAGR,MAAM4M,EAAQrM,EAAW,GACnBsM,EAAOtM,EAAWA,EAAWvM,OAAS,GACxC+L,EAAMiN,SACJzZ,SAASgZ,gBAAkBK,IAC7B7M,EAAMC,iBACN6M,EAAKpM,SAEElN,SAASgZ,gBAAkBM,IACpC9M,EAAMC,iBACN4M,EAAMnM,QAEV,CAvB+B,GA0BjClN,SAASuM,iBAAiB,UAAW5K,KAAKwpB,iBAAiB,EAC7D,EAEF,SAAAC,CAAUve,EAAeke,GACrB,MAAMM,EAAkBxe,GAAiBlL,KAAKiL,oBAC9C,IAAKye,EAAiB,OACtB,MAAMpa,EAAOtP,KAAK4G,YAAY,YAAa8iB,GAC3CA,EAAgBplB,MAAMC,QAAU,OAC5B+K,IACFA,EAAKvF,aAAa,cAAe,QACjCuF,EAAKvF,aAAa,aAAc,UAGlC,MAAM4f,EAAY3pB,KAAK4G,YAAY,kBAAmB8iB,GAClDC,GACFA,EAAU5f,aAAa,SAAU,IAGnC,MAAM6f,EAAa5pB,KAAK4G,YAAY,0BAA2B8iB,GAC3DE,GACFA,EAAW7f,aAAa,gBAAiB,SAG3C,MAAM8f,EAAa7pB,KAAK4G,YAAY,mBAAoB8iB,GACpDG,IACFA,EAAW1qB,MAAQ,IAGrBuqB,EAAgB/mB,iBAAiB,kBAAkBC,QAAQygB,IACzDA,EAAK/e,MAAMC,QAAU,KAGnBvE,KAAKwpB,kBACPnrB,SAASuT,oBAAoB,UAAW5R,KAAKwpB,iBAAiB,GAC9DxpB,KAAKwpB,gBAAkB,MAGzB,MAAMjhB,EAAS6gB,GAAappB,KAAKqpB,iBAC7B9gB,GACFA,EAAOwB,aAAa,gBAAiB,SAGvC,MAAMuN,EAAc/O,GAAUvI,KAAKspB,cAC/BhS,GAA4C,mBAAtBA,EAAY/L,OACpC+L,EAAY/L,QAGdvL,KAAK0gB,aAEL1gB,KAAKiL,oBAAsB,KAC3BjL,KAAKqpB,iBAAmB,KACxBrpB,KAAKspB,cAAgB,IACvB,EAEF,aAAAQ,CAAcnoB,EAASooB,GACnB,IAAItR,EAAO,GACX,IAAK,IAAImP,EAAI,EAAGA,EAAIjmB,EAAQ7C,OAAQ8oB,IAAK,CACvC,MAAMoC,EAAMroB,EAAQimB,GACpB,GAAIoC,EAAIC,0BAA4BjqB,KAAK4Z,uBACvC,SAEF,MAAMsQ,GAAkC,IAAnBF,EAAIG,WACnBC,EAAoB,CAACL,EAAaC,EAAID,aAAajmB,OAAOgZ,SAASpW,KAAK,KAC9E,IAAIygB,EAAoB,GACxB,GAAI+C,EAAc,CAChB,MAAMG,EAAcrqB,KAAKiQ,mBAAmB+Z,EAAIloB,KAChD,GAAIuoB,EAAa,CACflD,EAAoB,qDAAqD6C,EAAIloB,QAC7E,IAAK,IAAIwoB,EAAI,EAAGA,EAAID,EAAY3C,OAAQ4C,IAAK,CAE3CnD,GAAqB,+BADJkD,EAAYna,eAAiBoa,EACiB,UAAY,mBAAmBA,YAChG,CACAnD,GAAqB,SACvB,CACF,CACA1O,GAAQ,sCACW2R,KAAqBpqB,KAAKiQ,mBAAmB+Z,EAAIloB,MAAMoO,cAAgB,EAAI,eAAiB,uDAEjG8Z,EAAIloB,sCACIooB,wBACXF,EAAIvsB,iCACCusB,EAAIvsB,mCACFuC,KAAKiQ,mBAAmB+Z,EAAIloB,MAAMoO,cAAgB,IAAK,gEAEnE8Z,EAAIznB,6CACoBynB,EAAIvsB,6BAC5B0pB,wBAER,CACA,OAAO1O,CACT,EAEF,sBAAA8R,CAAuBnb,EAAa,GAChC,MAAMR,EAAU5O,KAAKmP,oBAAoBC,GACnCP,EAAMnL,OAAO1D,KAAK8O,sBAAwB,GAC1C7K,EAAMP,OAAO1D,KAAK+O,sBAAwB,IAC1CC,EAAOtL,OAAO1D,KAAKiP,uBAAyB,EAC5CO,GAAaZ,EAAUC,IAAQ5K,EAAM4K,GAAQ,IAEnD,MAAO,uLAGsD7O,KAAKsJ,YAAYtO,2JAEjC4T,uIAKhCC,wBACA5K,yBACC+K,0BACCJ,gIAG2BhL,KAAKK,IAAI,EAAGL,KAAKiL,IAAI,IAAKW,gCAGtE,EAEF,iBAAAgb,CAAkB1nB,EAAI2nB,GAClB,IAAI5P,EAAO/X,EAAGG,aAAa,iBAK3B,OAJK4X,GAAQ4P,IACX5P,EAAO4P,EACP3nB,EAAGiH,aAAa,gBAAiB8Q,IAE5B7a,KAAK6J,UAAUgR,EACxB,EAEF,eAAA6P,CAAgBpb,GACZA,EAAK3M,iBAAiB,kCAAkCC,QAAQE,IAC9DA,EAAGkH,UAAYhK,KAAKwqB,kBAAkB1nB,EAAIA,EAAGkH,UAAUtL,UAEzD4Q,EAAK3M,iBAAiB,WAAWC,QAAQE,IACvCA,EAAGiH,aAAa,QAAS/J,KAAKwqB,kBAAkB1nB,EAAIA,EAAGG,aAAa,aAEtEqM,EAAK3M,iBAAiB,gBAAgBC,QAAQE,IAC5CA,EAAGiH,aAAa,aAAc/J,KAAKwqB,kBAAkB1nB,EAAIA,EAAGG,aAAa,kBAE3EjD,KAAKuK,qBACP,EAEF,WAAAogB,EAAYlZ,UAAEA,EAASlR,KAAEA,EAAIyB,SAAEA,EAAW,eAAcG,OAAEA,EAAS,CAAC,GAAI,IAAGG,KAAEA,EAAIC,KAAEA,IAC/E,IACEvC,KAAKwI,sBACLxI,KAAK4I,uBAEL,MAAMgiB,EAAqB7oB,OAAOxB,GAAQ,MAAMhC,MAAM,QAAQ,GAAG2C,cAE3D2pB,EAAe,wQAIwC7qB,KAAKyoB,oBAAoBlmB,weAY9EvC,KAAKsJ,YAAY3O,0gBAMiDoH,OAAO6oB,GAAsB,MAAMtR,soBAYnGtZ,KAAKY,mBAAmBpC,IAAIvD,IAC5B,MAAM6vB,EAAgB9qB,KAAKwoB,oBAAoBvtB,GACzC8vB,EAAe/qB,KAAKmoB,gBAAgBltB,EAASuC,MACnD,MAAO,6CAA6CvC,EAASuC,OAASotB,EAAqB,YAAc,kBAAkB3vB,EAASuC,qBAAqBstB,oIAEpGC,qEACbD,qJAIvCpkB,KAAK,sIAOVwE,EAAgB7M,SAAS8I,cAAc,OAC7C+D,EAAc9D,UAAYyjB,EAC1B3f,EAAc5G,MAAMC,QAAU,OAC9B,MAAM+K,EAAOtP,KAAK4G,YAAY,YAAasE,GACvCoE,IACFA,EAAKvF,aAAa,cAAe,QAC5BuF,EAAKlC,aAAa,aACrBkC,EAAKvF,aAAa,WAAY,OAGE,iBAAb/H,GAA4C,cAAbA,GAA8D,UAAlChC,KAAKgE,YAAY7K,cAEjGmW,EAAKhL,MAAMgf,MAAQ,mCACnBhU,EAAKhL,MAAMoe,KAAO,SAElBpT,EAAKhL,MAAMoe,KAAO,mCAClBpT,EAAKhL,MAAMgf,MAAQ,QAGrB,MACM0H,GADmBhrB,KAAKkC,gBAAgBC,IAAW,CAAC,GAAI,KAC7B,IAAM,GACjC5J,EAAa+J,SAA+D,KAAxBP,OAAOO,GAAM5D,OACnEsB,KAAKqC,oBAAoBC,GACxBtC,KAAKgE,aAAazL,YAAc,OAEpB,iBAAbyJ,GAA4C,gBAAbA,EACjCsN,EAAKhL,MAAMwe,OAAS,QAAQkI,SAAezyB,YACrB,cAAbyJ,GAAyC,aAAbA,IACrCsN,EAAKhL,MAAMse,IAAM,QAAQoI,SAAezyB,aAG1C,MAAM6H,EAASJ,KAAKiG,aAEdglB,EAAW,IAAIhf,IAAI,CAAC,aAAc,YAAa,eAAgB,iBAAkB,kBACjFif,EAAY,IAAIjf,IAAI,CAAC,kBAAmB,gBAAiB,oBAAqB,uBAC9Ekf,EAAkB,IAAIlf,IAAI,CAAC,cAAe,kBAAmB,kBAAmB,kBAEhFmf,EAAgB,IACjBprB,KAAKqrB,eAAe7sB,IAAI8sB,IAAM,IAAUA,QACxCtrB,KAAKurB,aAAa/sB,IAAI8sB,IAAM,IAAUA,EAAQvB,YAAa,mBAC3D/pB,KAAKwrB,YAAYhtB,IAAI8sB,IAAM,IAAUA,EAAQvB,YAAa,gBAGzD0B,EAAiB,CACrBC,OAAQ,GACR7Q,KAAM,GACN8Q,MAAO,GACPC,QAAS,GACTC,YAAa,IAGTC,EAAW,IAAI7f,IACrBmf,EAAcxoB,QAAQ0oB,IACfA,GAAQxpB,MAAOgqB,EAAS5Q,IAAIoQ,EAAOxpB,OACxCgqB,EAAS9e,IAAIse,EAAOxpB,KAED,mBAAfwpB,EAAOxpB,IAIPmpB,EAAS/P,IAAIoQ,EAAOxpB,KACtB2pB,EAAe5Q,KAAKnY,KAAK4oB,GAGvBJ,EAAUhQ,IAAIoQ,EAAOxpB,KACvB2pB,EAAeE,MAAMjpB,KAAK4oB,GAGxBH,EAAgBjQ,IAAIoQ,EAAOxpB,KAC7B2pB,EAAeG,QAAQlpB,KAAK4oB,GAG9BG,EAAeI,YAAYnpB,KAAK4oB,GAf9BG,EAAeC,OAAOhpB,KAAK4oB,MAkB/B,MAQMS,EARgB,CACpB,CAAEjqB,IAAK,SAAUrE,MAAO,SAAUuuB,eAAgB,2BAA4BjC,YAAa,kBAC3F,CAAEjoB,IAAK,OAAQrE,MAAO,OAAQuuB,eAAgB,gCAC9C,CAAElqB,IAAK,QAASrE,MAAO,mBAAoBuuB,eAAgB,eAC3D,CAAElqB,IAAK,UAAWrE,MAAO,eAAgBuuB,eAAgB,eACzD,CAAElqB,IAAK,cAAerE,MAAO,cAAeuuB,eAAgB,gBAG1BxtB,IAAIytB,IACtC,IAAIC,EAAiBT,EAAeQ,EAAQnqB,KACxCqqB,EAAiB,GAErB,GAAoB,SAAhBF,EAAQnqB,IAAgB,CAC1B,MAAMsqB,EAAkBF,EAAevtB,KAAK2sB,GAAyB,eAAfA,EAAOxpB,KAC7DoqB,EAAiBA,EAAepoB,OAAOwnB,GAAyB,eAAfA,EAAOxpB,KACxD,MAAMuqB,EAAY,CAAC,eAAgB,iBAAkB,YAAa,iBAClEH,EAAevT,KAAK,CAACJ,EAAGC,KACtB,MAAM8T,EAASD,EAAUrc,QAAQuI,EAAEzW,KAC7ByqB,EAASF,EAAUrc,QAAQwI,EAAE1W,KAGnC,QAF0B,IAAZwqB,EAAgB5oB,OAAO8oB,iBAAmBF,KAC9B,IAAZC,EAAgB7oB,OAAO8oB,iBAAmBD,KAGtDH,IACFD,EAAiBnsB,KAAKuqB,uBAAuBnqB,EAAO4E,SAAS,eAAiB,IAGhF,MAAMynB,EAAmB,IAAIxgB,IAAI,CAAC,eAAgB,mBAC5CygB,EAAoB,IAAIzgB,IAAI,CAAC,YAAa,kBAC1C0gB,EAAsBT,EAAepoB,OAAOwnB,GAAUmB,EAAiBvR,IAAIoQ,EAAOxpB,MAClF8qB,EAAuBV,EAAepoB,OAAOwnB,GAAUoB,EAAkBxR,IAAIoQ,EAAOxpB,MACpF+qB,EAAuBX,EAAepoB,OAAOwnB,IAChDmB,EAAiBvR,IAAIoQ,EAAOxpB,OAAS4qB,EAAkBxR,IAAIoQ,EAAOxpB,MAE/DgrB,EAAmBH,EAAoB7tB,OACzC,oDAAoDkB,KAAK8pB,cAAc6C,EAAqB,2BAC5F,GACEI,EAAoBH,EAAqB9tB,OAC3C,oDAAoDkB,KAAK8pB,cAAc8C,EAAsB,2BAC7F,GACEI,EAAoBH,EAAqB/tB,OAC3C,eAAemtB,EAAQD,mBAAmBhsB,KAAK8pB,cAAc+C,EAAsBZ,EAAQlC,aAAe,YAC1G,GAEJ,OAAKoC,GAAmBW,GAAqBC,GAAsBC,EAE5D,2EACqDf,EAAQnqB,mEACrBmqB,EAAQxuB,gCACjD0uB,sBACAW,sBACAC,sBACAC,4CARuF,EAW/F,CAEA,GAAoB,UAAhBf,EAAQnqB,IAAiB,CAC3B,MAAMmrB,EAAa,CAAC,kBAAmB,oBAAqB,gBAAiB,sBAC7Ef,EAAevT,KAAK,CAACJ,EAAGC,KACtB,MAAM8T,EAASW,EAAWjd,QAAQuI,EAAEzW,KAC9ByqB,EAASU,EAAWjd,QAAQwI,EAAE1W,KAGpC,QAF0B,IAAZwqB,EAAgB5oB,OAAO8oB,iBAAmBF,KAC9B,IAAZC,EAAgB7oB,OAAO8oB,iBAAmBD,KAI1D,MAAME,EAAmB,IAAIxgB,IAAI,CAAC,kBAAmB,sBAC/CygB,EAAoB,IAAIzgB,IAAI,CAAC,gBAAiB,uBAC9C0gB,EAAsBT,EAAepoB,OAAOwnB,GAAUmB,EAAiBvR,IAAIoQ,EAAOxpB,MAClF8qB,EAAuBV,EAAepoB,OAAOwnB,GAAUoB,EAAkBxR,IAAIoQ,EAAOxpB,MACpForB,EAAwBhB,EAAepoB,OAAOwnB,IACjDmB,EAAiBvR,IAAIoQ,EAAOxpB,OAAS4qB,EAAkBxR,IAAIoQ,EAAOxpB,MAG/DgrB,EAAmBH,EAAoB7tB,OACzC,oDAAoDkB,KAAK8pB,cAAc6C,EAAqB,2BAC5F,GACEI,EAAoBH,EAAqB9tB,OAC3C,oDAAoDkB,KAAK8pB,cAAc8C,EAAsB,2BAC7F,GACEO,EAAqBD,EAAsBpuB,OAC7C,eAAemtB,EAAQD,mBAAmBhsB,KAAK8pB,cAAcoD,EAAuBjB,EAAQlC,aAAe,YAC3G,GAEJ,OAAK+C,GAAqBC,GAAsBI,EAEzC,2EACqDlB,EAAQnqB,mEACrBmqB,EAAQxuB,gCACjDqvB,sBACAC,sBACAI,4CAPqE,EAU7E,CAEA,GAAoB,YAAhBlB,EAAQnqB,IAAmB,CAC7B,MAAMsrB,EAAe,CAAC,kBAAmB,kBAAmB,cAAe,iBAC3ElB,EAAevT,KAAK,CAACJ,EAAGC,KACtB,MAAM8T,EAASc,EAAapd,QAAQuI,EAAEzW,KAChCyqB,EAASa,EAAapd,QAAQwI,EAAE1W,KAGtC,QAF0B,IAAZwqB,EAAgB5oB,OAAO8oB,iBAAmBF,KAC9B,IAAZC,EAAgB7oB,OAAO8oB,iBAAmBD,KAI1D,MAAME,EAAmB,IAAIxgB,IAAI,CAAC,kBAAmB,oBAC/CygB,EAAoB,IAAIzgB,IAAI,CAAC,cAAe,kBAC5C0gB,EAAsBT,EAAepoB,OAAOwnB,GAAUmB,EAAiBvR,IAAIoQ,EAAOxpB,MAClF8qB,EAAuBV,EAAepoB,OAAOwnB,GAAUoB,EAAkBxR,IAAIoQ,EAAOxpB,MACpFurB,EAA0BnB,EAAepoB,OAAOwnB,IACnDmB,EAAiBvR,IAAIoQ,EAAOxpB,OAAS4qB,EAAkBxR,IAAIoQ,EAAOxpB,MAG/DgrB,EAAmBH,EAAoB7tB,OACzC,oDAAoDkB,KAAK8pB,cAAc6C,EAAqB,2BAC5F,GACEI,EAAoBH,EAAqB9tB,OAC3C,oDAAoDkB,KAAK8pB,cAAc8C,EAAsB,2BAC7F,GACEU,EAAuBD,EAAwBvuB,OACjD,eAAemtB,EAAQD,mBAAmBhsB,KAAK8pB,cAAcuD,EAAyBpB,EAAQlC,aAAe,YAC7G,GAEJ,OAAK+C,GAAqBC,GAAsBO,EAEzC,2EACqDrB,EAAQnqB,mEACrBmqB,EAAQxuB,gCACjDqvB,sBACAC,sBACAO,4CAPuE,EAU/E,CAEA,MAAMC,EAAqBrB,EAAeptB,OACtCkB,KAAK8pB,cAAcoC,EAAgBD,EAAQlC,aAAe,IAC1D,GAEJ,IAAKoC,IAAmBoB,EAAmB7uB,OAAQ,MAAO,GAE1D,MAAM8uB,EAAmBD,EAAmB7uB,OACxC,eAAeutB,EAAQD,mBAAmBuB,UAC1C,GAEJ,MAAO,yEACqDtB,EAAQnqB,iEACrBmqB,EAAQxuB,8BACjD0uB,oBACAqB,0CAGL9mB,KAAK,IAER4I,EAAKnM,cAAc,oBAAoBiE,UAAY2kB,EACnD,MAAMpC,EAAY3pB,KAAK4G,YAAY,kBAAmB0I,GAChDsa,EAAa5pB,KAAK4G,YAAY,0BAA2B0I,GACzDua,EAAa7pB,KAAK4G,YAAY,mBAAoB0I,GAClDme,EAAYne,EAAK3M,iBAAiB,kBAElC+qB,EAAqB,KACrB/D,GACFA,EAAU5f,aAAa,SAAU,IAE/B6f,GACFA,EAAW7f,aAAa,gBAAiB,SAEvC8f,IACFA,EAAW1qB,MAAQ,IAErBsuB,EAAU7qB,QAAQygB,IAChBA,EAAK/e,MAAMC,QAAU,MAInBopB,EAAoB,KACpBhE,GACFA,EAAUjb,gBAAgB,UAExBkb,GACFA,EAAW7f,aAAa,gBAAiB,QAEvC8f,GACFA,EAAWte,SAIXqe,GAAcD,GAChBC,EAAWhf,iBAAiB,QAAUC,IACpCA,EAAM2M,mBACUmS,EAAUvc,aAAa,UAErCsgB,IAEAC,MAMF9D,GACFA,EAAWjf,iBAAiB,QAAS,KACnC,MAAMgjB,EAAc/D,EAAW1qB,MAAM+B,cACrCusB,EAAU7qB,QAAQygB,IAChB,MAAMwK,EAAexK,EAAKlgB,cAAc,wBAClC0X,GAAQgT,GAAcljB,aAAe0Y,EAAK1Y,aAAazJ,cAC7DmiB,EAAK/e,MAAMC,QAAUsW,EAAK1Z,SAASysB,GAAe,GAAK,WAM7DH,EAAU7qB,QAAQygB,IAChBA,EAAKzY,iBAAiB,QAAS,KAC7B,MAAMkjB,EAAWzK,EAAKpgB,aAAa,aACnC,IAAK6qB,EAAU,OAGfL,EAAU7qB,QAAQglB,GAAKA,EAAEtf,UAAUF,OAAO,aAC1Cib,EAAK/a,UAAU0E,IAAI,YAGnB,MAAM+gB,EAAc/tB,KAAK4G,YAAY,wBAAyB0I,GAC1Dye,IACFA,EAAYpjB,YAAc5I,OAAO+rB,GAAUxU,eAE7CoU,IAGA1tB,KAAK6F,WAAW,CAAEtF,KAAMutB,IACxB9tB,KAAK0qB,gBAAgBxf,OAIzB,MAAM8iB,EAAiBhuB,KAAK4G,YAAY,wBAAyB0I,GAC7D0e,IACFA,EAAepjB,iBAAiB,QAAS,KACvC,MAAMsC,EAAalN,KAAKyP,wBAAwBue,EAAe7uB,MAAO,CAAEwQ,SAAS,IACjF3P,KAAKqP,uBAAuBC,EAAMpC,KAEpC8gB,EAAepjB,iBAAiB,SAAU,KACxC,MAAMsC,EAAalN,KAAKyP,wBAAwBue,EAAe7uB,MAAO,CAAEwQ,SAAS,IACjF3P,KAAKqP,uBAAuBC,EAAMpC,KAEpClN,KAAKqP,uBAAuBC,EAAMlP,EAAO4E,SAAS,eAAiB,IAIrEsK,EAAK1E,iBAAiB,QAAU7L,IAC9B,GAAI4qB,IAAcA,EAAUvc,aAAa,UAAW,CAClD,MAAM6gB,EAA6BnR,QAAQ/d,EAAE6f,OAAO/S,QAAQ,oBACtDqiB,EAAwBpR,QAAQ/d,EAAE6f,OAAO/S,QAAQ,4BAClDoiB,GAA+BC,GAClCR,GAEJ,CAEA,MAAM9O,EAAS7f,EAAE6f,OAAO/S,QAAQ,yCAChC,IAAK+S,EAAQ,OACb,GAAIA,EAAOtW,UAAUgC,SAAS,eAE5B,YADAtK,KAAKypB,UAAUve,GAGjB,GAAI0T,EAAOtW,UAAUgC,SAAS,oBAE5B,YADAtK,KAAK6nB,oBAGP,MAAMsG,EAAMvP,EAAOtW,UAAUgC,SAAS,WAAasU,EAAS,KAC5D,GAAIuP,EAAK,CACP,MAAMrsB,EAAMqsB,EAAI/Y,QAAQtT,IAExB,GAAY,yBAARA,EACF9B,KAAK0W,8BAGF,GAAI1W,KAAKiQ,mBAAmBnO,GAC/B9B,KAAKqnB,uBAAuBvlB,EAAKqsB,QAG9B,GAAInuB,KAAK8kB,iBAAiBhjB,GAAM,CACnC,MACM2lB,EADoB0G,EAAI7lB,UAAUgC,SAAS,gBACR,KAAOxI,EAChD9B,KAAKilB,iBAAiB3V,EAAMmY,GAC5BznB,KAAK+lB,uBAAuB0B,GAC5BznB,KAAK8mB,oBACP,KAEK,CACH,MAAMsH,GAAcD,EAAI7lB,UAAUgC,SAAS,gBAC3C6jB,EAAI7lB,UAAUC,OAAO,eAAgB6lB,GACrCD,EAAIpkB,aAAa,eAAgBqkB,GACjCpuB,KAAKkhB,uBAAyBpf,EAC9B,IACE9B,KAAKoF,YAAY,CAAEtD,CAACA,GAAMssB,IAC1BpuB,KAAKiW,mBACP,CAAC,QACCjW,KAAKkhB,uBAAyB,IAChC,CACF,CACF,IAEF5R,EAAK3M,iBAAiB,2BAA2BC,QAAQE,IACvDA,EAAG8H,iBAAiB,UAAY7L,IAChB,UAAVA,EAAE+C,KAA6B,MAAV/C,EAAE+C,MACzB/C,EAAE+L,iBACFhI,EAAG0I,aAITxL,KAAK0qB,gBAAgBxf,GACrB,MAAMmjB,EAAoBruB,KAAK+kB,wBAAwB3kB,EAAO4E,QAG9D,GAFAhF,KAAKilB,iBAAiB3V,EAAM+e,GAC5BruB,KAAK+lB,uBAAuBsI,GACxBjuB,EAAO4E,OACT,IAAK,IAAIlD,KAAO1B,EAAO4E,OACrB,IAAIhF,KAAK8kB,iBAAiBhjB,IAGtB1B,EAAO4E,OAAOlD,IAAgB,eAARA,EAAsB,CAC9C,MAAM+E,EAAW/E,EACXqsB,EAAMnuB,KAAK4G,YAAY,sBAAsBC,MAAcyI,GAC7D6e,IACFA,EAAI7lB,UAAU0E,IAAI,gBAClBmhB,EAAIpkB,aAAa,eAAgB,QAErC,CAIJ,OADA0H,EAAUnK,YAAY4D,GACfA,CACT,CAAE,MAAOnM,GAEP,OADAC,QAAQyU,MAAM,yBAA0B1U,GACjC,IACT,CACF,EAEF,aAAAuvB,CAAc3sB,GACZ,IACE3B,KAAKwI,sBACLxI,KAAK4I,uBAEL,MAAM2lB,EAAiB,qRAGkCvuB,KAAKyoB,oBAAoB9mB,GAASY,iJAMnFisB,EAASnwB,SAAS8I,cAAc,OACtCqnB,EAAOpnB,UAAYmnB,EACnBC,EAAOlmB,UAAU0E,IAAI,iBACrB,MAAMmhB,EAAMnuB,KAAK4G,YAAY,kBAAmB4nB,GAChDxuB,KAAK8U,gBAAkB9U,KAAK4G,YAAY,wBAAyB4nB,GAEjExuB,KAAK+K,mBAAqBojB,EAE1B,MAAMnsB,SAAEA,EAAW,eAAcG,OAAEA,EAAS,CAAC,GAAI,IAAGG,KAAEA,GAASX,EACzD8sB,EAAmBzuB,KAAKkC,gBAAgBC,IAAW,CAAC,GAAI,IACxDusB,EAAUD,EAAiB,IAAM,GACjCzD,EAAUyD,EAAiB,IAAM,GACvC,IAeInf,EAfAqf,EAAc,CAAEjM,KAAM,GAAGgM,MAAa5L,OAAQ,GAAGkI,OAUrD,GATiB,iBAAbhpB,EACF2sB,EAAc,CAAErL,MAAO,GAAGoL,MAAahM,KAAM,OAAQI,OAAQ,GAAGkI,OAC1C,aAAbhpB,EACT2sB,EAAc,CAAE/L,IAAK,GAAGoI,MAAalI,OAAQ,OAAQJ,KAAM,GAAGgM,OACxC,cAAb1sB,IACT2sB,EAAc,CAAE/L,IAAK,GAAGoI,MAAa1H,MAAO,GAAGoL,MAAa5L,OAAQ,OAAQJ,KAAM,SAEpF/d,OAAOiqB,OAAOT,EAAI7pB,MAAOqqB,GAErBrsB,SAA+D,KAAxBP,OAAOO,GAAM5D,OAAe,CACrE,MAAMnG,EAAayH,KAAKqC,oBAAoBC,GAC5C6rB,EAAI7pB,MAAMqE,YAAY,oBAAqBpQ,EAC7C,CAiDA,GA9CA41B,EAAIvjB,iBAAiB,QAAUC,IAE7B,GADAA,EAAMC,kBACDwE,EAAM,CAET,GADAA,EAAOtP,KAAK2qB,YAAY,IAAKhpB,EAAS8P,UAAW+c,KAC5Clf,EAAM,OACXtP,KAAKkL,cAAgBoE,EAErB,MAAM0I,EAAU1I,EAAKnM,cAAc,gBAC/B6U,GACFA,EAAQpN,iBAAiB,QAAUikB,IACjCA,EAAarX,kBACbxX,KAAKypB,UAAUna,EAAM6e,KAIzB,MAAMpW,EAAWzI,EAAKnM,cAAc,mBAChC4U,GACFA,EAASnN,iBAAiB,QAAUkkB,IAClCA,EAAWtX,kBACXxX,KAAKypB,UAAUna,EAAM6e,IAG3B,CAEwC,SAAvB7e,EAAKhL,MAAMC,SAAgE,SAA1C3E,OAAO2N,iBAAiB+B,GAAM/K,QAE9EvE,KAAKmpB,SAAS7Z,EAAM6e,GAEpBnuB,KAAKypB,UAAUna,EAAM6e,KAKzBA,EAAIvjB,iBAAiB,UAAY7L,IACjB,UAAVA,EAAE+C,KAA6B,MAAV/C,EAAE+C,MACzB/C,EAAE+L,iBACFqjB,EAAI3iB,WAIRnN,SAASgM,KAAK/C,YAAYknB,GAC1BxuB,KAAK0qB,gBAAgB8D,GACrBxuB,KAAKmK,iBACLnK,KAAKqV,uBAAuB6O,MAAM,KAChClkB,KAAK4U,sBAAsB,CAAEJ,WAAY,OAEvCxU,KAAKsB,YAAa,CACpB,MAAMytB,EAAe,KACnB/uB,KAAKqV,qBAAqB,CAAEC,OAAO,IAAQ4O,MAAM,KAC/ClkB,KAAK4U,sBAAsB5U,KAAK+U,gBAAkB,CAAEP,WAAY,QAGxC,aAAxBnW,SAAS2wB,WACXjb,WAAWgb,EAAc,KAEzBnvB,OAAOgL,iBAAiB,OAAQ,KAC9BmJ,WAAWgb,EAAc,MACxB,CAAEjb,MAAM,GAEf,CAiBA,OAdAzV,SAASuM,iBAAiB,QAAU7L,IAClC,IAAKovB,EAAK,OACV,MAAMc,EAAgBlwB,EAAE6f,SAAWuP,GAAOA,EAAI7jB,SAASvL,EAAE6f,QACnDsQ,EAAsBnwB,EAAE6f,OAAO/S,QAAQ,kBAC7C,GAAIyD,GAAQtP,KAAKiL,sBAAwBqE,GAA+B,SAAvBA,EAAKhL,MAAMC,QAAoB,CAC9E,MAAM4qB,EAAoB7f,EAAKhF,SAASvL,EAAE6f,QACrCqQ,GAAkBE,GAAsBD,GAC3ClvB,KAAKypB,UAAUna,EAAM6e,EAEzB,MAAYc,GACVd,EAAIrG,SAID0G,CACT,CAAE,MAAOzvB,GAEP,OADAC,QAAQyU,MAAM,2BAA4B1U,GACnC,IACT,CACF,EAEF,wBAAAqwB,GACQ,IACE,GAAI/wB,SAAS8E,cAAc,+BACzB,OAGF,MAAMksB,EAAuBrvB,KAAK0B,0BAC9B2tB,GAAwB1qB,OAAOgB,KAAK0pB,GAAsBvwB,SAC5DkB,KAAKsvB,YAAcD,EACnBrvB,KAAK2B,QAAU,IACV3B,KAAK2B,WACL0tB,IAIP,MAAME,EAAc,IAAKvvB,KAAK2B,SACxBpB,EAAOgvB,EAAYhvB,MACvBlC,SAAS8E,cAAc,SAASF,aAAa,SAAS6X,QAAQ,SAAU,KACxEpa,UAAUzF,UACV,KACFs0B,EAAYhvB,KAAOA,EAEnBgvB,EAAYvtB,SAAWutB,EAAYvtB,UAAY,eAE3CutB,EAAYptB,SACdotB,EAAYptB,OAASnC,KAAKkC,gBAAgBqtB,EAAYptB,SAGpDotB,EAAYjtB,OACditB,EAAYjtB,KAAOtC,KAAKqC,oBAAoBktB,EAAYjtB,MACxDtC,KAAKgE,YAAYzL,WAAag3B,EAAYjtB,MAG5CtC,KAAK2B,QAAU,IAAK4tB,GACpBvvB,KAAKwvB,oBAAoBD,GACzBvvB,KAAKwI,sBACLxI,KAAK4I,uBAGL5I,KAAKiG,YAAW,GAChBjG,KAAK8V,0BACL9V,KAAKoW,2BACL,MAAMqZ,EAAqBzvB,KAAK+kB,wBAAwB/kB,KAAK0E,aAAaM,QAC1EhF,KAAK+lB,uBAAuB0J,GAG5BzvB,KAAKiW,oBACLjW,KAAK8mB,qBAGL9mB,KAAK0vB,aAAaH,EACpB,CAAE,MAAOxwB,GACPC,QAAQyU,MAAM,uCAAwC1U,EACxD,CACF,EAEN,YAAA2wB,CAAa3G,EAAO,IACZ,IACE,IAAIpnB,EAAU,CAAEpB,KAAMP,KAAKoB,qBAAsBY,SAAU,eAAgBG,OAAQ,CAAC,GAAI,KAGxF,IACE,MAAMgE,EAAcnG,KAAKoG,mBACrBD,IACFxE,EAAU,IAAKA,KAAYtB,KAAKC,MAAM6F,IAG1C,CAAE,MAAOpH,GACPC,QAAQC,KAAK,8BAA+BF,EAC9C,CAGA4C,EAAU,IAAKA,KAAYonB,GAC3B/oB,KAAK6F,WAAWlE,GAGhB3B,KAAKsuB,cAAc3sB,EACrB,CAAE,MAAO5C,GACPC,QAAQyU,MAAM,0BAA2B1U,EAC3C,CACF;;;;;;;;;;;;ACz7BR,MAAM4wB,EACJ,WAAAC,CAAYjuB,EAAU,IAIpB3B,KAAKgE,YAAc,IAAKhM,GACxBgI,KAAKsJ,YAAc/P,EACnByG,KAAKgR,gBAAkBxV,EAEvBwE,KAAK+mB,cAAgB,CACnB,gBAAiB,CACfvf,OAAQ,CAAE1D,OAAU,kCACpB+C,SAAUhL,GAEZ,iBAAkB,CAChB2L,OAAQ,CAAE1D,OAAU,kCACpB+C,SAAUhL,GAEZ,gBAAiB,CACf2L,OAAQ,CAAE1D,OAAU,gBACpB+C,SAAUhL,GAEZ,iBAAkB,CAChB2L,OAAQ,CAAE1D,OAAU,iBACpB+C,SAAUhL,GAEZ,kBAAmB,CACjB2L,OAAQ,CAAE1D,OAAU,kBACpB+C,SAAUhL,IAIdmE,KAAKioB,aAAensB,EACpBkE,KAAKY,mBAAqBrD,EAAoBiB,IAAKvD,QAAmBA,KAEtE+E,KAAKwrB,YAAc,CACjB,CAAE/tB,MAAO,aAAcqE,IAAK,gBAAiBS,KAAMvC,KAAKsJ,YAAY3P,cACpE,CAAE8D,MAAO,kBAAmBqE,IAAK,eAAgBS,KAAMvC,KAAKsJ,YAAY1P,aACxE,CAAE6D,MAAO,gBAAiBqE,IAAK,cAAeS,KAAMvC,KAAKsJ,YAAYzP,YACrE,CACE4D,MAAO,iBACPqE,IAAK,iBACLS,KAAMvC,KAAKsJ,YAAYjO,aACvB4uB,yBAAyB,GAE3B,CAAExsB,MAAO,gBAAiBqE,IAAK,qBAAsBS,KAAMvC,KAAKsJ,YAAYhO,cAC5E,CAAEmC,MAAO,kBAAmBqE,IAAK,gBAAiBS,KAAMvC,KAAKsJ,YAAY/N,iBAIvEyE,KAAKsB,aACPtB,KAAKwrB,YAAY9oB,KACf,CAAEjF,MAAO,cAAeqE,IAAK,cAAeS,KAAMvC,KAAKsJ,YAAYlO,aACnE,CACEqC,MAAO,uBACPqE,IAAK,uBACLS,KAAMvC,KAAKsJ,YAAYnO,oBACvB00B,UAAU,IAMhB7vB,KAAK4S,eAAgB,EACrB5S,KAAKiT,gBAAiB,EACtBjT,KAAKgT,eAAiB,KACtBhT,KAAK+U,eAAiB,KACtB/U,KAAKuV,eAAiB,KACtBvV,KAAK8U,gBAAkB,KAGvB9U,KAAKoX,oBAAsB,KAC3BpX,KAAKuX,kBAAoB,KAGzBvX,KAAKmW,0BAA4B,GACjCnW,KAAK4V,6BAA+B,CAAA,EAGpC5V,KAAKshB,gBAAkB,KACvBthB,KAAKojB,gBAAkB,GACvBpjB,KAAKgjB,gBAAkB,KACvBhjB,KAAK8jB,4BAA8B,KACnC9jB,KAAK+jB,yBAA2B,KAChC/jB,KAAK0jB,oBAAsB,EAG3B1jB,KAAKqgB,aAAe,KACpBrgB,KAAKif,iBAAmB,KACxBjf,KAAK+e,gBAAkB,KACvB/e,KAAKof,aAAe,GACpBpf,KAAK6f,UAAY,UACjB7f,KAAKwf,SAAW,GAChBxf,KAAKyf,cAAgB,EACrBzf,KAAK4f,aAAe,EACpB5f,KAAK+f,SAAW,KAIhB/f,KAAKokB,iBAAmB,KACxBpkB,KAAKqkB,2BAA6B,GAGlCrkB,KAAKkhB,uBAAyB,KAG9BlhB,KAAKmQ,eAAiB,EACtBnQ,KAAK+P,gBAAkB,CAAC,IAAK,IAAK,KAClC/P,KAAK8O,oBAAsB,GAC3B9O,KAAK+O,oBAAsB,IAC3B/O,KAAKiP,qBAAuB,EAC5BjP,KAAK8vB,qBAAuB,CAAC,iBAAkB,iBAC/C9vB,KAAK+vB,uBAAyB,CAAC,iBAAkB,mBAEjD/vB,KAAKqrB,eAAiB,CACpB,CAAE5tB,MAAO,cAAeqE,IAAK,YAAaS,KAAMvC,KAAKsJ,YAAYxP,UACjE,CAAE2D,MAAO,cAAeqE,IAAK,eAAgBS,KAAMvC,KAAKsJ,YAAYvP,aACpE,CAAE0D,MAAO,iBAAkBqE,IAAK,iBAAkBS,KAAMvC,KAAKsJ,YAAYtP,eACzE,CAAEyD,MAAO,cAAeqE,IAAK,cAAeS,KAAMvC,KAAKsJ,YAAYpO,YACnE,CAAEuC,MAAO,gBAAiBqE,IAAK,gBAAiBS,KAAMvC,KAAKsJ,YAAYrP,cACvE,CAAEwD,MAAO,kBAAmBqE,IAAK,kBAAmBS,KAAMvC,KAAKsJ,YAAYpP,gBAC3E,CAAEuD,MAAO,kBAAmBqE,IAAK,kBAAmBS,KAAMvC,KAAKsJ,YAAYnP,gBAC3E,CACEsD,MAAO,YACPqE,IAAK,aACLS,KAAMvC,KAAKsJ,YAAYtO,eACvBmvB,YAAY,EACZzC,OAAQ1nB,KAAK+P,gBAAgBjR,SAIjCkB,KAAKiQ,mBAAqB,CACxB,aAAc,CACZyX,OAAQ1nB,KAAK+P,gBAAgBjR,OAC7BoR,cAAc,EACdmI,OAAQrY,KAAK+P,iBAEf,kBAAmB,CACjB2X,OAAQ1nB,KAAK8vB,qBAAqBhxB,OAClCoR,cAAc,EACdmI,OAAQrY,KAAK8vB,sBAEf,oBAAqB,CACnBpI,OAAQ1nB,KAAK+vB,uBAAuBjxB,OACpCoR,cAAc,EACdmI,OAAQrY,KAAK+vB,yBAIjB/vB,KAAK6R,mBAAqB,gJAK1B7R,KAAKurB,aAAe,CAClB,CACE9tB,MAAO,WACPqE,IAAK,kBACLS,KAAMvC,KAAKsJ,YAAYlP,SACvB+vB,YAAY,EACZzC,OAAQ1nB,KAAK8vB,qBAAqBhxB,QAEpC,CAAErB,MAAO,gBAAiBqE,IAAK,gBAAiBS,KAAMvC,KAAKsJ,YAAY/O,cACvE,CACEkD,MAAO,aACPqE,IAAK,oBACLS,KAAMvC,KAAKsJ,YAAY9O,WACvB2vB,YAAY,EACZzC,OAAQ1nB,KAAK+vB,uBAAuBjxB,SAGxCkB,KAAKkF,gBAAkBP,OAAOgB,KAAK3F,KAAK+mB,eACxC/mB,KAAKglB,qBAAuB,KAE5BhlB,KAAK4M,mBAAqB,oEAC1B5M,KAAK4N,kBAAoB,KACzB5N,KAAK+N,2BAA6B,EAGlC/N,KAAK0E,aAAe,CAAA,EACpB1E,KAAKG,UAAY,SACjBH,KAAKiS,mBAAoB,EACzBjS,KAAKkR,oBAAqB,EAG1BlR,KAAKiL,oBAAsB,KAC3BjL,KAAKqpB,iBAAmB,KACxBrpB,KAAKwpB,gBAAkB,KACvBxpB,KAAKspB,cAAgB,KACrBtpB,KAAK+K,mBAAqB,KAC1B/K,KAAKoK,gBAAkB,KACvBpK,KAAKkL,cAAgB,KAGrBlL,KAAK6I,wBAAyB,EAE9B7I,KAAKsvB,YAActvB,KAAK0B,0BAExB1B,KAAK2B,QAAU,CACbpB,KAAMP,KAAKoB,qBACXY,SAAU,kBACPhC,KAAKsvB,eACL3tB,GAGL3B,KAAKwvB,oBAAoBxvB,KAAK2B,SAc9B3B,KAAKia,gBAAkB,CACrB6D,mBACwC,iBAA/Bnc,EAAQquB,oBACfruB,EAAQquB,mBAAmBtxB,OACzBiD,EAAQquB,mBAAmBtxB,OAAS,GACxCyf,mBACwC,iBAA/Bxc,EAAQsuB,oBACftuB,EAAQsuB,mBAAmBvxB,OACzBiD,EAAQsuB,mBAAmBvxB,OAAS,GACxCwb,KArBuB,CAAC/a,IACxB,MAAMgF,EAAUT,OAAOvE,GACvB,OAAKuE,OAAOC,SAASQ,GACdP,KAAKiL,IAAI,EAAGjL,KAAKK,IAAI,GAAKE,IADK,GAmBhC+rB,CAAiBvuB,EAAQwuB,SAC/B/V,MAhBwB,CAACjb,IACzB,MAAMgF,EAAUT,OAAOvE,GACvB,OAAKuE,OAAOC,SAASQ,GACdP,KAAKiL,IAAI,EAAGjL,KAAKK,IAAI,EAAGE,IADO,GAc/BisB,CAAkBzuB,EAAQ0uB,WAG/BrwB,KAAK2B,QAAQQ,SACfnC,KAAK2B,QAAQQ,OAASnC,KAAKkC,gBAAgBlC,KAAK2B,QAAQQ,SAGtDnC,KAAK2B,QAAQW,OACftC,KAAKgE,YAAYzL,WAAayH,KAAKqC,oBAAoBrC,KAAK2B,QAAQW,MACpEtC,KAAK2B,QAAQW,KAAOtC,KAAKgE,YAAYzL,YAGvCyH,KAAKwI,sBACLxI,KAAK4I,sBACP,CAEA,mBAAA4mB,CAAoB7tB,EAAU,IAC5B,IAAKA,GAA8B,iBAAZA,EAAsB,OAE7C,MAAM2uB,EAAgB,IAChB3uB,EAAQ4uB,OAAkC,iBAAlB5uB,EAAQ4uB,MAAqB5uB,EAAQ4uB,MAAQ,MACtE5uB,GAGa,CAChB,eACA,oBACA,mBACA,kBACA,YACA,oBACA,iBACA,cACA,iBACA,aACA,cACA,eACA,qBACA,eACA,mBACA,qBACA,UAGQiB,QAASd,IACjB,MAAM3C,EAAQmxB,EAAcxuB,GAC5B,GAAI3C,QAAJ,CAEA,GAAqB,iBAAVA,EAAoB,CAC7B,MAAM+E,EAAU/E,EAAMT,OACtB,IAAKwF,EAAS,OAEd,YADAlE,KAAKgE,YAAYlC,GAAOoC,EAE1B,CAEAlE,KAAKgE,YAAYlC,GAAO3C,CATmB,SAYZ+D,IAA7BotB,EAAc/3B,YAAyD,OAA7B+3B,EAAc/3B,YAAoD,KAA7B+3B,EAAc/3B,aAC/FyH,KAAKgE,YAAYzL,WAAayH,KAAKqC,oBAAoBiuB,EAAc/3B,YAEzE,EAOF,MAAMi4B,EAAkBb,EAAoB/qB,UAc5C,GAZAD,OAAOiqB,OACL4B,EACA9yB,EACAiJ,EACAwC,EACA6e,GAGoB,oBAAXpoB,SACTA,OAAO+vB,oBAAsBA,GAGP,oBAAbtxB,SAA0B,CACnC,MAOMoyB,EAAiB,IAAId,EANP,oBAAX/vB,QACPA,OAAO8wB,4BACsC,iBAAtC9wB,OAAO8wB,2BACZ9wB,OAAO8wB,2BAA6B,CAAA,GAIZ,aAAxBryB,SAAS2wB,YAAqD,gBAAxB3wB,SAAS2wB,WACjDyB,EAAerB,2BAEf/wB,SAASuM,iBAAiB,mBAAoB,IAAM6lB,EAAerB,2BAEvE"}