{"version":3,"file":"accessible-web-widget.min.js","sources":["../src/constants/theme.js","../src/constants/icons.js","../src/constants/selectors.js","../src/constants/translations.js","../src/state.js","../src/styles.js","../src/features.js","../src/ui.js","../src/index.js"],"sourcesContent":["export const WIDGET_THEME = {\n      // Core colors\n      primaryColor: '#1976d2',        // Accessible blue (WCAG AA compliant)\n      primaryColorLight: '#42a5f5',   // Lighter blue\n      primaryColorDark: '#0d47a1',    // Darker blue\n      backgroundColor: '#f5f7fa',\n      textColor: '#222222',\n      textColorInverted: '#ffffff',\n      \n      // UI elements\n      buttonSize: '34px',\n      cardBackground: '#ffffff',\n      borderColor: '#d1d5db',\n      focusRingColor: '#1976d2',      // Match primary\n      \n      // Interactive states\n      hoverColor: '#42a5f5',          // Use light blue for hover\n      activeColor: '#0d47a1',         // Use dark blue for active\n      \n      // Feedback colors\n      successColor: '#2e7d32', // Green\n      errorColor: '#c62828', // Red\n      warningColor: '#f57c00', // Orange\n      \n      // Other UI properties\n      headerHeight: '54px',\n      borderRadius: '8px',\n      buttonBorderRadius: '0.4rem',\n      menuPosition: 'right', // or 'left'\n      zIndex: 100000,\n      \n      // WCAG-specific\n      focusBorderWidth: '3px',\n      focusOutlineOffset: '2px'\n    };\n","export const WIDGET_ICONS = {\n      accessibility: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\"><path d=\"M480-720q-33 0-56.5-23.5T400-800q0-33 23.5-56.5T480-880q33 0 56.5 23.5T560-800q0 33-23.5 56.5T480-720ZM360-80v-520q-60-5-122-15t-118-25l20-80q78 21 166 30.5t174 9.5q86 0 174-9.5T820-720l20 80q-56 15-118 25t-122 15v520h-80v-240h-80v240h-80Z\"/></svg>',\n      largePointer: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\"><path d=\"m320-410 79-110h170L320-716v306ZM551-80 406-392 240-160v-720l560 440H516l144 309-109 51ZM399-520Z\"/></svg>',\n      pauseMotion: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#1f1f1f\"><path d=\"m791-55-91-91q-49 32-104.5 49T480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 17-115.5T146-700l-91-91 57-57 736 736-57 57ZM480-160q43 0 83.5-11t78.5-33L204-642q-22 38-33 78.5T160-480q0 133 93.5 226.5T480-160Zm334-100-58-58q22-38 33-78.5t11-83.5q0-133-93.5-226.5T480-800q-43 0-83.5 11T318-756l-58-58q49-32 104.5-49T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 60-17 115.5T814-260ZM537-537ZM423-423Z\"/></svg>',\n      readingAid: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#1f1f1f\"><path d=\"M320-80v-440l-80-120v-240h480v240l-80 120v440H320Zm160-260q-25 0-42.5-17.5T420-400q0-25 17.5-42.5T480-460q25 0 42.5 17.5T540-400q0 25-17.5 42.5T480-340ZM320-760h320v-40H320v40Zm320 80H320v16l80 120v384h160v-384l80-120v-16ZM480-480Z\"/></svg>',\n      boldText: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#1f1f1f\"><path d=\"M272-200v-560h221q65 0 120 40t55 111q0 51-23 78.5T602-491q25 11 55.5 41t30.5 90q0 89-65 124.5T501-200H272Zm121-112h104q48 0 58.5-24.5T566-372q0-11-10.5-35.5T494-432H393v120Zm0-228h93q33 0 48-17t15-38q0-24-17-39t-44-15h-95v109Z\"/></svg>',\n      lineSpacing: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#1f1f1f\"><path d=\"M240-160 80-320l56-56 64 62v-332l-64 62-56-56 160-160 160 160-56 56-64-62v332l64-62 56 56-160 160Zm240-40v-80h400v80H480Zm0-240v-80h400v80H480Zm0-240v-80h400v80H480Z\"/></svg>',\n      letterSpacing: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#1f1f1f\"><path d=\"M320-80 160-240l160-160 57 56-64 64h334l-63-64 56-56 160 160L640-80l-57-56 64-64H313l63 64-56 56ZM200-480v-400h80v400h-80Zm240 0v-400h80v400h-80Zm240 0v-400h80v400h-80Z\"/></svg>',\n      dyslexiaFont: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#1f1f1f\"><path d=\"m131-252 165-440h79l165 440h-76l-39-112H247l-40 112h-76Zm139-176h131l-64-182h-4l-63 182Zm395 186q-51 0-81-27.5T554-342q0-44 34.5-72.5T677-443q23 0 45 4t38 11v-12q0-29-20.5-47T685-505q-23 0-42 9.5T610-468l-47-35q24-29 54.5-43t68.5-14q69 0 103 32.5t34 97.5v178h-63v-37h-4q-14 23-38 35t-53 12Zm12-54q35 0 59.5-24t24.5-56q-14-8-33.5-12.5T689-393q-32 0-50 14t-18 37q0 20 16 33t40 13Z\"/></svg>',\n      highlightLinks: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#1f1f1f\"><path d=\"M440-280H280q-83 0-141.5-58.5T80-480q0-83 58.5-141.5T280-680h160v80H280q-50 0-85 35t-35 85q0 50 35 85t85 35h160v80ZM320-440v-80h320v80H320Zm200 160v-80h160q50 0 85-35t35-85q0-50-35-85t-85-35H520v-80h160q83 0 141.5 58.5T880-480q0 83-58.5 141.5T680-280H520Z\"/></svg>',\n      highlightTitle: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#1f1f1f\"><path d=\"M320-280q17 0 28.5-11.5T360-320q0-17-11.5-28.5T320-360q-17 0-28.5 11.5T280-320q0 17 11.5 28.5T320-280Zm0-160q17 0 28.5-11.5T360-480q0-17-11.5-28.5T320-520q-17 0-28.5 11.5T280-480q0 17 11.5 28.5T320-440Zm0-160q17 0 28.5-11.5T360-640q0-17-11.5-28.5T320-680q-17 0-28.5 11.5T280-640q0 17 11.5 28.5T320-600Zm120 320h240v-80H440v80Zm0-160h240v-80H440v80Zm0-160h240v-80H440v80ZM200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Zm0-560v560-560Z\"/></svg>',\n      darkContrast: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#1f1f1f\"><path d=\"M484-80q-84 0-157.5-32t-128-86.5Q144-253 112-326.5T80-484q0-146 93-257.5T410-880q-18 99 11 193.5T521-521q71 71 165.5 100T880-410q-26 144-138 237T484-80Zm0-80q88 0 163-44t118-121q-86-8-163-43.5T464-465q-61-61-97-138t-43-163q-77 43-120.5 118.5T160-484q0 135 94.5 229.5T484-160Zm-20-305Z\"/></svg>',\n      lightContrast: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#1f1f1f\"><path d=\"M440-800v-120h80v120h-80Zm0 760v-120h80v120h-80Zm360-400v-80h120v80H800Zm-760 0v-80h120v80H40Zm708-252-56-56 70-72 58 58-72 70ZM198-140l-58-58 72-70 56 56-70 72Zm564 0-70-72 56-56 72 70-58 58ZM212-692l-72-70 58-58 70 72-56 56Zm268 452q-100 0-170-70t-70-170q0-100 70-170t170-70q100 0 170 70t70 170q0 100-70 170t-170 70Zm0-80q67 0 113.5-46.5T640-480q0-67-46.5-113.5T480-640q-67 0-113.5 46.5T320-480q0 67 46.5 113.5T480-320Zm0-160Z\"/></svg>',\n      invertColors: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#1f1f1f\"><path d=\"M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-64-24.5-122.5T706-706L254-254q45 45 103.5 69.5T480-160Zm0-160v-60h200v60H480ZM320-500h60v-80h80v-60h-80v-80h-60v80h-80v60h80v80Z\"/></svg>',\n      lowSaturation: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#1f1f1f\"><path d=\"M480-120q-133 0-226.5-92T160-436q0-65 25-121.5T254-658l226-222 226 222q44 44 69 100.5T800-436q0 132-93.5 224T480-120ZM242-400h474q12-72-13.5-123T650-600L480-768 310-600q-27 26-53 77t-15 123Z\"/></svg>',\n      highSaturation: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#1f1f1f\"><path d=\"M480-80q-82 0-155-31.5t-127.5-86Q143-252 111.5-325T80-480q0-83 32.5-156t88-127Q256-817 330-848.5T488-880q80 0 151 27.5t124.5 76q53.5 48.5 85 115T880-518q0 115-70 176.5T640-280h-74q-9 0-12.5 5t-3.5 11q0 12 15 34.5t15 51.5q0 50-27.5 74T480-80Zm0-400Zm-220 40q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17Zm120-160q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17Zm200 0q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17Zm120 160q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17ZM480-160q9 0 14.5-5t5.5-13q0-14-15-33t-15-57q0-42 29-67t71-25h70q66 0 113-38.5T800-518q0-121-92.5-201.5T488-800q-136 0-232 93t-96 227q0 133 93.5 226.5T480-160Z\"/></svg>',\n      monochrome: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#1f1f1f\"><path d=\"M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm40-83q119-15 199.5-104.5T800-480q0-123-80.5-212.5T520-797v634Z\"/></svg>',\n      reset: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#1f1f1f\"><path d=\"M440-122q-121-15-200.5-105.5T160-440q0-66 26-126.5T260-672l57 57q-38 34-57.5 79T240-440q0 88 56 155.5T440-202v80Zm80 0v-80q87-16 143.5-83T720-440q0-100-70-170t-170-70h-3l44 44-56 56-140-140 140-140 56 56-44 44h3q134 0 227 93t93 227q0 121-79.5 211.5T520-122Z\"/></svg>',\n      close: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z\"/></svg>',\n      increase: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2Z\"/></svg>',\n      decrease: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M19 13H5v-2h14v2Z\"/></svg>',\n      arrowBack: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"currentColor\"><path d=\"M400-80 0-480l400-400 71 71-329 329 329 329-71 71Z\"/></svg>',\n      adjustFontSize: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M2 4v3h5v12h3V7h5V4H2m19 5h-9v3h3v7h3v-7h3V9Z\"/></svg>',\n      language: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"currentColor\"><path d=\"M480-80q-82 0-155-31.5t-127.5-86Q143-252 111.5-325T80-480q0-83 31.5-155.5t86-127Q252-817 325-848.5T480-880q83 0 155.5 31.5t127 86q54.5 54.5 86 127T880-480q0 82-31.5 155t-86 127.5q-54.5 54.5-127 86T480-80Zm0-82q26-36 45-75t31-83H404q12 44 31 83t45 75Zm-104-16q-18-33-31.5-68.5T322-320H204q29 50 72.5 87t99.5 55Zm208 0q56-18 99.5-55t72.5-87H638q-9 38-22.5 73.5T584-178ZM170-400h136q-3-20-4.5-39.5T300-480q0-21 1.5-40.5T306-560H170q-5 20-7.5 39.5T160-480q0 21 2.5 40.5T170-400Zm216 0h188q3-20 4.5-39.5T580-480q0-21-1.5-40.5T574-560H386q-3 20-4.5 39.5T380-480q0 21 1.5 40.5T386-400Zm268 0h136q5-20 7.5-39.5T800-480q0-21-2.5-40.5T790-560H654q3 20 4.5 39.5T660-480q0 21-1.5 40.5T654-400Zm-16-240h118q-29-50-72.5-87T584-782q18 33 31.5 68.5T638-640Zm-234 0h152q-12-44-31-83t-45-75q-26 36-45 75t-31 83Zm-200 0h118q9-38 22.5-73.5T376-782q-56 18-99.5 55T204-640Z\"/></svg>',\n      hideImages: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#1f1f1f\"><path d=\"m840-234-80-80v-446H314l-80-80h526q33 0 56.5 23.5T840-760v526ZM792-56l-64-64H200q-33 0-56.5-23.5T120-200v-528l-64-64 56-56 736 736-56 56ZM240-280l120-160 90 120 33-44-283-283v447h447l-80-80H240Zm297-257ZM424-424Z\"/></svg>',\n      accessibilityReport: '<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\" width=\"24px\" fill=\"#1f1f1f\"><path d=\"M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Zm40-80h200v-80H240v80Zm254-54 166-166-56-56-110 110-46-46-56 56 102 102ZM240-440h200v-80H240v80Zm0-160h200v-80H240v80Zm-40 400v-560 560Z\"/></svg>'\n    };\n","export const TARGET_SELECTORS = {\n      ALL: ['', '*:not(.material-icons,.acc-menu,.acc-menu *)'],\n      LINKS: [\"a[href]\"],\n      HEADERS: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6', '.wsite-headline', '.wsite-content-title'],\n      TEXT: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6', '.wsite-headline', '.wsite-content-title', 'img', 'p', 'i', 'svg', 'a', 'button:not(.acc-btn)', 'label', 'li', 'ol']\n    };\n\nexport const PAGE_CONTENT_SELECTOR = 'body > *:not(.acc-container)';\n","export const TRANSLATIONS = {\n      en: {\n        \"Accessibility Menu\": \"Accessibility Menu\",\n        \"Reset settings\": \"Reset settings\",\n        \"Reset All Settings\": \"Reset All Settings\",\n        \"Close\": \"Close\",\n        \"Content Adjustments\": \"Content Adjustments\",\n        \"Adjust Font Size\": \"Adjust Font Size\",\n        \"Highlight Title\": \"Highlight Title\",\n        \"Highlight Links\": \"Highlight Links\",\n        \"Readable Font\": \"Readable Font\",\n        \"Color Adjustments\": \"Color Adjustments\",\n        \"Invert Colors\": \"Invert Colors\",\n        \"Light Contrast\": \"Light Contrast\",\n        \"Dark Contrast\": \"Dark Contrast\",\n        \"High Contrast\": \"High Contrast\",\n        \"High Saturation\": \"High Saturation\",\n        \"Low Saturation\": \"Low Saturation\",\n        \"Monochrome\": \"Monochrome\",\n        \"Tools\": \"Tools\",\n        \"Reading Guide\": \"Reading Guide\",\n        \"Stop Animations\": \"Stop Animations\",\n        \"Big Cursor\": \"Big Cursor\",\n        \"Increase Font Size\": \"Increase Font Size\",\n        \"Decrease Font Size\": \"Decrease Font Size\",\n        \"Letter Spacing\": \"Letter Spacing\",\n        \"Line Height\": \"Line Height\",\n        \"Font Weight\": \"Font Weight\",\n        \"Dyslexia Font\": \"Dyslexia Font\",\n        \"Language\": \"Language\",\n        \"Open Accessibility Menu\": \"Open Accessibility Menu\",\n        \"Hide Images\": \"Hide Images\",\n        \"Skip to accessibility menu\": \"Skip to accessibility menu\",\n        \"Accessibility Report\": \"Accessibility Report\",\n        \"Run Accessibility Check\": \"Run Accessibility Check\",\n        \"Loading...\": \"Loading...\",\n        \"Analyzing page...\": \"Analyzing page...\",\n        \"Critical\": \"Critical\",\n        \"Serious\": \"Serious\",\n        \"Moderate\": \"Moderate\",\n        \"Minor\": \"Minor\",\n        \"Violations Found\": \"Violations Found\",\n        \"No Issues Found\": \"No Issues Found\",\n        \"Element\": \"Element\",\n        \"Issue\": \"Issue\",\n        \"How to Fix\": \"How to Fix\",\n        \"Close Report\": \"Close Report\",\n        \"Passed Tests\": \"Passed Tests\",\n        \"Items Need Review\": \"Items Need Review\"\n      },\n      it: {\n        \"Accessibility Menu\": \"Menu Accessibilità\",\n        \"Reset settings\": \"Ripristina impostazioni\",\n        \"Reset All Settings\": \"Ripristina tutte le impostazioni\",\n        \"Close\": \"Chiudi\",\n        \"Content Adjustments\": \"Regolazioni Contenuto\",\n        \"Adjust Font Size\": \"Regola Dimensione Font\",\n        \"Highlight Title\": \"Evidenzia Titoli\",\n        \"Highlight Links\": \"Evidenzia Link\",\n        \"Readable Font\": \"Font Leggibile\",\n        \"Color Adjustments\": \"Regolazioni Colore\",\n        \"Invert Colors\": \"Inverti Colori\",\n        \"Light Contrast\": \"Contrasto Chiaro\",\n        \"Dark Contrast\": \"Contrasto Scuro\",\n        \"High Contrast\": \"Alto Contrasto\",\n        \"High Saturation\": \"Alta Saturazione\",\n        \"Low Saturation\": \"Bassa Saturazione\",\n        \"Monochrome\": \"Monocromatico\",\n        \"Tools\": \"Strumenti\",\n        \"Reading Guide\": \"Guida di Lettura\",\n        \"Stop Animations\": \"Ferma Animazioni\",\n        \"Big Cursor\": \"Cursore Grande\",\n        \"Increase Font Size\": \"Aumenta Dimensione Font\",\n        \"Decrease Font Size\": \"Diminuisci Dimensione Font\",\n        \"Letter Spacing\": \"Spaziatura Lettere\",\n        \"Line Height\": \"Altezza Riga\",\n        \"Font Weight\": \"Grassetto\",\n        \"Dyslexia Font\": \"Font Dislessia\",\n        \"Language\": \"Lingua\",\n        \"Open Accessibility Menu\": \"Apri Menu Accessibilità\",\n        \"Hide Images\": \"Nascondi Immagini\",\n        \"Skip to accessibility menu\": \"Vai al menu accessibilità\",\n        \"Accessibility Report\": \"Report Accessibilità\",\n        \"Run Accessibility Check\": \"Esegui Controllo Accessibilità\",\n        \"Loading...\": \"Caricamento...\",\n        \"Analyzing page...\": \"Analisi pagina...\",\n        \"Critical\": \"Critico\",\n        \"Serious\": \"Grave\",\n        \"Moderate\": \"Moderato\",\n        \"Minor\": \"Minore\",\n        \"Violations Found\": \"Violazioni Trovate\",\n        \"No Issues Found\": \"Nessun Problema Trovato\",\n        \"Element\": \"Elemento\",\n        \"Issue\": \"Problema\",\n        \"How to Fix\": \"Come Risolvere\",\n        \"Close Report\": \"Chiudi Report\",\n        \"Passed Tests\": \"Test Superati\",\n        \"Items Need Review\": \"Elementi da Rivedere\"\n      },\n      fr: {\n        \"Accessibility Menu\": \"Menu Accessibilité\",\n        \"Reset settings\": \"Réinitialiser les paramètres\",\n        \"Reset All Settings\": \"Réinitialiser tous les paramètres\",\n        \"Close\": \"Fermer\",\n        \"Content Adjustments\": \"Ajustements du Contenu\",\n        \"Adjust Font Size\": \"Ajuster la Taille de Police\",\n        \"Highlight Title\": \"Surligner les Titres\",\n        \"Highlight Links\": \"Surligner les Liens\",\n        \"Readable Font\": \"Police Lisible\",\n        \"Color Adjustments\": \"Ajustements des Couleurs\",\n        \"Invert Colors\": \"Inverser les Couleurs\",\n        \"Light Contrast\": \"Contraste Clair\",\n        \"Dark Contrast\": \"Contraste Sombre\",\n        \"High Contrast\": \"Contraste Élevé\",\n        \"High Saturation\": \"Saturation Élevée\",\n        \"Low Saturation\": \"Saturation Faible\",\n        \"Monochrome\": \"Monochrome\",\n        \"Tools\": \"Outils\",\n        \"Reading Guide\": \"Guide de Lecture\",\n        \"Stop Animations\": \"Arrêter les Animations\",\n        \"Big Cursor\": \"Grand Curseur\",\n        \"Increase Font Size\": \"Augmenter la Taille de Police\",\n        \"Decrease Font Size\": \"Diminuer la Taille de Police\",\n        \"Letter Spacing\": \"Espacement des Lettres\",\n        \"Line Height\": \"Hauteur de Ligne\",\n        \"Font Weight\": \"Graisse de Police\",\n        \"Dyslexia Font\": \"Police Dyslexie\",\n        \"Language\": \"Langue\",\n        \"Open Accessibility Menu\": \"Ouvrir le Menu Accessibilité\",\n        \"Hide Images\": \"Masquer les Images\",\n        \"Skip to accessibility menu\": \"Aller au menu accessibilité\",\n        \"Accessibility Report\": \"Rapport d'Accessibilité\",\n        \"Run Accessibility Check\": \"Lancer le Contrôle d'Accessibilité\",\n        \"Loading...\": \"Chargement...\",\n        \"Analyzing page...\": \"Analyse de la page...\",\n        \"Critical\": \"Critique\",\n        \"Serious\": \"Grave\",\n        \"Moderate\": \"Modéré\",\n        \"Minor\": \"Mineur\",\n        \"Violations Found\": \"Violations Trouvées\",\n        \"No Issues Found\": \"Aucun Problème Trouvé\",\n        \"Element\": \"Élément\",\n        \"Issue\": \"Problème\",\n        \"How to Fix\": \"Comment Corriger\",\n        \"Close Report\": \"Fermer le Rapport\",\n        \"Passed Tests\": \"Tests Réussis\",\n        \"Items Need Review\": \"Éléments à Vérifier\"\n      },\n      de: {\n        \"Accessibility Menu\": \"Barrierefreiheit-Menü\",\n        \"Reset settings\": \"Einstellungen zurücksetzen\",\n        \"Reset All Settings\": \"Alle Einstellungen zurücksetzen\",\n        \"Close\": \"Schließen\",\n        \"Content Adjustments\": \"Inhaltsanpassungen\",\n        \"Adjust Font Size\": \"Schriftgröße anpassen\",\n        \"Highlight Title\": \"Titel hervorheben\",\n        \"Highlight Links\": \"Links hervorheben\",\n        \"Readable Font\": \"Lesbare Schrift\",\n        \"Color Adjustments\": \"Farbanpassungen\",\n        \"Invert Colors\": \"Farben invertieren\",\n        \"Light Contrast\": \"Heller Kontrast\",\n        \"Dark Contrast\": \"Dunkler Kontrast\",\n        \"High Contrast\": \"Hoher Kontrast\",\n        \"High Saturation\": \"Hohe Sättigung\",\n        \"Low Saturation\": \"Niedrige Sättigung\",\n        \"Monochrome\": \"Monochrom\",\n        \"Tools\": \"Werkzeuge\",\n        \"Reading Guide\": \"Lesehilfe\",\n        \"Stop Animations\": \"Animationen stoppen\",\n        \"Big Cursor\": \"Großer Cursor\",\n        \"Increase Font Size\": \"Schriftgröße erhöhen\",\n        \"Decrease Font Size\": \"Schriftgröße verringern\",\n        \"Letter Spacing\": \"Zeichenabstand\",\n        \"Line Height\": \"Zeilenhöhe\",\n        \"Font Weight\": \"Schriftstärke\",\n        \"Dyslexia Font\": \"Legasthenie-Schrift\",\n        \"Language\": \"Sprache\",\n        \"Open Accessibility Menu\": \"Barrierefreiheit-Menü öffnen\",\n        \"Hide Images\": \"Bilder ausblenden\",\n        \"Skip to accessibility menu\": \"Zum Barrierefreiheit-Menü springen\",\n        \"Accessibility Report\": \"Barrierefreiheit-Bericht\",\n        \"Run Accessibility Check\": \"Barrierefreiheitsprüfung starten\",\n        \"Loading...\": \"Laden...\",\n        \"Analyzing page...\": \"Seite wird analysiert...\",\n        \"Critical\": \"Kritisch\",\n        \"Serious\": \"Schwerwiegend\",\n        \"Moderate\": \"Mäßig\",\n        \"Minor\": \"Gering\",\n        \"Violations Found\": \"Verstöße gefunden\",\n        \"No Issues Found\": \"Keine Probleme gefunden\",\n        \"Element\": \"Element\",\n        \"Issue\": \"Problem\",\n        \"How to Fix\": \"Lösung\",\n        \"Close Report\": \"Bericht schließen\",\n        \"Passed Tests\": \"Bestandene Tests\",\n        \"Items Need Review\": \"Elemente zur Überprüfung\"\n      },\n      es: {\n        \"Accessibility Menu\": \"Menú de Accesibilidad\",\n        \"Reset settings\": \"Restablecer configuración\",\n        \"Reset All Settings\": \"Restablecer toda la configuración\",\n        \"Close\": \"Cerrar\",\n        \"Content Adjustments\": \"Ajustes de Contenido\",\n        \"Adjust Font Size\": \"Ajustar Tamaño de Fuente\",\n        \"Highlight Title\": \"Resaltar Títulos\",\n        \"Highlight Links\": \"Resaltar Enlaces\",\n        \"Readable Font\": \"Fuente Legible\",\n        \"Color Adjustments\": \"Ajustes de Color\",\n        \"Invert Colors\": \"Invertir Colores\",\n        \"Light Contrast\": \"Contraste Claro\",\n        \"Dark Contrast\": \"Contraste Oscuro\",\n        \"High Contrast\": \"Alto Contraste\",\n        \"High Saturation\": \"Alta Saturación\",\n        \"Low Saturation\": \"Baja Saturación\",\n        \"Monochrome\": \"Monocromo\",\n        \"Tools\": \"Herramientas\",\n        \"Reading Guide\": \"Guía de Lectura\",\n        \"Stop Animations\": \"Detener Animaciones\",\n        \"Big Cursor\": \"Cursor Grande\",\n        \"Increase Font Size\": \"Aumentar Tamaño de Fuente\",\n        \"Decrease Font Size\": \"Disminuir Tamaño de Fuente\",\n        \"Letter Spacing\": \"Espaciado de Letras\",\n        \"Line Height\": \"Altura de Línea\",\n        \"Font Weight\": \"Grosor de Fuente\",\n        \"Dyslexia Font\": \"Fuente para Dislexia\",\n        \"Language\": \"Idioma\",\n        \"Open Accessibility Menu\": \"Abrir Menú de Accesibilidad\",\n        \"Hide Images\": \"Ocultar Imágenes\",\n        \"Skip to accessibility menu\": \"Ir al menú de accesibilidad\",\n        \"Accessibility Report\": \"Informe de Accesibilidad\",\n        \"Run Accessibility Check\": \"Ejecutar Comprobación de Accesibilidad\",\n        \"Loading...\": \"Cargando...\",\n        \"Analyzing page...\": \"Analizando página...\",\n        \"Critical\": \"Crítico\",\n        \"Serious\": \"Grave\",\n        \"Moderate\": \"Moderado\",\n        \"Minor\": \"Menor\",\n        \"Violations Found\": \"Violaciones Encontradas\",\n        \"No Issues Found\": \"Sin Problemas Encontrados\",\n        \"Element\": \"Elemento\",\n        \"Issue\": \"Problema\",\n        \"How to Fix\": \"Cómo Solucionarlo\",\n        \"Close Report\": \"Cerrar Informe\",\n        \"Passed Tests\": \"Pruebas Superadas\",\n        \"Items Need Review\": \"Elementos a Revisar\"\n      },\n      ru: {\n        \"Accessibility Menu\": \"Меню доступности\",\n        \"Reset settings\": \"Сбросить настройки\",\n        \"Reset All Settings\": \"Сбросить все настройки\",\n        \"Close\": \"Закрыть\",\n        \"Content Adjustments\": \"Настройки контента\",\n        \"Adjust Font Size\": \"Изменить размер шрифта\",\n        \"Highlight Title\": \"Выделить заголовки\",\n        \"Highlight Links\": \"Выделить ссылки\",\n        \"Readable Font\": \"Читаемый шрифт\",\n        \"Color Adjustments\": \"Настройки цвета\",\n        \"Invert Colors\": \"Инвертировать цвета\",\n        \"Light Contrast\": \"Светлый контраст\",\n        \"Dark Contrast\": \"Тёмный контраст\",\n        \"High Contrast\": \"Высокий контраст\",\n        \"High Saturation\": \"Высокая насыщенность\",\n        \"Low Saturation\": \"Низкая насыщенность\",\n        \"Monochrome\": \"Монохромный\",\n        \"Tools\": \"Инструменты\",\n        \"Reading Guide\": \"Линейка для чтения\",\n        \"Stop Animations\": \"Остановить анимации\",\n        \"Big Cursor\": \"Большой курсор\",\n        \"Increase Font Size\": \"Увеличить размер шрифта\",\n        \"Decrease Font Size\": \"Уменьшить размер шрифта\",\n        \"Letter Spacing\": \"Межбуквенный интервал\",\n        \"Line Height\": \"Высота строки\",\n        \"Font Weight\": \"Жирный шрифт\",\n        \"Dyslexia Font\": \"Шрифт для дислексии\",\n        \"Language\": \"Язык\",\n        \"Open Accessibility Menu\": \"Открыть меню доступности\",\n        \"Hide Images\": \"Скрыть изображения\",\n        \"Skip to accessibility menu\": \"Перейти к меню доступности\",\n        \"Accessibility Report\": \"Отчёт о доступности\",\n        \"Run Accessibility Check\": \"Запустить проверку доступности\",\n        \"Loading...\": \"Загрузка...\",\n        \"Analyzing page...\": \"Анализ страницы...\",\n        \"Critical\": \"Критический\",\n        \"Serious\": \"Серьёзный\",\n        \"Moderate\": \"Умеренный\",\n        \"Minor\": \"Незначительный\",\n        \"Violations Found\": \"Найдены нарушения\",\n        \"No Issues Found\": \"Проблем не найдено\",\n        \"Element\": \"Элемент\",\n        \"Issue\": \"Проблема\",\n        \"How to Fix\": \"Как исправить\",\n        \"Close Report\": \"Закрыть отчёт\",\n        \"Passed Tests\": \"Пройденные тесты\",\n        \"Items Need Review\": \"Требуют проверки\"\n      },\n      pl: {\n        \"Accessibility Menu\": \"Menu Dostępności\",\n        \"Reset settings\": \"Zresetuj ustawienia\",\n        \"Reset All Settings\": \"Zresetuj wszystkie ustawienia\",\n        \"Close\": \"Zamknij\",\n        \"Content Adjustments\": \"Dostosowanie Treści\",\n        \"Adjust Font Size\": \"Dostosuj Rozmiar Czcionki\",\n        \"Highlight Title\": \"Podświetl Tytuły\",\n        \"Highlight Links\": \"Podświetl Linki\",\n        \"Readable Font\": \"Czytelna Czcionka\",\n        \"Color Adjustments\": \"Dostosowanie Kolorów\",\n        \"Invert Colors\": \"Odwróć Kolory\",\n        \"Light Contrast\": \"Jasny Kontrast\",\n        \"Dark Contrast\": \"Ciemny Kontrast\",\n        \"High Contrast\": \"Wysoki Kontrast\",\n        \"High Saturation\": \"Wysoka Saturacja\",\n        \"Low Saturation\": \"Niska Saturacja\",\n        \"Monochrome\": \"Monochromatyczny\",\n        \"Tools\": \"Narzędzia\",\n        \"Reading Guide\": \"Linia do Czytania\",\n        \"Stop Animations\": \"Zatrzymaj Animacje\",\n        \"Big Cursor\": \"Duży Kursor\",\n        \"Increase Font Size\": \"Zwiększ Rozmiar Czcionki\",\n        \"Decrease Font Size\": \"Zmniejsz Rozmiar Czcionki\",\n        \"Letter Spacing\": \"Odstępy Między Literami\",\n        \"Line Height\": \"Wysokość Linii\",\n        \"Font Weight\": \"Grubość Czcionki\",\n        \"Dyslexia Font\": \"Czcionka dla Dysleksji\",\n        \"Language\": \"Język\",\n        \"Open Accessibility Menu\": \"Otwórz Menu Dostępności\",\n        \"Hide Images\": \"Ukryj Obrazy\",\n        \"Skip to accessibility menu\": \"Przejdź do menu dostępności\",\n        \"Accessibility Report\": \"Raport Dostępności\",\n        \"Run Accessibility Check\": \"Uruchom Sprawdzanie Dostępności\",\n        \"Loading...\": \"Ładowanie...\",\n        \"Analyzing page...\": \"Analizowanie strony...\",\n        \"Critical\": \"Krytyczny\",\n        \"Serious\": \"Poważny\",\n        \"Moderate\": \"Umiarkowany\",\n        \"Minor\": \"Drobny\",\n        \"Violations Found\": \"Znalezione Naruszenia\",\n        \"No Issues Found\": \"Brak Problemów\",\n        \"Element\": \"Element\",\n        \"Issue\": \"Problem\",\n        \"How to Fix\": \"Jak Naprawić\",\n        \"Close Report\": \"Zamknij Raport\",\n        \"Passed Tests\": \"Zaliczone Testy\",\n        \"Items Need Review\": \"Elementy do Sprawdzenia\"\n      },\n      ro: {\n        \"Accessibility Menu\": \"Meniu Accesibilitate\",\n        \"Reset settings\": \"Resetare setări\",\n        \"Reset All Settings\": \"Resetare toate setările\",\n        \"Close\": \"Închide\",\n        \"Content Adjustments\": \"Ajustări Conținut\",\n        \"Adjust Font Size\": \"Ajustare Dimensiune Font\",\n        \"Highlight Title\": \"Evidențiere Titluri\",\n        \"Highlight Links\": \"Evidențiere Linkuri\",\n        \"Readable Font\": \"Font Lizibil\",\n        \"Color Adjustments\": \"Ajustări Culoare\",\n        \"Invert Colors\": \"Inversare Culori\",\n        \"Light Contrast\": \"Contrast Luminos\",\n        \"Dark Contrast\": \"Contrast Întunecat\",\n        \"High Contrast\": \"Contrast Ridicat\",\n        \"High Saturation\": \"Saturație Ridicată\",\n        \"Low Saturation\": \"Saturație Scăzută\",\n        \"Monochrome\": \"Monocrom\",\n        \"Tools\": \"Instrumente\",\n        \"Reading Guide\": \"Ghid de Citire\",\n        \"Stop Animations\": \"Oprire Animații\",\n        \"Big Cursor\": \"Cursor Mare\",\n        \"Increase Font Size\": \"Mărire Dimensiune Font\",\n        \"Decrease Font Size\": \"Micșorare Dimensiune Font\",\n        \"Letter Spacing\": \"Spațiere Litere\",\n        \"Line Height\": \"Înălțime Linie\",\n        \"Font Weight\": \"Grosime Font\",\n        \"Dyslexia Font\": \"Font pentru Dislexie\",\n        \"Language\": \"Limbă\",\n        \"Open Accessibility Menu\": \"Deschide Meniul Accesibilitate\",\n        \"Hide Images\": \"Ascunde Imagini\",\n        \"Skip to accessibility menu\": \"Salt la meniul de accesibilitate\",\n        \"Accessibility Report\": \"Raport Accesibilitate\",\n        \"Run Accessibility Check\": \"Rulează Verificare Accesibilitate\",\n        \"Loading...\": \"Se încarcă...\",\n        \"Analyzing page...\": \"Se analizează pagina...\",\n        \"Critical\": \"Critic\",\n        \"Serious\": \"Grav\",\n        \"Moderate\": \"Moderat\",\n        \"Minor\": \"Minor\",\n        \"Violations Found\": \"Încălcări Găsite\",\n        \"No Issues Found\": \"Nicio Problemă Găsită\",\n        \"Element\": \"Element\",\n        \"Issue\": \"Problemă\",\n        \"How to Fix\": \"Cum se Remediază\",\n        \"Close Report\": \"Închide Raportul\",\n        \"Passed Tests\": \"Teste Trecute\",\n        \"Items Need Review\": \"Elemente de Verificat\"\n      },\n      nl: {\n        \"Accessibility Menu\": \"Toegankelijkheidsmenu\",\n        \"Reset settings\": \"Instellingen resetten\",\n        \"Reset All Settings\": \"Alle instellingen resetten\",\n        \"Close\": \"Sluiten\",\n        \"Content Adjustments\": \"Inhoudsaanpassingen\",\n        \"Adjust Font Size\": \"Lettergrootte aanpassen\",\n        \"Highlight Title\": \"Titels markeren\",\n        \"Highlight Links\": \"Links markeren\",\n        \"Readable Font\": \"Leesbaar Lettertype\",\n        \"Color Adjustments\": \"Kleuraanpassingen\",\n        \"Invert Colors\": \"Kleuren omkeren\",\n        \"Light Contrast\": \"Licht Contrast\",\n        \"Dark Contrast\": \"Donker Contrast\",\n        \"High Contrast\": \"Hoog Contrast\",\n        \"High Saturation\": \"Hoge Verzadiging\",\n        \"Low Saturation\": \"Lage Verzadiging\",\n        \"Monochrome\": \"Monochroom\",\n        \"Tools\": \"Hulpmiddelen\",\n        \"Reading Guide\": \"Leeshulp\",\n        \"Stop Animations\": \"Animaties stoppen\",\n        \"Big Cursor\": \"Grote Cursor\",\n        \"Increase Font Size\": \"Lettergrootte vergroten\",\n        \"Decrease Font Size\": \"Lettergrootte verkleinen\",\n        \"Letter Spacing\": \"Letterafstand\",\n        \"Line Height\": \"Regelhoogte\",\n        \"Font Weight\": \"Letterdikte\",\n        \"Dyslexia Font\": \"Dyslexie Lettertype\",\n        \"Language\": \"Taal\",\n        \"Open Accessibility Menu\": \"Toegankelijkheidsmenu openen\",\n        \"Hide Images\": \"Afbeeldingen verbergen\",\n        \"Skip to accessibility menu\": \"Ga naar toegankelijkheidsmenu\",\n        \"Accessibility Report\": \"Toegankelijkheidsrapport\",\n        \"Run Accessibility Check\": \"Toegankelijkheidscontrole uitvoeren\",\n        \"Loading...\": \"Laden...\",\n        \"Analyzing page...\": \"Pagina analyseren...\",\n        \"Critical\": \"Kritiek\",\n        \"Serious\": \"Ernstig\",\n        \"Moderate\": \"Matig\",\n        \"Minor\": \"Gering\",\n        \"Violations Found\": \"Overtredingen Gevonden\",\n        \"No Issues Found\": \"Geen Problemen Gevonden\",\n        \"Element\": \"Element\",\n        \"Issue\": \"Probleem\",\n        \"How to Fix\": \"Hoe op te lossen\",\n        \"Close Report\": \"Rapport Sluiten\",\n        \"Passed Tests\": \"Geslaagde Tests\",\n        \"Items Need Review\": \"Items te Controleren\"\n      },\n      uk: {\n        \"Accessibility Menu\": \"Меню доступності\",\n        \"Reset settings\": \"Скинути налаштування\",\n        \"Reset All Settings\": \"Скинути всі налаштування\",\n        \"Close\": \"Закрити\",\n        \"Content Adjustments\": \"Налаштування контенту\",\n        \"Adjust Font Size\": \"Змінити розмір шрифту\",\n        \"Highlight Title\": \"Виділити заголовки\",\n        \"Highlight Links\": \"Виділити посилання\",\n        \"Readable Font\": \"Читабельний шрифт\",\n        \"Color Adjustments\": \"Налаштування кольору\",\n        \"Invert Colors\": \"Інвертувати кольори\",\n        \"Light Contrast\": \"Світлий контраст\",\n        \"Dark Contrast\": \"Темний контраст\",\n        \"High Contrast\": \"Високий контраст\",\n        \"High Saturation\": \"Висока насиченість\",\n        \"Low Saturation\": \"Низька насиченість\",\n        \"Monochrome\": \"Монохромний\",\n        \"Tools\": \"Інструменти\",\n        \"Reading Guide\": \"Лінійка для читання\",\n        \"Stop Animations\": \"Зупинити анімації\",\n        \"Big Cursor\": \"Великий курсор\",\n        \"Increase Font Size\": \"Збільшити розмір шрифту\",\n        \"Decrease Font Size\": \"Зменшити розмір шрифту\",\n        \"Letter Spacing\": \"Міжлітерний інтервал\",\n        \"Line Height\": \"Висота рядка\",\n        \"Font Weight\": \"Жирний шрифт\",\n        \"Dyslexia Font\": \"Шрифт для дислексії\",\n        \"Language\": \"Мова\",\n        \"Open Accessibility Menu\": \"Відкрити меню доступності\",\n        \"Hide Images\": \"Приховати зображення\",\n        \"Skip to accessibility menu\": \"Перейти до меню доступності\",\n        \"Accessibility Report\": \"Звіт про доступність\",\n        \"Run Accessibility Check\": \"Запустити перевірку доступності\",\n        \"Loading...\": \"Завантаження...\",\n        \"Analyzing page...\": \"Аналіз сторінки...\",\n        \"Critical\": \"Критичний\",\n        \"Serious\": \"Серйозний\",\n        \"Moderate\": \"Помірний\",\n        \"Minor\": \"Незначний\",\n        \"Violations Found\": \"Знайдені порушення\",\n        \"No Issues Found\": \"Проблем не знайдено\",\n        \"Element\": \"Елемент\",\n        \"Issue\": \"Проблема\",\n        \"How to Fix\": \"Як виправити\",\n        \"Close Report\": \"Закрити звіт\",\n        \"Passed Tests\": \"Пройдені тести\",\n        \"Items Need Review\": \"Потребують перевірки\"\n      }\n    };\n\nexport const SUPPORTED_LANGUAGES = [\n      { code: \"en\", label: \"English (English)\" },\n      { code: \"it\", label: \"Italiano (Italian)\" },\n      { code: \"fr\", label: \"Français (French)\" },\n      { code: \"de\", label: \"Deutsch (German)\" },\n      { code: \"es\", label: \"Español (Spanish)\" },\n      { code: \"ru\", label: \"Русский (Russian)\" },\n      { code: \"pl\", label: \"Polski (Polish)\" },\n      { code: \"ro\", label: \"Română (Romanian)\" },\n      { code: \"nl\", label: \"Nederlands (Dutch)\" },\n      { code: \"uk\", label: \"Українська (Ukrainian)\" }\n    ];\n","export const stateMethods = {\n\n  storageAvailable() {\n      try {\n        const test = '__test__';\n        localStorage.setItem(test, test);\n        localStorage.removeItem(test);\n        return true;\n      } catch (e) {\n        return false;\n      }\n    },\n\n  fetchCookie(name) {\n      const cookieName = name + \"=\";\n      try {\n        const decodedCookie = decodeURIComponent(document.cookie);\n        return decodedCookie.split(';')\n          .map(c => c.trim())\n          .find(c => c.startsWith(cookieName))\n          ?.substring(cookieName.length) || \"{}\";\n      } catch (e) {\n        console.warn('Error reading cookie:', e);\n        return \"{}\";\n      }\n    },\n\n  storeCookie(name, value, days) {\n      try {\n        const d = new Date();\n        d.setTime(d.getTime() + (days * 24 * 60 * 60 * 1000));\n        const expires = \"expires=\" + d.toUTCString();\n        const isSecure = window.location.protocol === 'https:';\n        document.cookie = name + \"=\" + value + \";\" + expires + \";path=/;SameSite=Strict\" + (isSecure ? \";Secure\" : \"\");\n      } catch (e) {\n        console.warn('Error setting cookie:', e);\n      }\n    },\n\n  getSavedLanguage() {\n      try {\n        // Try localStorage first\n        if (this.storageAvailable()) {\n          const stored = localStorage.getItem(this.cookieKey);\n          if (stored) {\n            const config = JSON.parse(stored);\n            if (config.lang) return config.lang;\n          }\n        }\n        // Fallback to cookie\n        const cookieVal = this.fetchCookie(this.cookieKey);\n        if (cookieVal && cookieVal !== \"\") {\n          const config = JSON.parse(cookieVal);\n          if (config.lang) return config.lang;\n        }\n      } catch (e) {\n        // Ignore parsing errors\n      }\n      return null;\n    },\n\n  getBrowserLanguage() {\n      if (typeof navigator === 'undefined') return 'en';\n  \n      const supportedCodes = this.supportedLanguages.map(lang => lang.code);\n  \n      // Get browser languages (navigator.languages is an array, navigator.language is a string)\n      const browserLanguages = navigator.languages\n        ? [...navigator.languages]\n        : [navigator.language || navigator.userLanguage || 'en'];\n  \n      for (const browserLang of browserLanguages) {\n        // Extract the primary language code (e.g., 'en-US' -> 'en')\n        const primaryCode = browserLang.split('-')[0].toLowerCase();\n  \n        if (supportedCodes.includes(primaryCode)) {\n          return primaryCode;\n        }\n      }\n  \n      // Default to English if no supported language found\n      return 'en';\n    },\n\n  getDefaultLanguage() {\n      // Priority: 1. Saved language, 2. Browser language, 3. English\n      const savedLang = this.getSavedLanguage();\n      if (savedLang) {\n        const supportedCodes = this.supportedLanguages.map(lang => lang.code);\n        if (supportedCodes.includes(savedLang)) {\n          return savedLang;\n        }\n      }\n      return this.getBrowserLanguage();\n    },\n\n  isDevMode() {\n      if (typeof window === 'undefined') return false;\n      try {\n        const urlParams = new URLSearchParams(window.location.search);\n        return urlParams.get('acc-dev') === 'true';\n      } catch (e) {\n        return false;\n      }\n    },\n\n  getDataAttributeOptions() {\n      const options = {};\n      if (typeof document === 'undefined') return options;\n  \n      const attributes = ['lang', 'position', 'offset', 'size'];\n  \n      const assignValue = (key, value) => {\n        if (value === null || typeof value === 'undefined' || value === '') return;\n        switch (key) {\n          case 'lang': {\n            const lang = String(value).trim();\n            if (lang) options.lang = lang;\n            break;\n          }\n          case 'position': {\n            const position = String(value).trim();\n            if (position) options.position = position;\n            break;\n          }\n          case 'offset': {\n            const normalized = this.normalizeOffset(value);\n            if (normalized) options.offset = normalized;\n            break;\n          }\n          case 'size': {\n            const normalizedSize = this.normalizeButtonSize(value);\n            if (normalizedSize) options.size = normalizedSize;\n            break;\n          }\n          default:\n            break;\n        }\n      };\n  \n      const inspectElement = (el) => {\n        if (!el) return;\n        attributes.forEach(key => {\n          const attrName = `data-acc-${key}`;\n          const attrValue = el.getAttribute ? el.getAttribute(attrName) : null;\n          assignValue(key, attrValue);\n        });\n      };\n  \n      const scriptCandidates = [];\n      if (document.currentScript) {\n        scriptCandidates.push(document.currentScript);\n      }\n      document.querySelectorAll('script[data-acc-lang],script[data-acc-position],script[data-acc-offset],script[data-acc-size]').forEach(script => {\n        if (!scriptCandidates.includes(script)) {\n          scriptCandidates.push(script);\n        }\n      });\n      scriptCandidates.forEach(inspectElement);\n  \n      attributes.forEach(key => {\n        if (options[key] !== undefined) return;\n        const el = document.querySelector(`[data-acc-${key}]`);\n        if (el) {\n          assignValue(key, el.getAttribute(`data-acc-${key}`));\n        }\n      });\n  \n      return options;\n    },\n\n  normalizeOffset(value) {\n      if (!value && value !== 0) return undefined;\n      let parts = [];\n      if (Array.isArray(value)) {\n        parts = value;\n      } else if (typeof value === 'string') {\n        parts = value.split(/[, ]+/);\n      } else {\n        parts = [value];\n      }\n      const parsed = parts\n        .map(part => {\n          const number = Number(part);\n          return Number.isFinite(number) ? Math.round(number) : null;\n        })\n        .filter(number => number !== null);\n  \n      if (!parsed.length) return undefined;\n      if (parsed.length === 1) parsed.push(parsed[0]);\n      return [parsed[0], parsed[1] !== undefined ? parsed[1] : parsed[0]];\n    },\n\n  normalizeButtonSize(value) {\n      const fallback = this.widgetTheme?.buttonSize || '34px';\n      if (typeof value === 'number' && Number.isFinite(value)) {\n        return `${Math.max(24, Math.round(value))}px`;\n      }\n      if (typeof value === 'string') {\n        const trimmed = value.trim();\n        if (!trimmed) return fallback;\n        if (/^\\d+(\\.\\d+)?(px|em|rem|%)$/i.test(trimmed)) {\n          return trimmed;\n        }\n        const numeric = Number(trimmed);\n        if (Number.isFinite(numeric)) {\n          return `${Math.max(24, Math.round(numeric))}px`;\n        }\n        return trimmed;\n      }\n      return fallback;\n    },\n\n  toggleDisplay(el, state) {\n      if (!el) return;\n      try {\n        el.style.display = (typeof state === \"undefined\") \n          ? (el.style.display === \"none\" ? \"block\" : \"none\") \n          : (state ? \"block\" : \"none\");\n      } catch (e) {\n        console.warn('Error toggling element:', e);\n      }\n    },\n\n  updateState(payload) {\n      const updatedConfig = { ...this.widgetConfig, states: { ...this.widgetConfig.states, ...payload } };\n      this.saveConfig(updatedConfig);\n      return updatedConfig;\n    },\n\n  saveConfig(newConfig) {\n      this.widgetConfig = { ...this.widgetConfig, ...newConfig };\n      if (this.storageAvailable()) {\n        try {\n          localStorage.setItem(this.cookieKey, JSON.stringify(this.widgetConfig));\n        } catch (e) {\n          this.storeCookie(this.cookieKey, JSON.stringify(this.widgetConfig), 365);\n        }\n      } else {\n        this.storeCookie(this.cookieKey, JSON.stringify(this.widgetConfig), 365);\n      }\n    },\n\n  retrieveState(key) {\n      return this.widgetConfig.states ? this.widgetConfig.states[key] : undefined;\n    },\n\n  loadConfig(cache = true) {\n      if (cache) return this.widgetConfig;\n      const savedConfig = this.fetchSavedConfig();\n      if (savedConfig) {\n        try {\n          this.widgetConfig = JSON.parse(savedConfig);\n        } catch (e) {\n          console.warn('Error parsing config:', e);\n          this.widgetConfig = {};\n        }\n      }\n      return this.widgetConfig;\n    },\n\n  fetchSavedConfig() {\n      if (this.storageAvailable()) {\n        try {\n          const stored = localStorage.getItem(this.cookieKey);\n          if (stored) return stored;\n        } catch (e) {\n          console.warn('localStorage failed, falling back to cookies:', e);\n        }\n      }\n      const cookieVal = this.fetchCookie(this.cookieKey);\n      return cookieVal && cookieVal !== \"\" ? cookieVal : \"{}\";\n    },\n\n  fetchDataAttr(attr) {\n      try {\n        const dataAttr = `data-acc-${attr}`;\n        const element = document.querySelector(`[${dataAttr}]`);\n        return element ? element.getAttribute(dataAttr) : null;\n      } catch (e) {\n        console.warn(`Error getting data attribute: ${attr}`, e);\n        return null;\n      }\n    },\n\n};\n","import menuCSS from './styles/menu.css';\nimport widgetCSS from './styles/widget.css';\nimport reportCSS from './styles/report.css';\nimport readingGuideCSS from './styles/reading-guide.css';\nimport skipLinkCSS from './styles/skip-link.css';\n\nconst STATIC_STYLE_ID = 'acc-static-styles';\nconst STATIC_STYLES = [menuCSS, widgetCSS, reportCSS, readingGuideCSS, skipLinkCSS].join('\\n');\n\nexport const styleMethods = {\n\n  findElement(selector, parent = document) {\n    try {\n      return parent.querySelector(selector);\n    } catch (e) {\n      console.warn(`Failed to query selector: ${selector}`, e);\n      return null;\n    }\n  },\n\n  injectStyle(id, css) {\n    if (!css || typeof document === 'undefined') return;\n    try {\n      let style = document.getElementById(id) || document.createElement('style');\n      style.innerHTML = css;\n      if (!style.id) {\n        style.id = id;\n        document.head.appendChild(style);\n      }\n    } catch (e) {\n      console.warn('Error adding stylesheet:', e);\n    }\n  },\n\n  createCSS(styles) {\n    let css = \"\";\n    if (!styles) return css;\n    const browserPrefixes = ['-o-', '-ms-', '-moz-', '-webkit-', ''];\n    const prefixedProperties = ['filter'];\n    for (let key in styles) {\n      if (!styles.hasOwnProperty(key)) continue;\n      let prefixes = prefixedProperties.includes(key) ? browserPrefixes : [\"\"];\n      prefixes.forEach(prefix => {\n        css += `${prefix}${key}:${styles[key]} !important;`;\n      });\n    }\n    return css;\n  },\n\n  wrapCSS(selector, childrenSelector, css) {\n    let output = \"\";\n    childrenSelector.forEach(child => {\n      output += `${selector} ${child}{${css}}`;\n    });\n    return output;\n  },\n\n  buildCSS(config) {\n    if (!config) return \"\";\n    let output = \"\";\n    output += this.createCSS(config.styles || {});\n    if (output.length && config.selector) {\n      output = this.wrapCSS(config.selector, config.childrenSelector || [\"\"], output);\n    }\n    output += config.css || \"\";\n    return output;\n  },\n\n  applyToolStyle(config) {\n    let { id = \"\", enable = false } = config;\n    let styleId = `acc-${id}`;\n    if (enable) {\n      let css = this.buildCSS(config);\n      this.injectStyle(styleId, css);\n    } else {\n      let style = document.getElementById(styleId);\n      if (style) style.remove();\n    }\n    document.documentElement.classList.toggle(styleId, enable);\n  },\n\n  applyThemeVariables() {\n    if (typeof document === 'undefined') return;\n\n    const vars = {\n      '--acc-primary-color': this.widgetTheme.primaryColor,\n      '--acc-primary-color-light': this.widgetTheme.primaryColorLight,\n      '--acc-primary-color-dark': this.widgetTheme.primaryColorDark,\n      '--acc-bg-color': this.widgetTheme.backgroundColor,\n      '--acc-text-color': this.widgetTheme.textColor,\n      '--acc-text-color-inverted': this.widgetTheme.textColorInverted,\n      '--acc-card-bg': this.widgetTheme.cardBackground,\n      '--acc-border-color': this.widgetTheme.borderColor,\n      '--acc-focus-ring-color': this.widgetTheme.focusRingColor,\n      '--acc-hover-color': this.widgetTheme.hoverColor,\n      '--acc-active-color': this.widgetTheme.activeColor,\n      '--acc-border-radius': this.widgetTheme.borderRadius,\n      '--acc-button-border-radius': this.widgetTheme.buttonBorderRadius,\n      '--acc-header-height': this.widgetTheme.headerHeight,\n      '--acc-focus-outline-width': this.widgetTheme.focusBorderWidth,\n      '--acc-focus-outline-offset': this.widgetTheme.focusOutlineOffset,\n      '--acc-widget-z-index': String(this.widgetTheme.zIndex),\n      '--acc-button-size': this.widgetTheme.buttonSize\n    };\n\n    Object.entries(vars).forEach(([key, value]) => {\n      document.documentElement.style.setProperty(key, value);\n    });\n  },\n\n  registerStaticStyles() {\n    if (this.staticStylesRegistered) return;\n    this.injectStyle(STATIC_STYLE_ID, STATIC_STYLES);\n    this.staticStylesRegistered = true;\n  }\n\n};\n","export const featureMethods = {\n\n  ensureSkipLink() {\n      if (typeof document === 'undefined') return null;\n      if (this.skipLinkElement && document.body.contains(this.skipLinkElement)) {\n        this.updateSkipLinkLabel();\n        return this.skipLinkElement;\n      }\n      const existing = document.getElementById('acc-skip-link');\n      if (existing) {\n        this.skipLinkElement = existing;\n        if (!existing.getAttribute('data-acc-text')) {\n          existing.setAttribute('data-acc-text', 'Skip to accessibility menu');\n        }\n        this.updateSkipLinkLabel();\n        return existing;\n      }\n  \n      const button = document.createElement('button');\n      button.type = 'button';\n      button.id = 'acc-skip-link';\n      button.className = 'acc-skip-link';\n      button.setAttribute('tabindex', '0');\n      button.setAttribute('data-acc-text', 'Skip to accessibility menu');\n      button.setAttribute('aria-label', this.translate('Skip to accessibility menu'));\n      button.textContent = this.translate('Skip to accessibility menu');\n  \n      button.addEventListener('click', (event) => {\n        event.preventDefault();\n        const toggle = this.widgetToggleButton;\n        if (!toggle) return;\n  \n        const currentMenu = this.activeMenuContainer || this.menuContainer;\n        const menuIsVisible = currentMenu && currentMenu.style.display !== 'none';\n  \n        const focusMenu = () => {\n          const targetMenu = this.activeMenuContainer || this.menuContainer;\n          if (!targetMenu) return;\n          const focusables = this.getFocusableElements(targetMenu);\n          if (focusables.length) {\n            focusables[0].focus();\n          }\n        };\n  \n        if (!menuIsVisible) {\n          toggle.click();\n          requestAnimationFrame(focusMenu);\n        } else {\n          focusMenu();\n        }\n      });\n  \n      document.body.insertBefore(button, document.body.firstChild);\n      this.skipLinkElement = button;\n      return button;\n    },\n\n  updateSkipLinkLabel() {\n      if (!this.skipLinkElement) return;\n      const key = this.skipLinkElement.getAttribute('data-acc-text') || 'Skip to accessibility menu';\n      const label = this.translate(key);\n      this.skipLinkElement.textContent = label;\n      this.skipLinkElement.setAttribute('aria-label', label);\n    },\n\n  shouldSkipScaling(element) {\n      return element.closest('.acc-menu, .acc-container, .acc-widget');\n    },\n\n  applyScaleToElement(element, multiplier) {\n      if (\n        !element ||\n        !(element instanceof Element) ||\n        this.shouldSkipScaling(element) ||\n        element.classList.contains('material-icons') ||\n        element.classList.contains('fa')\n      ) {\n        return;\n      }\n      const baseAttr = 'data-acc-baseSize';\n      if (!element.hasAttribute(baseAttr)) {\n        const computedSize = parseFloat(window.getComputedStyle(element).fontSize);\n        if (Number.isNaN(computedSize) || computedSize <= 0) {\n          return;\n        }\n        element.setAttribute(baseAttr, String(computedSize));\n      }\n      const baseSize = parseFloat(element.getAttribute(baseAttr));\n      if (Number.isNaN(baseSize) || baseSize <= 0) {\n        return;\n      }\n      element.style.fontSize = `${baseSize * multiplier}px`;\n    },\n\n  ensureTextScaleObserver() {\n      if (this.textScaleObserver || !document.body) return;\n      this.textScaleObserver = new MutationObserver((mutations) => {\n        if (this.currentTextScaleMultiplier <= 1) {\n          return;\n        }\n        const pending = new Set();\n        mutations.forEach(mutation => {\n          mutation.addedNodes.forEach(node => {\n            if (!(node instanceof Element)) return;\n            if (node.matches && node.matches(this.textScaleSelectors)) {\n              pending.add(node);\n            }\n            node.querySelectorAll?.(this.textScaleSelectors).forEach(el => pending.add(el));\n          });\n        });\n        if (!pending.size) return;\n        pending.forEach(el => this.applyScaleToElement(el, this.currentTextScaleMultiplier));\n      });\n      this.textScaleObserver.observe(document.body, { childList: true, subtree: true });\n    },\n\n  disconnectTextScaleObserver() {\n      if (!this.textScaleObserver) return;\n      this.textScaleObserver.disconnect();\n      this.textScaleObserver = null;\n    },\n\n  scaleText(multiply = 1) {\n      try {\n        this.currentTextScaleMultiplier = multiply;\n        if (multiply > 1) {\n          this.ensureTextScaleObserver();\n          const elements = document.querySelectorAll(this.textScaleSelectors);\n          elements.forEach(el => this.applyScaleToElement(el, multiply));\n        } else {\n          this.disconnectTextScaleObserver();\n          const scaledElements = document.querySelectorAll('[data-acc-baseSize]');\n          scaledElements.forEach(el => {\n            if (this.shouldSkipScaling(el)) return;\n            el.style.fontSize = '';\n            el.removeAttribute('data-acc-baseSize');\n          });\n        }\n      } catch (e) {\n        console.warn('Error scaling text:', e);\n      }\n    },\n\n  enableBoldText(enable = false) {\n      const config = {\n        id: \"bold-text\",\n        selector: \"html\",\n        childrenSelector: ['', '*:not(.material-icons,.acc-menu,.acc-menu *, .acc-widget, .acc-widget *)'],\n        styles: { 'font-weight': '700' }\n      };\n      this.applyToolStyle({ ...config, enable });\n    },\n\n  adjustLetterSpacing(enable = false) {\n      const config = {\n        id: \"letter-spacing\",\n        selector: \"html\",\n        childrenSelector: ['', '*:not(.material-icons,.acc-menu,.acc-menu *, .acc-widget, .acc-widget *)'],\n        styles: { 'letter-spacing': '2px' }\n      };\n      this.applyToolStyle({ ...config, enable });\n    },\n\n  adjustLineSpacing(enable = false) {\n      const config = {\n        id: \"line-spacing\",\n        selector: \"html\",\n        childrenSelector: ['', '*:not(.material-icons,.acc-menu,.acc-menu *, .acc-widget, .acc-widget *)'],\n        styles: { 'line-height': '3' }\n      };\n      this.applyToolStyle({ ...config, enable });\n    },\n\n  enableLargePointer(enable = false) {\n      const config = {\n        id: \"large-pointer\",\n        selector: \"body\",\n        childrenSelector: ['*'],\n        styles: {\n          'cursor': `url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='98px' height='98px' viewBox='0 0 48 48'%3E%3Cpath fill='%23E0E0E0' d='M27.8 39.7c-.1 0-.2 0-.4-.1s-.4-.3-.6-.5l-3.7-8.6-4.5 4.2c-.1.2-.3.3-.6.3-.1 0-.3 0-.4-.1-.3-.1-.6-.5-.6-.9V12c0-.4.2-.8.6-.9.1-.1.3-.1.4-.1.2 0 .5.1.7.3l16 15c.3.3.4.7.3 1.1-.1.4-.5.6-.9.7l-6.3.6 3.9 8.5c.1.2.1.5 0 .8-.1.2-.3.5-.5.6l-2.9 1.3c-.2-.2-.4-.2-.5-.2z'/%3E%3Cpath fill='%23212121' d='m18 12 16 15-7.7.7 4.5 9.8-2.9 1.3-4.3-9.9L18 34V12m0-2c-.3 0-.5.1-.8.2-.7.3-1.2 1-1.2 1.8v22c0 .8.5 1.5 1.2 1.8.3.2.6.2.8.2.5 0 1-.2 1.4-.5l3.4-3.2 3.1 7.3c.2.5.6.9 1.1 1.1.2.1.5.1.7.1.3 0 .5-.1.8-.2l2.9-1.3c.5-.2.9-.6 1.1-1.1.2-.5.2-1.1 0-1.5l-3.3-7.2 4.9-.4c.8-.1 1.5-.6 1.7-1.3.3-.7.1-1.6-.5-2.1l-16-15c-.3-.5-.8-.7-1.3-.7z'/%3E%3C/svg%3E\") 40 15, auto`\n        }\n      };\n      this.applyToolStyle({ ...config, enable });\n    },\n\n  highlightLinks(enable = false) {\n    const config = {\n      id: \"highlight-links\",\n      selector: \"html\",\n      childrenSelector: [\n        \"a[href]:not(.acc-menu a, .acc-widget a)\",\n        \"summary.header__menu-item:not(.acc-menu summary, .acc-widget summary)\",\n        \"summary.link:not(.acc-menu summary, .acc-widget summary)\",\n        \"summary[role='button']:not(.acc-menu summary, .acc-widget summary)\",\n        \"details > summary.list-menu__item:not(.acc-menu summary, .acc-widget summary)\",\n        \".header__menu-item[role='button']:not(.acc-menu *, .acc-widget *)\"\n      ],\n      styles: { 'outline': `3px solid ${this.widgetTheme.primaryColor}`, 'outline-offset': '2px' }\n    };\n    this.applyToolStyle({ ...config, enable });\n  },\n\n  highlightTitles(enable = false) {\n      const config = {\n        id: \"highlight-title\",\n        selector: \"html\",\n        childrenSelector: this.targetSelectors.HEADERS,\n        styles: { 'outline': `3px solid ${this.widgetTheme.primaryColor}`, 'outline-offset': '2px' }\n      };\n      this.applyToolStyle({ ...config, enable });\n    },\n\n  ensureReadableFontLoaded() {\n      if (this.readableFontLoaded) return;\n      const existing = document.getElementById('acc-readable-text-font');\n      if (existing) {\n        this.readableFontLoaded = true;\n        return;\n      }\n      const style = document.createElement('style');\n      style.id = 'acc-readable-text-font';\n      style.textContent = `\n        @font-face {\n          font-family: \"OpenDyslexic3\";\n          src: url(\"https://website-widgets.pages.dev/fonts/OpenDyslexic3-Regular.woff\") format(\"woff\"),\n               url(\"https://website-widgets.pages.dev/fonts/OpenDyslexic3-Regular.ttf\") format(\"truetype\");\n          font-display: swap;\n        }\n      `;\n      document.head.appendChild(style);\n      this.readableFontLoaded = true;\n    },\n\n  enableReadableText(enable = false) {\n      const shouldEnable = !!enable;\n      if (shouldEnable) {\n        this.ensureReadableFontLoaded();\n      }\n      // Exclude widget elements and common icon classes\n      const iconExclusions = [\n        ':not(.acc-widget)',\n        ':not(.acc-menu)',\n        ':not(.acc-container)',\n        ':not(.material-icons)',\n        ':not(.material-icons-outlined)',\n        ':not(.material-icons-round)',\n        ':not(.material-symbols-outlined)',\n        ':not(.material-symbols-rounded)',\n        ':not(.fa)',\n        ':not(.fas)',\n        ':not(.far)',\n        ':not(.fab)',\n        ':not(.fa-solid)',\n        ':not(.fa-regular)',\n        ':not(.fa-brands)',\n        ':not(.glyphicon)',\n        ':not(.icon)',\n        ':not(.icons)',\n        ':not([class*=\"icon-\"])',\n        ':not([data-icon])'\n      ].join('');\n      const exclusionSuffix = iconExclusions;\n      const readableSelectors = [\n        `h1${exclusionSuffix}`,\n        `h2${exclusionSuffix}`,\n        `h3${exclusionSuffix}`,\n        `h4${exclusionSuffix}`,\n        `h5${exclusionSuffix}`,\n        `h6${exclusionSuffix}`,\n        `.wsite-headline${exclusionSuffix}`,\n        `.wsite-content-title${exclusionSuffix}`,\n        `p${exclusionSuffix}`,\n        `a${exclusionSuffix}`,\n        `span${exclusionSuffix}`,\n        `li${exclusionSuffix}`,\n        `ol${exclusionSuffix}`,\n        `dl${exclusionSuffix}`,\n        `dt${exclusionSuffix}`,\n        `th${exclusionSuffix}`,\n        `td${exclusionSuffix}`,\n        `blockquote${exclusionSuffix}`,\n        `label${exclusionSuffix}`,\n        `button:not(.acc-btn)${exclusionSuffix}`,\n        `.acc-text${exclusionSuffix}`\n      ];\n      const config = {\n        id: \"readable-text\",\n        selector: \"body\",\n        childrenSelector: readableSelectors,\n        styles: { \n          'font-family': '\"OpenDyslexic3\", \"Comic Sans MS\", Arial, Helvetica, sans-serif' \n        },\n        css: `.acc-container, .acc-container *, .acc-menu, .acc-menu * {\n          font-family: inherit !important;\n        }`\n      };\n      this.applyToolStyle({ ...config, enable: shouldEnable });\n    },\n\n  pauseMotion(enable = false) {\n    const config = {\n      id: \"pause-motion\",\n      selector: \"html\",\n      childrenSelector: ['*'],\n      styles: { 'transition': 'none', 'animation-fill-mode': 'forwards', 'animation-iteration-count': '1', 'animation-duration': '.01s' }\n    };\n    this.applyToolStyle({ ...config, enable });\n  },\n\n  enableReadingAid(enable = false) {\n    try {\n      let container = this.findElement('.acc-rg-container');\n      const guideHeight = 100; // Height of the clear reading window\n  \n      if (enable) {\n        // Always clean up existing listener first to prevent duplicates\n        if (window.__accweb__scrollGuide) {\n          document.removeEventListener('mousemove', window.__accweb__scrollGuide);\n          delete window.__accweb__scrollGuide;\n        }\n  \n        if (!container) {\n          // Create container but don't make it visible yet\n          container = document.createElement('div');\n          container.setAttribute('class', 'acc-rg-container');\n          container.setAttribute('aria-hidden', 'true');\n          container.innerHTML = this.readingAidTemplate;\n          document.body.prepend(container);\n        }\n  \n        const rgTop = container.querySelector('.acc-rg-top');\n        const rgBottom = container.querySelector('.acc-rg-bottom');\n        \n        // Initially hide the guide completely\n        rgTop.style.display = 'none';\n        rgBottom.style.display = 'none';\n        this.readingAidVisible = false;\n  \n        const updateGuidePosition = this.throttle((event) => {\n          // If first mouse movement after enabling, make the guide visible\n          if (!this.readingAidVisible) {\n            rgTop.style.display = 'block';\n            rgBottom.style.display = 'block';\n            this.readingAidVisible = true;\n          }\n          \n          // Position the guide at the mouse Y coordinate\n          const mouseY = event.clientY;\n          const topHeight = Math.max(0, mouseY - guideHeight / 2);\n          const bottomHeight = Math.max(0, window.innerHeight - (mouseY + guideHeight / 2));\n          rgTop.style.height = `${topHeight}px`;\n          rgBottom.style.height = `${bottomHeight}px`;\n        }, 16);\n  \n        window.__accweb__scrollGuide = updateGuidePosition;\n        document.addEventListener('mousemove', updateGuidePosition, { passive: true });\n      } else {\n        // Reset visibility flag when disabled\n        this.readingAidVisible = false;\n        \n        // Clean up event listener\n        if (window.__accweb__scrollGuide) {\n          document.removeEventListener('mousemove', window.__accweb__scrollGuide);\n          delete window.__accweb__scrollGuide;\n        }\n        \n        // Remove container\n        if (container) {\n          container.remove();\n        }\n      }\n    } catch (e) {\n      console.warn('Error with reading aid:', e);\n    }\n  },\n\n  loadAxeCore() {\n    if (this.axeCoreLoaded && window.axe) {\n      return Promise.resolve(window.axe);\n    }\n  \n    if (this.axeCorePromise) {\n      return this.axeCorePromise;\n    }\n  \n    this.axeCoreLoading = true;\n    this.axeCorePromise = new Promise((resolve, reject) => {\n      let script = document.querySelector('script[data-acc-axe-core=\"true\"]');\n      let settled = false;\n      let timeoutId = null;\n  \n      const settleSuccess = () => {\n        if (settled) return;\n        settled = true;\n        if (timeoutId) clearTimeout(timeoutId);\n        if (!window.axe) {\n          this.axeCoreLoading = false;\n          this.axeCoreLoaded = false;\n          this.axeCorePromise = null;\n          reject(new Error('axe-core loaded but window.axe is unavailable'));\n          return;\n        }\n        this.axeCoreLoading = false;\n        this.axeCoreLoaded = true;\n        if (script) {\n          script.setAttribute('data-acc-axe-core-loaded', 'true');\n        }\n        resolve(window.axe);\n      };\n  \n      const settleError = (error) => {\n        if (settled) return;\n        settled = true;\n        if (timeoutId) clearTimeout(timeoutId);\n        this.axeCoreLoading = false;\n        this.axeCoreLoaded = false;\n        this.axeCorePromise = null;\n        reject(error);\n      };\n  \n      if (window.axe) {\n        settleSuccess();\n        return;\n      }\n  \n      if (!script) {\n        script = document.createElement('script');\n        script.src = 'https://cdn.jsdelivr.net/npm/axe-core@latest/axe.min.js';\n        script.async = true;\n        script.setAttribute('data-acc-axe-core', 'true');\n        document.head.appendChild(script);\n      }\n  \n      script.addEventListener('load', settleSuccess, { once: true });\n      script.addEventListener('error', () => settleError(new Error('Failed to load axe-core')), { once: true });\n      timeoutId = setTimeout(() => {\n        settleError(new Error('Timed out loading axe-core'));\n      }, 15000);\n    });\n  \n    return this.axeCorePromise;\n  },\n\n  async runAccessibilityReport() {\n    // Create or get report panel\n    let panel = this.findElement('.acc-report-panel');\n  \n    if (!panel) {\n      panel = this.createReportPanel();\n      document.body.appendChild(panel);\n    }\n  \n    this.openReportPanel(panel);\n  \n    const contentArea = this.findElement('.acc-report-content', panel);\n    const statusArea = this.findElement('.acc-report-status', panel);\n  \n    // Show loading state\n    statusArea.textContent = this.translate('Loading...');\n    contentArea.innerHTML = `<div class=\"acc-report-loading\">${this.translate('Analyzing page...')}</div>`;\n  \n    try {\n      const axe = await this.loadAxeCore();\n  \n      // Run axe analysis\n      const results = await axe.run(document, {\n        runOnly: ['wcag2a', 'wcag2aa', 'wcag21a', 'wcag21aa', 'best-practice']\n      });\n  \n      this.displayReportResults(panel, results);\n  \n    } catch (error) {\n      contentArea.innerHTML = `<div class=\"acc-report-error\">Error: ${error.message}</div>`;\n      statusArea.textContent = '';\n    }\n  },\n\n  getReportFocusableElements(panel) {\n    if (!panel) return [];\n    const dialog = this.findElement('.acc-report-dialog', panel);\n    return this.getFocusableElements(dialog || panel);\n  },\n\n  openReportPanel(panel) {\n    if (!panel) return;\n  \n    this.reportPreviousFocus = document.activeElement && typeof document.activeElement.focus === 'function'\n      ? document.activeElement\n      : null;\n  \n    panel.classList.add('acc-report-visible');\n    panel.setAttribute('aria-hidden', 'false');\n  \n    const dialog = this.findElement('.acc-report-dialog', panel);\n    const focusTarget = dialog || panel;\n    if (!focusTarget.hasAttribute('tabindex')) {\n      focusTarget.setAttribute('tabindex', '-1');\n    }\n  \n    if (this.reportKeyListener) {\n      document.removeEventListener('keydown', this.reportKeyListener, true);\n    }\n  \n    this.reportKeyListener = (event) => {\n      if (!panel.classList.contains('acc-report-visible')) return;\n  \n      if (event.key === 'Escape' || event.key === 'Esc') {\n        event.preventDefault();\n        this.closeReportPanel();\n        return;\n      }\n  \n      if (event.key !== 'Tab') return;\n  \n      const focusables = this.getReportFocusableElements(panel);\n      if (!focusables.length) {\n        event.preventDefault();\n        focusTarget.focus();\n        return;\n      }\n  \n      const first = focusables[0];\n      const last = focusables[focusables.length - 1];\n      const active = document.activeElement;\n      const outsidePanel = !panel.contains(active);\n  \n      if (event.shiftKey) {\n        if (active === first || outsidePanel) {\n          event.preventDefault();\n          last.focus();\n        }\n        return;\n      }\n  \n      if (active === last || outsidePanel) {\n        event.preventDefault();\n        first.focus();\n      }\n    };\n  \n    document.addEventListener('keydown', this.reportKeyListener, true);\n  \n    requestAnimationFrame(() => {\n      const focusables = this.getReportFocusableElements(panel);\n      if (focusables.length) {\n        focusables[0].focus();\n        return;\n      }\n      focusTarget.focus();\n    });\n  },\n\n  createReportPanel() {\n    const panel = document.createElement('div');\n    panel.className = 'acc-report-panel acc-container';\n    panel.setAttribute('role', 'dialog');\n    panel.setAttribute('aria-modal', 'true');\n    panel.setAttribute('aria-hidden', 'true');\n    panel.setAttribute('aria-labelledby', 'acc-report-title');\n  \n    panel.innerHTML = `\n      <div class=\"acc-report-overlay\"></div>\n      <div class=\"acc-report-dialog\">\n        <div class=\"acc-report-header\">\n          <h2 id=\"acc-report-title\" class=\"acc-report-title\">${this.translate('Accessibility Report')}</h2>\n          <button type=\"button\" class=\"acc-report-close\" aria-label=\"${this.translate('Close')}\">${this.widgetIcons.close}</button>\n        </div>\n        <div class=\"acc-report-status\"></div>\n        <div class=\"acc-report-content\"></div>\n        <div class=\"acc-report-footer\">\n          <span class=\"acc-report-powered\">Powered by axe-core</span>\n        </div>\n      </div>\n    `;\n  \n    // Close handlers\n    const closeBtn = panel.querySelector('.acc-report-close');\n    const overlay = panel.querySelector('.acc-report-overlay');\n  \n    closeBtn.addEventListener('click', () => this.closeReportPanel());\n    overlay.addEventListener('click', () => this.closeReportPanel());\n  \n    return panel;\n  },\n\n  displayReportResults(panel, results) {\n    const contentArea = this.findElement('.acc-report-content', panel);\n    const statusArea = this.findElement('.acc-report-status', panel);\n  \n    const violations = results.violations || [];\n    const passes = results.passes || [];\n    const incomplete = results.incomplete || [];\n  \n    // Count by severity\n    const counts = { critical: 0, serious: 0, moderate: 0, minor: 0 };\n    violations.forEach(v => {\n      if (counts[v.impact] !== undefined) {\n        counts[v.impact] += v.nodes.length;\n      }\n    });\n  \n    const totalViolations = Object.values(counts).reduce((a, b) => a + b, 0);\n  \n    statusArea.textContent = totalViolations > 0\n      ? `${totalViolations} ${this.translate('Violations Found')}`\n      : this.translate('No Issues Found');\n  \n    let html = `\n      <div class=\"acc-report-summary\">\n        <div class=\"acc-report-stat critical\">\n          <span class=\"acc-report-stat-value\">${counts.critical}</span>\n          <span class=\"acc-report-stat-label\">${this.translate('Critical')}</span>\n        </div>\n        <div class=\"acc-report-stat serious\">\n          <span class=\"acc-report-stat-value\">${counts.serious}</span>\n          <span class=\"acc-report-stat-label\">${this.translate('Serious')}</span>\n        </div>\n        <div class=\"acc-report-stat moderate\">\n          <span class=\"acc-report-stat-value\">${counts.moderate}</span>\n          <span class=\"acc-report-stat-label\">${this.translate('Moderate')}</span>\n        </div>\n        <div class=\"acc-report-stat minor\">\n          <span class=\"acc-report-stat-value\">${counts.minor}</span>\n          <span class=\"acc-report-stat-label\">${this.translate('Minor')}</span>\n        </div>\n        <div class=\"acc-report-stat passed\">\n          <span class=\"acc-report-stat-value\">${passes.length}</span>\n          <span class=\"acc-report-stat-label\">${this.translate('Passed Tests')}</span>\n        </div>\n      </div>\n    `;\n  \n    if (violations.length === 0) {\n      html += `\n        <div class=\"acc-report-success\">\n          <div class=\"acc-report-success-icon\">\n            <svg viewBox=\"0 0 24 24\"><path d=\"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z\"/></svg>\n          </div>\n          <h3>${this.translate('No Issues Found')}</h3>\n        </div>\n      `;\n    } else {\n      html += `<div class=\"acc-report-section\">\n        <div class=\"acc-report-section-title\">${this.translate('Violations Found')} (${violations.length})</div>\n      `;\n  \n      // Sort by severity\n      const severityOrder = { critical: 0, serious: 1, moderate: 2, minor: 3 };\n      violations.sort((a, b) => (severityOrder[a.impact] || 4) - (severityOrder[b.impact] || 4));\n  \n      violations.forEach((violation, index) => {\n        html += `\n          <div class=\"acc-report-violation\" data-index=\"${index}\">\n            <div class=\"acc-report-violation-header\">\n              <span class=\"acc-report-violation-impact ${violation.impact}\">${this.translate(this.capitalizeFirst(violation.impact))}</span>\n              <span class=\"acc-report-violation-title\">${this.escapeHtml(violation.help)}</span>\n              <span class=\"acc-report-violation-count\">${violation.nodes.length} ${this.translate('Element')}${violation.nodes.length > 1 ? 's' : ''}</span>\n            </div>\n            <div class=\"acc-report-violation-details\">\n              <p class=\"acc-report-violation-desc\">${this.escapeHtml(violation.description)}</p>\n              <p class=\"acc-report-violation-help\">\n                <a href=\"${violation.helpUrl}\" target=\"_blank\" rel=\"noopener\">${this.translate('How to Fix')} →</a>\n              </p>\n              ${violation.nodes.slice(0, 5).map(node => `\n                <div class=\"acc-report-node\">\n                  <div class=\"acc-report-node-html\">${this.escapeHtml(node.html)}</div>\n                  ${node.failureSummary ? `<div class=\"acc-report-node-fix\"><strong>${this.translate('Issue')}:</strong> ${this.escapeHtml(node.failureSummary)}</div>` : ''}\n                </div>\n              `).join('')}\n              ${violation.nodes.length > 5 ? `<p style=\"color:#666;font-size:13px;margin-top:12px;\">... and ${violation.nodes.length - 5} more elements</p>` : ''}\n            </div>\n          </div>\n        `;\n      });\n  \n      html += `</div>`;\n    }\n  \n    if (incomplete.length > 0) {\n      html += `\n        <div class=\"acc-report-section\">\n          <div class=\"acc-report-section-title\">${this.translate('Items Need Review')} (${incomplete.length})</div>\n          <p style=\"color:#666;font-size:14px;\">These items require manual verification.</p>\n        </div>\n      `;\n    }\n  \n    contentArea.innerHTML = html;\n  \n    // Add click handlers for expandable violations\n    contentArea.querySelectorAll('.acc-report-violation-header').forEach(header => {\n      header.addEventListener('click', () => {\n        header.parentElement.classList.toggle('expanded');\n      });\n    });\n  },\n\n  capitalizeFirst(str) {\n    if (!str) return '';\n    return str.charAt(0).toUpperCase() + str.slice(1);\n  },\n\n  escapeHtml(str) {\n    if (!str) return '';\n    const div = document.createElement('div');\n    div.textContent = str;\n    return div.innerHTML;\n  },\n\n  closeReportPanel() {\n    const panel = this.findElement('.acc-report-panel');\n    if (panel) {\n      panel.classList.remove('acc-report-visible');\n      panel.setAttribute('aria-hidden', 'true');\n    }\n  \n    if (this.reportKeyListener) {\n      document.removeEventListener('keydown', this.reportKeyListener, true);\n      this.reportKeyListener = null;\n    }\n  \n    const focusTarget = this.reportPreviousFocus;\n    this.reportPreviousFocus = null;\n    if (focusTarget && typeof focusTarget.focus === 'function') {\n      focusTarget.focus();\n    }\n  },\n\n  concealImages(enable = false) {\n    const styleId = `acc-hide-images`;\n    const existingStyle = document.getElementById(styleId);\n    if (existingStyle) existingStyle.remove();\n    document.documentElement.classList.toggle(styleId, enable);\n    if (enable) {\n      const css = `\n        body > *:not(.acc-container) img,\n        body > *:not(.acc-container) picture,\n        body > *:not(.acc-container) svg:not(.acc-container svg),\n        body > *:not(.acc-container) video,\n        body > *:not(.acc-container) iframe,\n        body > *:not(.acc-container) canvas,\n        body > *:not(.acc-container) .video,\n        body > *:not(.acc-container) .image {\n          display: none !important;\n        }\n      `;\n      this.injectStyle(styleId, css);\n    }\n  },\n\n  applyEnhancements() {\n      const { states } = this.loadConfig();\n      // Handle font size scaling\n      if (states && states['text-scale']) {\n        const scaleValue = states['text-scale'];\n        const scaleIndex = this.textScaleValues.indexOf(scaleValue);\n        if (scaleIndex > -1) {\n          this.textScaleIndex = scaleIndex;\n          this.multiLevelFeatures['text-scale'].currentIndex = scaleIndex;\n          this.scaleText(scaleValue);\n        }\n      } else {\n        this.textScaleIndex = 0;\n        if (this.multiLevelFeatures['text-scale']) {\n          this.multiLevelFeatures['text-scale'].currentIndex = -1;\n        }\n      }\n      // Apply other enhancements\n      this.concealImages(states && states['hide-images']);\n      this.highlightTitles(states && states['highlight-title']);\n      this.highlightLinks(states && states['highlight-links']);\n      this.adjustLetterSpacing(states && states['letter-spacing']);\n      this.adjustLineSpacing(states && states['line-spacing']);\n      this.enableBoldText(states && states['bold-text']);\n      this.enableReadableText(states && states['readable-text']);\n      this.enableReadingAid(states && states['reading-aid']);\n      this.pauseMotion(states && states['pause-motion']);\n      this.enableLargePointer(states && states['large-pointer']);\n    },\n\n  isColorFilterKey(key) {\n      return Array.isArray(this.colorFilterKeys) && this.colorFilterKeys.includes(key);\n    },\n\n  getActiveColorFilterKey(states = this.widgetConfig.states) {\n      if (!this.colorFilterKeys || !this.colorFilterKeys.length) return null;\n      if (!states) return this.activeColorFilterKey || null;\n      for (const key of this.colorFilterKeys) {\n        if (states[key]) {\n          return key;\n        }\n      }\n      return null;\n    },\n\n  setColorFilterUI(menu, activeKey = null) {\n      if (!menu || !menu.querySelectorAll) return;\n      this.colorFilterKeys.forEach(filterKey => {\n        const button = menu.querySelector(`.acc-btn[data-key=\"${filterKey}\"]`);\n        if (!button) return;\n        const isActive = filterKey === activeKey;\n        button.classList.toggle('acc-selected', isActive);\n        button.setAttribute('aria-pressed', isActive ? 'true' : 'false');\n      });\n    },\n\n  updateColorFilterState(activeKey = null) {\n      if (!this.colorFilterKeys || !this.colorFilterKeys.length) {\n        this.activeColorFilterKey = null;\n        return;\n      }\n      const states = this.widgetConfig.states || {};\n      const payload = {};\n      let requiresUpdate = false;\n      this.colorFilterKeys.forEach(filterKey => {\n        const rawCurrent = states[filterKey];\n        const shouldBeActive = activeKey === filterKey;\n        if (shouldBeActive) {\n          if (rawCurrent !== true) {\n            payload[filterKey] = true;\n            requiresUpdate = true;\n          }\n        } else if (rawCurrent) {\n          payload[filterKey] = false;\n          requiresUpdate = true;\n        }\n      });\n      if (requiresUpdate) {\n        this.updateState(payload);\n      }\n      this.activeColorFilterKey = activeKey;\n    },\n\n  applyVisualFilters() {\n      const { states } = this.loadConfig();\n      const activeKey = this.getActiveColorFilterKey(states);\n      this.activeColorFilterKey = activeKey;\n  \n      if (!activeKey) {\n        const style = document.getElementById('acc-filter-style');\n        if (style) style.remove();\n        return;\n      }\n      const filter = this.visualFilters[activeKey];\n      if (!filter) {\n        const style = document.getElementById('acc-filter-style');\n        if (style) style.remove();\n        return;\n      }\n      const adjustedFilter = {\n        ...filter,\n        selector: filter.selector || 'body > *:not(.acc-container)'\n      };\n      const css = this.buildCSS(adjustedFilter);\n      this.injectStyle('acc-filter-style', css);\n    },\n\n  cycleTextScale(enable = false) {\n      if (enable) {\n        this.textScaleIndex = (this.textScaleIndex + 1) % this.textScaleValues.length;\n        if (this.multiLevelFeatures['text-scale']) {\n          this.multiLevelFeatures['text-scale'].currentIndex = this.textScaleIndex;\n        }\n      } else {\n        this.textScaleIndex = 0;\n        if (this.multiLevelFeatures['text-scale']) {\n          this.multiLevelFeatures['text-scale'].currentIndex = -1;\n        }\n      }\n      const progressIndicator = document.querySelector(`.acc-progress-indicator[data-feature=\"text-scale\"]`);\n      if (progressIndicator) {\n        const dots = progressIndicator.querySelectorAll('.acc-progress-dot');\n        dots.forEach(dot => dot.classList.remove('active'));\n        if (enable && this.textScaleIndex < dots.length) {\n          dots[this.textScaleIndex].classList.add('active');\n        }\n      }\n      const multiply = enable ? this.textScaleValues[this.textScaleIndex] : 1;\n      this.scaleText(multiply);\n      this.updateState({ 'text-scale': multiply > 1 ? multiply : false });\n      return this.textScaleIndex;\n    },\n\n  cycleMultiLevelFeature(featureKey, button) {\n      // Only text-scale remains as a multi-level feature.\n      const feature = this.multiLevelFeatures[featureKey];\n      const newIndex = feature.currentIndex + 1;\n      if (newIndex >= feature.levels) {\n        feature.currentIndex = -1;\n        button.classList.remove('acc-selected');\n        button.setAttribute('aria-pressed', 'false');\n        this.updateState({ [featureKey]: false });\n        if (featureKey === 'text-scale') {\n          this.textScaleIndex = 0;\n        }\n      } else {\n        feature.currentIndex = newIndex;\n        button.classList.add('acc-selected');\n        button.setAttribute('aria-pressed', 'true');\n        const newValue = feature.values[newIndex];\n        this.updateState({ [featureKey]: newValue });\n        if (featureKey === 'text-scale') {\n          this.textScaleIndex = newIndex;\n        }\n      }\n      const indicator = button.querySelector(`.acc-progress-indicator[data-feature=\"${featureKey}\"]`);\n      if (indicator) {\n        const dots = indicator.querySelectorAll('.acc-progress-dot');\n        dots.forEach((dot, i) => {\n          dot.classList.toggle('active', i === feature.currentIndex);\n        });\n      }\n      if (featureKey === 'text-scale') {\n        const multiply = feature.currentIndex >= 0 ? feature.values[feature.currentIndex] : 1;\n        this.scaleText(multiply);\n      } else {\n        this.applyVisualFilters();\n      }\n    },\n\n  resetEnhancements() {\n      this.saveConfig({ states: {} });\n      this.textScaleIndex = 0;\n      this.activeColorFilterKey = null;\n      Object.keys(this.multiLevelFeatures).forEach(key => {\n        this.multiLevelFeatures[key].currentIndex = -1;\n      });\n      const selected = document.querySelectorAll(\".acc-selected\");\n      selected.forEach(el => {\n        el.classList.remove(\"acc-selected\");\n        el.setAttribute('aria-pressed', 'false');\n      });\n      const indicators = document.querySelectorAll('.acc-progress-indicator');\n      indicators.forEach(indicator => {\n        const dots = indicator.querySelectorAll('.acc-progress-dot');\n        dots.forEach(dot => dot.classList.remove('active'));\n      });\n      \n      // Remove focus from active element to fix the persistent focus ring bug\n      if (document.activeElement) {\n        document.activeElement.blur();\n      }\n      const styleIds = [\n        'acc-bold-text',\n        'acc-letter-spacing',\n        'acc-line-spacing',\n        'acc-large-pointer',\n        'acc-highlight-links',\n        'acc-highlight-title',\n        'acc-readable-text',\n        'acc-pause-motion',\n        'acc-hide-images',\n        'acc-filter-style'\n      ];\n      styleIds.forEach(id => {\n        const style = document.getElementById(id);\n        if (style) style.remove();\n      });\n      document.documentElement.classList.remove(\n        'acc-filter',\n        'acc-saturation',\n        'acc-bold-text',\n        'acc-letter-spacing',\n        'acc-line-spacing',\n        'acc-large-pointer',\n        'acc-highlight-links',\n        'acc-highlight-title',\n        'acc-readable-text',\n        'acc-pause-motion',\n        'acc-hide-images'\n      );\n      this.disconnectTextScaleObserver();\n      this.currentTextScaleMultiplier = 1;\n      const scaledElements = document.querySelectorAll('[data-acc-baseSize]');\n      scaledElements.forEach(el => {\n        if (!(el instanceof Element) || this.shouldSkipScaling(el)) return;\n        el.style.fontSize = '';\n        el.removeAttribute('data-acc-baseSize');\n      });\n      let guide = this.findElement('.acc-rg-container');\n      if (guide) {\n        guide.remove();\n        if (window.__accweb__scrollGuide) {\n          document.removeEventListener('mousemove', window.__accweb__scrollGuide);\n          delete window.__accweb__scrollGuide;\n        }\n      }\n    },\n\n};\n","export const uiMethods = {\n\n  translate(label) {\n      const { lang } = this.loadConfig();\n      const dictionary = this.translations[lang] || this.translations[\"en\"];\n      return dictionary[label] || label;\n    },\n\n  throttle(func, limit) {\n      let inThrottle;\n      return function (...args) {\n        if (!inThrottle) {\n          func.apply(this, args);\n          inThrottle = true;\n          setTimeout(() => (inThrottle = false), limit);\n        }\n      };\n    },\n\n  getFocusableElements(root) {\n      if (!root) return [];\n      const selectors = [\n        'a[href]',\n        'button:not([disabled])',\n        'input:not([disabled])',\n        'textarea:not([disabled])',\n        'select:not([disabled])',\n        '[tabindex]:not([tabindex=\"-1\"])'\n      ].join(',');\n      const hasDocument = typeof document !== 'undefined';\n      const activeElement = hasDocument ? document.activeElement : null;\n      return Array.from(root.querySelectorAll(selectors)).filter(el => {\n        if (el.hasAttribute('disabled')) return false;\n        if (el.getAttribute('aria-hidden') === 'true') return false;\n        if (el.closest('[aria-hidden=\"true\"]')) return false;\n        const rect = el.getBoundingClientRect();\n        const style = typeof window !== 'undefined' && window.getComputedStyle ? window.getComputedStyle(el) : { visibility: 'visible', display: 'block' };\n        const hasSize = rect.width > 0 || rect.height > 0;\n        const isVisible = (hasSize || (hasDocument && el === activeElement)) && style.visibility !== 'hidden' && style.display !== 'none';\n        return isVisible;\n      });\n    },\n\n  openMenu(menuContainer, toggleBtn) {\n      if (!menuContainer) return;\n      const menu = this.findElement('.acc-menu', menuContainer);\n      this.activeMenuContainer = menuContainer;\n      this.activeMenuToggle = toggleBtn || this.activeMenuToggle;\n      this.previousFocus = document.activeElement && typeof document.activeElement.focus === 'function'\n        ? document.activeElement\n        : null;\n  \n      menuContainer.style.display = 'block';\n      if (menu) {\n        menu.setAttribute('aria-hidden', 'false');\n        menu.setAttribute('aria-modal', 'true');\n        if (!menu.hasAttribute('tabindex')) {\n          menu.setAttribute('tabindex', '-1');\n        }\n      }\n  \n      if (this.activeMenuToggle) {\n        this.activeMenuToggle.setAttribute('aria-expanded', 'true');\n      }\n  \n      const focusable = this.getFocusableElements(menuContainer);\n      if (focusable.length) {\n        focusable[0].focus();\n      } else if (menu) {\n        menu.focus();\n      }\n  \n      if (this.menuKeyListener) {\n        document.removeEventListener('keydown', this.menuKeyListener, true);\n      }\n  \n      this.menuKeyListener = (event) => {\n        if (!this.activeMenuContainer) return;\n        if (event.key === 'Escape' || event.key === 'Esc') {\n          event.preventDefault();\n          this.closeMenu(this.activeMenuContainer);\n          return;\n        }\n        if (event.key === 'Tab') {\n          const focusables = this.getFocusableElements(this.activeMenuContainer);\n          if (!focusables.length) {\n            event.preventDefault();\n            return;\n          }\n          const first = focusables[0];\n          const last = focusables[focusables.length - 1];\n          if (event.shiftKey) {\n            if (document.activeElement === first) {\n              event.preventDefault();\n              last.focus();\n            }\n          } else if (document.activeElement === last) {\n            event.preventDefault();\n            first.focus();\n          }\n        }\n      };\n  \n      document.addEventListener('keydown', this.menuKeyListener, true);\n    },\n\n  closeMenu(menuContainer, toggleBtn) {\n      const targetContainer = menuContainer || this.activeMenuContainer;\n      if (!targetContainer) return;\n      const menu = this.findElement('.acc-menu', targetContainer);\n      targetContainer.style.display = 'none';\n      if (menu) {\n        menu.setAttribute('aria-hidden', 'true');\n        menu.setAttribute('aria-modal', 'false');\n      }\n  \n      const langPanel = this.findElement('#acc-lang-panel', targetContainer);\n      if (langPanel) {\n        langPanel.classList.remove('open');\n        if (langPanel.__accwebTrapFocus) {\n          document.removeEventListener('keydown', langPanel.__accwebTrapFocus);\n          delete langPanel.__accwebTrapFocus;\n        }\n      }\n      const langToggle = this.findElement('.acc-lang-toggle', targetContainer);\n      if (langToggle) {\n        langToggle.setAttribute('aria-expanded', 'false');\n      }\n      const backButton = this.findElement('.acc-back-btn', targetContainer);\n      if (backButton) {\n        backButton.classList.remove('visible');\n      }\n      const defaultTitle = this.findElement('.acc-menu-title-default', targetContainer);\n      if (defaultTitle) {\n        defaultTitle.classList.remove('hidden');\n      }\n      const langTitle = this.findElement('.acc-menu-title-dynamic', targetContainer);\n      if (langTitle) {\n        langTitle.classList.remove('visible');\n      }\n  \n      if (this.menuKeyListener) {\n        document.removeEventListener('keydown', this.menuKeyListener, true);\n        this.menuKeyListener = null;\n      }\n  \n      const toggle = toggleBtn || this.activeMenuToggle;\n      if (toggle) {\n        toggle.setAttribute('aria-expanded', 'false');\n      }\n  \n      const focusTarget = toggle || this.previousFocus;\n      if (focusTarget && typeof focusTarget.focus === 'function') {\n        focusTarget.focus();\n      }\n  \n      this.activeMenuContainer = null;\n      this.activeMenuToggle = null;\n      this.previousFocus = null;\n    },\n\n  renderOptions(options, optionClass) {\n      let html = '';\n      for (let i = 0; i < options.length; i++) {\n        const opt = options[i];\n        const isMultiLevel = opt.multiLevel === true;\n        let progressIndicator = '';\n        if (isMultiLevel) {\n          const featureData = this.multiLevelFeatures[opt.key];\n          if (featureData) {\n            progressIndicator = `<div class=\"acc-progress-indicator\" data-feature=\"${opt.key}\">`;\n            for (let j = 0; j < featureData.levels; j++) {\n              const isActive = featureData.currentIndex === j;\n              progressIndicator += `<div class=\"acc-progress-dot${isActive ? ' active' : ''}\" data-level=\"${j}\"> </div>`;\n            }\n            progressIndicator += ` </div>`;\n          }\n        }\n        html += `<button \n          class=\"acc-btn ${optionClass || ''} ${this.multiLevelFeatures[opt.key]?.currentIndex >= 0 ? 'acc-selected' : ''}\" \n          type=\"button\" \n          data-key=\"${opt.key}\" \n          data-multi-level=\"${isMultiLevel}\"\n          title=\"${opt.label}\"\n          aria-label=\"${opt.label}\"\n          aria-pressed=\"${this.multiLevelFeatures[opt.key]?.currentIndex >= 0 || false}\"\n          aria-controls=\"acc-menu-content\">\n            ${opt.icon}\n            <span class=\"acc-label\">${opt.label}</span>\n            ${progressIndicator}\n          </button>`;\n      }\n      return html;\n    },\n\n  getTranslatedText(el, defaultValue) {\n      let text = el.getAttribute(\"data-acc-text\");\n      if (!text && defaultValue) {\n        text = defaultValue;\n        el.setAttribute(\"data-acc-text\", text);\n      }\n      return this.translate(text);\n    },\n\n  translateMenuUI(menu) {\n      menu.querySelectorAll(\".acc-section-title, .acc-label\").forEach(el => {\n        el.innerText = this.getTranslatedText(el, el.innerText.trim());\n      });\n      menu.querySelectorAll(\"[title]\").forEach(el => {\n        el.setAttribute(\"title\", this.getTranslatedText(el, el.getAttribute(\"title\")));\n      });\n      menu.querySelectorAll(\"[aria-label]\").forEach(el => {\n        el.setAttribute(\"aria-label\", this.getTranslatedText(el, el.getAttribute(\"aria-label\")));\n      });\n      this.updateSkipLinkLabel();\n    },\n\n  displayMenu({ container, lang }) {\n      try {\n        this.applyThemeVariables();\n        this.registerStaticStyles();\n\n        const menuTemplate = `\n        <div class=\"acc-menu\" role=\"dialog\" aria-labelledby=\"accessibility-title\">\n          <div class=\"acc-menu-header\">\n            <div class=\"acc-header-back\">\n              <button type=\"button\" class=\"acc-back-btn\" aria-label=\"Back to accessibility menu\">\n                ${this.widgetIcons.arrowBack}\n                <span>Back</span>\n              </button>\n            </div>\n            <div id=\"accessibility-title\" class=\"acc-menu-title acc-menu-title-default acc-label\">Accessibility Menu</div>\n            <div id=\"language-settings-title\" class=\"acc-menu-title acc-menu-title-dynamic acc-label\">Language Settings</div>\n            <div class=\"acc-header-actions\">\n              <button type=\"button\" class=\"acc-lang-toggle\" aria-expanded=\"false\" aria-label=\"Language settings\" title=\"Language settings\">\n                ${this.widgetIcons.language}\n              </button>\n              <div role=\"button\" class=\"acc-menu-close\" title=\"Close\" aria-label=\"Close accessibility menu\" tabindex=\"0\">\n                ${this.widgetIcons.close}\n              </div>\n            </div>\n          </div>\n          <div id=\"acc-lang-panel\" class=\"acc-lang-panel\">\n            <div class=\"acc-lang-current-container\">\n              <div class=\"acc-lang-current\">\n                <span id=\"acc-current-language\">${this.supportedLanguages.find(l => l.code === (lang || \"en\"))?.label || \"English (English)\"}</span>\n                <span class=\"acc-icon-check\"></span>\n              </div>\n            </div>\n            <div>\n              <div class=\"acc-section-title\">All Languages</div>\n              <div class=\"acc-lang-search-wrapper\">\n                <input type=\"text\" id=\"acc-lang-search\" class=\"acc-lang-search\" placeholder=\"Search language\" aria-label=\"Search language\">\n              </div>\n              <div class=\"acc-lang-list\">\n                ${this.supportedLanguages.map(l => \n                  `<button type=\"button\" class=\"acc-lang-item${l.code === (lang || \"en\") ? ' selected' : ''}\" data-lang=\"${l.code}\">${l.label}</button>`\n                ).join('')}\n              </div>\n            </div>\n            </div>\n          <div id=\"acc-menu-content\" class=\"acc-menu-content\">\n            <div class=\"acc-section\">\n              <div class=\"acc-section-title\">Content Adjustments</div>\n              <div class=\"acc-options content\"> </div>\n            </div>\n            <div class=\"acc-section\">\n              <div class=\"acc-section-title\">Color Adjustments</div>\n              <div class=\"acc-options filters\"> </div>\n            </div>\n            <div class=\"acc-section\">\n              <div class=\"acc-section-title\">Tools</div>\n              <div class=\"acc-options tools\"> </div>\n            </div>\n            <div class=\"acc-reset-container\">\n              <button class=\"acc-reset-btn\" title=\"Reset All Settings\" aria-label=\"Reset all accessibility settings\" tabindex=\"0\">\n                ${this.widgetIcons.reset}\n                <span>Reset All Settings</span>\n              </button>\n            </div>\n          </div>\n          <div class=\"acc-footer\">\n            <a href=\"https://github.com/ifrederico/accessible-web-widget\" target=\"_blank\" rel=\"noopener noreferrer\">AccessibleWeb Widget</a>\n          </div>\n        </div>\n        <div class=\"acc-overlay\"> </div>\n        `;\n        const menuContainer = document.createElement(\"div\");\n        menuContainer.innerHTML = menuTemplate;\n        menuContainer.style.display = 'none';\n        const menu = this.findElement(\".acc-menu\", menuContainer);\n        if (menu) {\n          menu.setAttribute('aria-hidden', 'true');\n          if (!menu.hasAttribute('tabindex')) {\n            menu.setAttribute('tabindex', '-1');\n          }\n        }\n        if (this.widgetTheme.menuPosition === 'right') {\n          menu.style.right = '0px';\n          menu.style.left = 'auto';\n        } else {\n          menu.style.left = '0px';\n          menu.style.right = 'auto';\n        }\n  \n        menu.querySelector(\".content\").innerHTML = this.renderOptions(this.contentOptions);\n        menu.querySelector(\".tools\").innerHTML = this.renderOptions(this.accessTools, 'acc-tools');\n        menu.querySelector(\".filters\").innerHTML = this.renderOptions(this.colorOptions, 'acc-filter');\n        const langToggle = this.findElement(\".acc-lang-toggle\", menu);\n        const langPanel = this.findElement(\"#acc-lang-panel\", menu);\n        const langSearch = this.findElement(\"#acc-lang-search\", menu);\n        const langItems = menu.querySelectorAll(\".acc-lang-item\");\n        const backButton = this.findElement(\".acc-back-btn\", menu);\n        const defaultTitle = this.findElement(\".acc-menu-title-default\", menu);\n        const langTitle = this.findElement(\".acc-menu-title-dynamic\", menu);\n  \n  \n        // Focus trapping for language panel\n        const trapFocus = (e) => {\n          if (!langPanel.classList.contains('open')) return;\n          \n          const focusableElements = this.getFocusableElements(langPanel);\n          if (backButton.classList.contains('visible') && !focusableElements.includes(backButton)) {\n            focusableElements.unshift(backButton);\n          }\n          if (!focusableElements.length) return;\n          const firstElement = focusableElements[0];\n          const lastElement = focusableElements[focusableElements.length - 1];\n  \n          if (e.key === 'Tab') {\n            if (e.shiftKey) {\n              if (document.activeElement === firstElement) {\n                e.preventDefault();\n                lastElement.focus();\n              }\n            } else {\n              if (document.activeElement === lastElement) {\n                e.preventDefault();\n                firstElement.focus();\n              }\n            }\n          }\n          \n          if (e.key === 'Escape' || e.key === 'Esc') {\n            e.preventDefault();\n            e.stopPropagation();\n            closeLanguagePanel();\n          }\n        };\n  \n        const closeLanguagePanel = (returnFocus = true) => {\n          langPanel.classList.remove('open');\n          langToggle.setAttribute('aria-expanded', 'false');\n          document.removeEventListener('keydown', trapFocus);\n          delete langPanel.__accwebTrapFocus;\n          backButton.classList.remove('visible');\n          defaultTitle.classList.remove('hidden');\n          langTitle.classList.remove('visible');\n          if (returnFocus) {\n            langToggle.focus();\n          }\n        };\n  \n        langToggle.addEventListener(\"click\", () => {\n          const isExpanded = langToggle.getAttribute('aria-expanded') === 'true';\n          langToggle.setAttribute('aria-expanded', !isExpanded);\n          langPanel.classList.toggle('open');\n          \n          backButton.classList.toggle('visible', !isExpanded);\n          defaultTitle.classList.toggle('hidden', !isExpanded);\n          langTitle.classList.toggle('visible', !isExpanded);\n          \n          if (!isExpanded) {\n            langSearch.focus();\n            document.addEventListener('keydown', trapFocus);\n            langPanel.__accwebTrapFocus = trapFocus;\n          } else {\n            closeLanguagePanel(false);\n          }\n        });\n  \n        backButton.addEventListener(\"click\", () => {\n          closeLanguagePanel();\n        });\n  \n        // Close language panel if clicking outside\n        document.addEventListener(\"click\", (e) => {\n            if (langPanel.classList.contains('open') && \n                !langPanel.contains(e.target) && \n                !langToggle.contains(e.target) &&\n                !backButton.contains(e.target)) {\n              closeLanguagePanel(false);\n            }\n          });\n  \n        // Handle language search\n        langSearch.addEventListener(\"input\", () => {\n          const searchValue = langSearch.value.toLowerCase();\n          langItems.forEach(item => {\n            const text = item.textContent.toLowerCase();\n            item.style.display = text.includes(searchValue) ? \"block\" : \"none\";\n          });\n        });\n  \n        // Handle language selection\n        langItems.forEach(item => {\n          item.addEventListener(\"click\", () => {\n            const langCode = item.getAttribute(\"data-lang\");\n            const langLabel = item.textContent;\n            \n            // Update selected language\n            langItems.forEach(i => i.classList.remove(\"selected\"));\n            item.classList.add(\"selected\");\n            \n            // Update current language display\n            const currentLang = this.findElement(\"#acc-current-language\", menu);\n            if (currentLang) {\n              currentLang.textContent = langLabel;\n            }\n            \n            // Close panel\n            closeLanguagePanel(false);\n            \n            // Save language preference and update UI\n            this.saveConfig({ lang: langCode });\n            this.translateMenuUI(menuContainer);\n          });\n        });\n  \n        // click event handler:\n        menu.addEventListener('click', (e) => {\n          const target = e.target.closest('[role=\"button\"], button, .acc-overlay');\n          if (!target) return;\n          if (target.classList.contains('acc-overlay') || target.classList.contains('acc-menu-close')) {\n            this.closeMenu(menuContainer);\n            return;\n          }\n          if (target.classList.contains('acc-reset-btn')) {\n            this.resetEnhancements();\n            return;\n          }\n          const btn = target.classList.contains('acc-btn') ? target : null;\n          if (btn) {\n            const key = btn.dataset.key;\n            // Handle accessibility report action\n            if (key === 'accessibility-report') {\n              this.runAccessibilityReport();\n            }\n            // Handle multi-level feature for text-scale.\n            else if (key === 'text-scale') {\n              this.cycleMultiLevelFeature(key, btn);\n            }\n            // For color adjustments, deselect any other active color filter.\n            else if (this.isColorFilterKey(key)) {\n              const isCurrentlyActive = btn.classList.contains('acc-selected');\n              const newActiveKey = isCurrentlyActive ? null : key;\n              this.setColorFilterUI(menu, newActiveKey);\n              this.updateColorFilterState(newActiveKey);\n              this.applyVisualFilters();\n            }\n            // For other adjustments, simply toggle.\n            else {\n              const isSelected = !btn.classList.contains(\"acc-selected\");\n              btn.classList.toggle('acc-selected', isSelected);\n              btn.setAttribute('aria-pressed', isSelected);\n              this.updateState({ [key]: isSelected });\n              this.applyEnhancements();\n            }\n          }\n        });\n        menu.querySelectorAll('[role=\"button\"], button').forEach(el => {\n          el.addEventListener('keydown', (e) => {\n            if (e.key === 'Enter' || e.key === ' ') {\n              e.preventDefault();\n              el.click();\n            }\n          });\n        });\n        this.translateMenuUI(menuContainer);\n        const config = this.loadConfig();\n        const activeColorFilter = this.getActiveColorFilterKey(config.states);\n        this.setColorFilterUI(menu, activeColorFilter);\n        this.updateColorFilterState(activeColorFilter);\n        if (config.states) {\n          for (let key in config.states) {\n            if (this.isColorFilterKey(key)) {\n              continue;\n            }\n            if (config.states[key] && key !== \"text-scale\") {\n              const selector = key; // keys now directly match our updated options.\n              const btn = this.findElement(`.acc-btn[data-key=\"${selector}\"]`, menu);\n              if (btn) {\n                btn.classList.add(\"acc-selected\");\n                btn.setAttribute('aria-pressed', 'true');\n              }\n            } else if (key === \"text-scale\") {\n              const scaleBtn = this.findElement(`.acc-btn[data-key=\"text-scale\"]`, menu);\n              if (scaleBtn && this.textScaleIndex > 0) {\n                scaleBtn.classList.add(\"acc-selected\");\n                scaleBtn.setAttribute('aria-pressed', 'true');\n              }\n            }\n          }\n        }\n        container.appendChild(menuContainer);\n        return menuContainer;\n      } catch (e) {\n        console.error('Error displaying menu:', e);\n        return null;\n      }\n    },\n\n  displayWidget(options) {\n    try {\n      this.applyThemeVariables();\n      this.registerStaticStyles();\n\n      const widgetTemplate = `\n        <div class=\"acc-widget\">\n          <a href=\"#\" id=\"accessibilityWidget\" class=\"acc-toggle-btn\" title=\"Open Accessibility Menu\" role=\"button\" aria-label=\"Open accessibility menu\" aria-expanded=\"false\">\n            ${this.widgetIcons.accessibility}\n          </a>\n        </div>\n        `;\n      \n        const widget = document.createElement(\"div\");\n        widget.innerHTML = widgetTemplate;\n        widget.classList.add(\"acc-container\");\n        const btn = this.findElement(\".acc-toggle-btn\", widget);\n  \n        this.widgetToggleButton = btn;\n      \n        const { position = \"bottom-left\", offset = [20, 20], size } = options;\n        const normalizedOffset = this.normalizeOffset(offset) || [20, 20];\n        const offsetX = normalizedOffset[0] ?? 20;\n        const offsetY = normalizedOffset[1] ?? 25;\n        let buttonStyle = { left: `${offsetX}px`, bottom: `${offsetY}px` };\n        if (position === \"bottom-right\") {\n          buttonStyle = { right: `${offsetX}px`, left: \"auto\", bottom: `${offsetY}px` };\n        } else if (position === \"top-left\") {\n          buttonStyle = { top: `${offsetY}px`, bottom: \"auto\", left: `${offsetX}px` };\n        } else if (position === \"top-right\") {\n          buttonStyle = { top: `${offsetY}px`, right: `${offsetX}px`, bottom: \"auto\", left: \"auto\" };\n        } else if (position === \"center-left\") {\n          buttonStyle = { top: \"50%\", transform: \"translateY(-50%)\", left: `${offsetX}px`, bottom: \"auto\" };\n        }\n        Object.assign(btn.style, buttonStyle);\n  \n        const customButtonSizeProvided = size !== undefined && size !== null && String(size).trim() !== '';\n        const buttonSize = customButtonSizeProvided\n          ? this.normalizeButtonSize(size)\n          : this.widgetTheme.buttonSize;\n  \n        if (customButtonSizeProvided) {\n          btn.style.width = buttonSize;\n          btn.style.height = buttonSize;\n          btn.style.minWidth = buttonSize;\n          btn.style.minHeight = buttonSize;\n          btn.style.maxWidth = buttonSize;\n          btn.style.maxHeight = buttonSize;\n        }\n  \n        const icon = btn.querySelector('svg');\n        const numericButtonSize = parseInt(buttonSize, 10);\n        if (icon && Number.isFinite(numericButtonSize) && customButtonSizeProvided) {\n          const iconSize = `${Math.max(20, Math.round(numericButtonSize * 0.6))}px`;\n          ['width', 'height', 'minWidth', 'minHeight', 'maxWidth', 'maxHeight'].forEach(prop => {\n            const cssProp = prop.replace(/[A-Z]/g, m => `-${m.toLowerCase()}`);\n            icon.style.setProperty(cssProp, iconSize, 'important');\n          });\n        }\n        \n        let menu;\n        btn.addEventListener(\"click\", (event) => {\n          event.preventDefault();\n          if (!menu) {\n            menu = this.displayMenu({ ...options, container: widget });\n            if (!menu) return;\n            this.menuContainer = menu;\n  \n            const overlay = menu.querySelector('.acc-overlay');\n            if (overlay) {\n              overlay.addEventListener('click', (overlayEvent) => {\n                overlayEvent.stopPropagation();\n                this.closeMenu(menu, btn);\n              });\n            }\n  \n            const closeBtn = menu.querySelector('.acc-menu-close');\n            if (closeBtn) {\n              closeBtn.addEventListener('click', (closeEvent) => {\n                closeEvent.stopPropagation();\n                this.closeMenu(menu, btn);\n              });\n            }\n          }\n  \n          const isHidden = menu.style.display === 'none' || window.getComputedStyle(menu).display === 'none';\n          if (isHidden) {\n            this.openMenu(menu, btn);\n          } else {\n            this.closeMenu(menu, btn);\n          }\n        });\n        \n        // Handle keyboard interaction\n        btn.addEventListener(\"keydown\", (e) => {\n          if (e.key === 'Enter' || e.key === ' ') {\n            e.preventDefault();\n            btn.click();\n          }\n        });\n        \n        document.body.appendChild(widget);\n        this.translateMenuUI(widget);\n        this.ensureSkipLink();\n        \n        // Add a click handler to the document to blur the toggle button when clicking outside\n        document.addEventListener('click', (e) => {\n          if (!btn) return;\n          const clickedToggle = e.target === btn || btn.contains(e.target);\n          if (menu && this.activeMenuContainer === menu && menu.style.display !== 'none') {\n            const clickedInsideMenu = menu.contains(e.target);\n            if (!clickedToggle && !clickedInsideMenu) {\n              this.closeMenu(menu, btn);\n            }\n          } else if (!clickedToggle) {\n            btn.blur();\n          }\n        });\n        \n        return widget;\n      } catch (e) {\n        console.error('Error displaying widget:', e);\n        return null;\n      }\n    },\n\n  startAccessibleWebWidget() {\n          try {\n            if (document.querySelector('.acc-widget .acc-toggle-btn')) {\n              return;\n            }\n  \n            const dataAttributeOptions = this.getDataAttributeOptions();\n            if (dataAttributeOptions && Object.keys(dataAttributeOptions).length) {\n              this.dataOptions = dataAttributeOptions;\n              this.options = {\n                ...this.options,\n                ...dataAttributeOptions\n              };\n            }\n  \n            const baseOptions = { ...this.options };\n            const lang = baseOptions.lang ||\n              document.querySelector('html')?.getAttribute('lang')?.replace(/[_-].*/, '') ||\n              navigator.language ||\n              \"en\";\n            baseOptions.lang = lang;\n  \n            baseOptions.position = baseOptions.position || \"bottom-left\";\n  \n            if (baseOptions.offset) {\n              baseOptions.offset = this.normalizeOffset(baseOptions.offset);\n            }\n  \n            if (baseOptions.size) {\n              baseOptions.size = this.normalizeButtonSize(baseOptions.size);\n              this.widgetTheme.buttonSize = baseOptions.size;\n            }\n  \n            this.options = { ...baseOptions };\n            this.applyThemeVariables();\n            this.registerStaticStyles();\n            \n            // First load the saved configuration\n            this.loadConfig(false);\n            const initialColorFilter = this.getActiveColorFilterKey(this.widgetConfig.states);\n            this.updateColorFilterState(initialColorFilter);\n            \n            // Apply all saved settings immediately on page load\n            this.applyEnhancements();\n            this.applyVisualFilters();\n            \n            // Then launch the widget UI\n            this.launchWidget(baseOptions);\n          } catch (e) {\n            console.error('Error starting AccessibleWeb Widget:', e);\n          }\n        },\n\n  launchWidget(args = {}) {\n          try {\n            let options = { lang: this.getDefaultLanguage(), position: 'bottom-left', offset: [20, 20] };\n            \n            // Load the saved configuration\n            try {\n              const savedConfig = this.fetchSavedConfig();\n              if (savedConfig) {\n                options = { ...options, ...JSON.parse(savedConfig) };\n                // Note: We don't call applyEnhancements() here anymore as it's already called in startAccessibleWebWidget\n              }\n            } catch (e) {\n              console.warn('Error loading saved config:', e);\n            }\n            \n            // Merge with new arguments\n            options = { ...options, ...args };\n            this.saveConfig(options);\n            \n            // Display the widget UI\n            this.displayWidget(options);\n          } catch (e) {\n            console.error('Error in widget launch:', e);\n          }\n        },\n\n};\n","/*!\n * AccessibleWeb Widget v1.1.0\n * https://github.com/ifrederico/accessible-web-widget\n *\n * Copyright (c) 2025 ifrederico\n * Released under the MIT License\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND.\n * See DISCLAIMER.md for important legal information.\n * This widget does not guarantee accessibility compliance.\n */\n\nimport { WIDGET_THEME } from './constants/theme.js';\nimport { WIDGET_ICONS } from './constants/icons.js';\nimport { TARGET_SELECTORS, PAGE_CONTENT_SELECTOR } from './constants/selectors.js';\nimport { TRANSLATIONS, SUPPORTED_LANGUAGES } from './constants/translations.js';\nimport { stateMethods } from './state.js';\nimport { styleMethods } from './styles.js';\nimport { featureMethods } from './features.js';\nimport { uiMethods } from './ui.js';\n\nclass AccessibleWebWidget {\n  constructor(options = {}) {\n    // ======================================================\n    // CONFIGURATION & INITIAL STATE\n    // ======================================================\n    this.widgetTheme = { ...WIDGET_THEME };\n    this.widgetIcons = WIDGET_ICONS;\n    this.targetSelectors = TARGET_SELECTORS;\n\n    this.visualFilters = {\n      'dark-contrast': {\n        styles: { 'filter': 'contrast(150%) brightness(0.8)' },\n        selector: PAGE_CONTENT_SELECTOR\n      },\n      'light-contrast': {\n        styles: { 'filter': 'contrast(125%) brightness(1.2)' },\n        selector: PAGE_CONTENT_SELECTOR\n      },\n      'invert-colors': {\n        styles: { 'filter': 'invert(100%)' },\n        selector: PAGE_CONTENT_SELECTOR\n      },\n      'low-saturation': {\n        styles: { 'filter': 'saturate(50%)' },\n        selector: PAGE_CONTENT_SELECTOR\n      },\n      'monochrome': {\n        styles: { 'filter': 'grayscale(100%)' },\n        selector: PAGE_CONTENT_SELECTOR\n      },\n      'high-saturation': {\n        styles: { 'filter': 'saturate(200%)' },\n        selector: PAGE_CONTENT_SELECTOR\n      }\n    };\n\n    this.translations = TRANSLATIONS;\n    this.supportedLanguages = SUPPORTED_LANGUAGES.map((language) => ({ ...language }));\n\n    this.accessTools = [\n      { label: 'Big Cursor', key: 'large-pointer', icon: this.widgetIcons.largePointer },\n      { label: 'Stop Animations', key: 'pause-motion', icon: this.widgetIcons.pauseMotion },\n      { label: 'Reading Guide', key: 'reading-aid', icon: this.widgetIcons.readingAid }\n    ];\n\n    // Add Accessibility Report only in dev mode (?acc-dev=true)\n    if (this.isDevMode()) {\n      this.accessTools.push({\n        label: 'Accessibility Report',\n        key: 'accessibility-report',\n        icon: this.widgetIcons.accessibilityReport,\n        isAction: true\n      });\n    }\n\n    // axe-core state\n    this.axeCoreLoaded = false;\n    this.axeCoreLoading = false;\n    this.axeCorePromise = null;\n\n    // Accessibility report modal state\n    this.reportPreviousFocus = null;\n    this.reportKeyListener = null;\n\n    // Font size cycling\n    this.textScaleIndex = 0;\n    this.textScaleValues = [1.2, 1.4, 1.6];\n\n    this.contentOptions = [\n      { label: 'Font Weight', key: 'bold-text', icon: this.widgetIcons.boldText },\n      { label: 'Line Height', key: 'line-spacing', icon: this.widgetIcons.lineSpacing },\n      { label: 'Letter Spacing', key: 'letter-spacing', icon: this.widgetIcons.letterSpacing },\n      { label: 'Hide Images', key: 'hide-images', icon: this.widgetIcons.hideImages },\n      { label: 'Dyslexia Font', key: 'readable-text', icon: this.widgetIcons.dyslexiaFont },\n      { label: 'Highlight Links', key: 'highlight-links', icon: this.widgetIcons.highlightLinks },\n      { label: 'Highlight Title', key: 'highlight-title', icon: this.widgetIcons.highlightTitle },\n      {\n        label: 'Font Size',\n        key: 'text-scale',\n        icon: this.widgetIcons.adjustFontSize,\n        multiLevel: true,\n        levels: this.textScaleValues.length\n      }\n    ];\n\n    this.multiLevelFeatures = {\n      'text-scale': {\n        levels: this.textScaleValues.length,\n        currentIndex: -1,\n        values: this.textScaleValues\n      }\n    };\n\n    this.readingAidTemplate = `\n      <div class=\"acc-rg acc-rg-top\" role=\"presentation\"> </div>\n      <div class=\"acc-rg acc-rg-bottom\" role=\"presentation\"> </div>\n    `;\n\n    this.colorOptions = [\n      { label: 'Dark Contrast', key: 'dark-contrast', icon: this.widgetIcons.darkContrast },\n      { label: 'Light Contrast', key: 'light-contrast', icon: this.widgetIcons.lightContrast },\n      { label: 'Invert Colors', key: 'invert-colors', icon: this.widgetIcons.invertColors },\n      { label: 'Low Saturation', key: 'low-saturation', icon: this.widgetIcons.lowSaturation },\n      { label: 'Monochrome', key: 'monochrome', icon: this.widgetIcons.monochrome },\n      { label: 'High Saturation', key: 'high-saturation', icon: this.widgetIcons.highSaturation }\n    ];\n    this.colorFilterKeys = this.colorOptions.map(option => option.key);\n    this.activeColorFilterKey = null;\n\n    this.textScaleSelectors = 'h1,h2,h3,h4,h5,h6,p,a,dl,dt,li,ol,th,td,span,blockquote,.acc-text';\n    this.textScaleObserver = null;\n    this.currentTextScaleMultiplier = 1;\n\n    // Global settings and state\n    this.widgetConfig = {};\n    this.cookieKey = 'accweb';\n    this.readingAidVisible = false;\n    this.readableFontLoaded = false;\n\n    // Menu state tracking for focus management\n    this.activeMenuContainer = null;\n    this.activeMenuToggle = null;\n    this.menuKeyListener = null;\n    this.previousFocus = null;\n    this.widgetToggleButton = null;\n    this.skipLinkElement = null;\n    this.menuContainer = null;\n\n    // Style registration state\n    this.staticStylesRegistered = false;\n\n    this.dataOptions = this.getDataAttributeOptions();\n\n    this.options = {\n      lang: this.getDefaultLanguage(),\n      position: 'bottom-left',\n      ...this.dataOptions,\n      ...options\n    };\n\n    if (this.options.offset) {\n      this.options.offset = this.normalizeOffset(this.options.offset);\n    }\n\n    if (this.options.size) {\n      this.widgetTheme.buttonSize = this.normalizeButtonSize(this.options.size);\n      this.options.size = this.widgetTheme.buttonSize;\n    }\n\n    this.applyThemeVariables();\n    this.registerStaticStyles();\n  }\n}\n\nObject.assign(\n  AccessibleWebWidget.prototype,\n  stateMethods,\n  styleMethods,\n  featureMethods,\n  uiMethods\n);\n\nif (typeof window !== 'undefined') {\n  window.AccessibleWebWidget = AccessibleWebWidget;\n}\n\nif (typeof document !== 'undefined') {\n  const widgetInstance = new AccessibleWebWidget();\n  if (document.readyState === 'complete' || document.readyState === 'interactive') {\n    widgetInstance.startAccessibleWebWidget();\n  } else {\n    document.addEventListener('DOMContentLoaded', () => widgetInstance.startAccessibleWebWidget());\n  }\n}\n\nexport default AccessibleWebWidget;\n"],"names":["WIDGET_THEME","primaryColor","primaryColorLight","primaryColorDark","backgroundColor","textColor","textColorInverted","buttonSize","cardBackground","borderColor","focusRingColor","hoverColor","activeColor","successColor","errorColor","warningColor","headerHeight","borderRadius","buttonBorderRadius","menuPosition","zIndex","focusBorderWidth","focusOutlineOffset","WIDGET_ICONS","accessibility","largePointer","pauseMotion","readingAid","boldText","lineSpacing","letterSpacing","dyslexiaFont","highlightLinks","highlightTitle","darkContrast","lightContrast","invertColors","lowSaturation","highSaturation","monochrome","reset","close","increase","decrease","arrowBack","adjustFontSize","language","hideImages","accessibilityReport","TARGET_SELECTORS","ALL","LINKS","HEADERS","TEXT","PAGE_CONTENT_SELECTOR","TRANSLATIONS","en","Close","Monochrome","Tools","Language","Critical","Serious","Moderate","Minor","Element","Issue","it","fr","de","es","ru","pl","ro","nl","uk","SUPPORTED_LANGUAGES","code","label","stateMethods","storageAvailable","test","localStorage","setItem","removeItem","e","fetchCookie","name","cookieName","decodedCookie","decodeURIComponent","document","cookie","split","map","c","trim","find","startsWith","substring","length","console","warn","storeCookie","value","days","d","Date","setTime","getTime","expires","toUTCString","isSecure","window","location","protocol","getSavedLanguage","this","stored","getItem","cookieKey","config","JSON","parse","lang","cookieVal","getBrowserLanguage","navigator","supportedCodes","supportedLanguages","browserLanguages","languages","userLanguage","browserLang","primaryCode","toLowerCase","includes","getDefaultLanguage","savedLang","isDevMode","URLSearchParams","search","get","getDataAttributeOptions","options","attributes","assignValue","key","String","position","normalized","normalizeOffset","offset","normalizedSize","normalizeButtonSize","size","scriptCandidates","currentScript","push","querySelectorAll","forEach","script","el","attrName","attrValue","getAttribute","undefined","querySelector","parts","Array","isArray","parsed","part","number","Number","isFinite","Math","round","filter","fallback","widgetTheme","max","trimmed","numeric","toggleDisplay","state","style","display","updateState","payload","updatedConfig","widgetConfig","states","saveConfig","newConfig","stringify","retrieveState","loadConfig","cache","savedConfig","fetchSavedConfig","fetchDataAttr","attr","dataAttr","element","STATIC_STYLES","join","styleMethods","findElement","selector","parent","injectStyle","id","css","getElementById","createElement","innerHTML","head","appendChild","createCSS","styles","browserPrefixes","prefixedProperties","hasOwnProperty","prefix","wrapCSS","childrenSelector","output","child","buildCSS","applyToolStyle","enable","styleId","remove","documentElement","classList","toggle","applyThemeVariables","vars","Object","entries","setProperty","registerStaticStyles","staticStylesRegistered","featureMethods","ensureSkipLink","skipLinkElement","body","contains","updateSkipLinkLabel","existing","setAttribute","button","type","className","translate","textContent","addEventListener","event","preventDefault","widgetToggleButton","currentMenu","activeMenuContainer","menuContainer","focusMenu","targetMenu","focusables","getFocusableElements","focus","click","requestAnimationFrame","insertBefore","firstChild","shouldSkipScaling","closest","applyScaleToElement","multiplier","baseAttr","hasAttribute","computedSize","parseFloat","getComputedStyle","fontSize","isNaN","baseSize","ensureTextScaleObserver","textScaleObserver","MutationObserver","mutations","currentTextScaleMultiplier","pending","Set","mutation","addedNodes","node","matches","textScaleSelectors","add","observe","childList","subtree","disconnectTextScaleObserver","disconnect","scaleText","multiply","removeAttribute","enableBoldText","adjustLetterSpacing","adjustLineSpacing","enableLargePointer","cursor","outline","highlightTitles","targetSelectors","ensureReadableFontLoaded","readableFontLoaded","enableReadableText","shouldEnable","iconExclusions","transition","enableReadingAid","container","guideHeight","__accweb__scrollGuide","removeEventListener","readingAidTemplate","prepend","rgTop","rgBottom","readingAidVisible","updateGuidePosition","throttle","mouseY","clientY","topHeight","bottomHeight","innerHeight","height","passive","loadAxeCore","axeCoreLoaded","axe","Promise","resolve","axeCorePromise","axeCoreLoading","reject","settled","timeoutId","settleSuccess","clearTimeout","Error","settleError","error","src","async","once","setTimeout","runAccessibilityReport","panel","createReportPanel","openReportPanel","contentArea","statusArea","results","run","runOnly","displayReportResults","message","getReportFocusableElements","dialog","reportPreviousFocus","activeElement","focusTarget","reportKeyListener","closeReportPanel","first","last","active","outsidePanel","shiftKey","widgetIcons","closeBtn","overlay","violations","passes","incomplete","counts","critical","serious","moderate","minor","v","impact","nodes","totalViolations","values","reduce","a","b","html","severityOrder","sort","violation","index","capitalizeFirst","escapeHtml","help","description","helpUrl","slice","failureSummary","header","parentElement","str","charAt","toUpperCase","div","concealImages","existingStyle","applyEnhancements","scaleValue","scaleIndex","textScaleValues","indexOf","textScaleIndex","multiLevelFeatures","currentIndex","isColorFilterKey","colorFilterKeys","getActiveColorFilterKey","activeColorFilterKey","setColorFilterUI","menu","activeKey","filterKey","isActive","updateColorFilterState","requiresUpdate","rawCurrent","applyVisualFilters","visualFilters","adjustedFilter","cycleTextScale","progressIndicator","dots","dot","cycleMultiLevelFeature","featureKey","feature","newIndex","levels","newValue","indicator","i","resetEnhancements","keys","blur","guide","uiMethods","translations","func","limit","inThrottle","args","apply","root","selectors","hasDocument","from","rect","getBoundingClientRect","visibility","width","openMenu","toggleBtn","activeMenuToggle","previousFocus","focusable","menuKeyListener","closeMenu","targetContainer","langPanel","__accwebTrapFocus","langToggle","backButton","defaultTitle","langTitle","renderOptions","optionClass","opt","isMultiLevel","multiLevel","featureData","j","icon","getTranslatedText","defaultValue","text","translateMenuUI","innerText","displayMenu","menuTemplate","l","right","left","contentOptions","accessTools","colorOptions","langSearch","langItems","trapFocus","focusableElements","unshift","firstElement","lastElement","stopPropagation","closeLanguagePanel","returnFocus","isExpanded","target","searchValue","item","langCode","langLabel","currentLang","btn","dataset","newActiveKey","isSelected","activeColorFilter","scaleBtn","displayWidget","widgetTemplate","widget","normalizedOffset","offsetX","offsetY","buttonStyle","bottom","top","transform","assign","customButtonSizeProvided","minWidth","minHeight","maxWidth","maxHeight","numericButtonSize","parseInt","iconSize","prop","cssProp","replace","m","overlayEvent","closeEvent","clickedToggle","clickedInsideMenu","startAccessibleWebWidget","dataAttributeOptions","dataOptions","baseOptions","initialColorFilter","launchWidget","AccessibleWebWidget","constructor","isAction","option","prototype","widgetInstance","readyState"],"mappings":"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"}